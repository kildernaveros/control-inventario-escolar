<div class="container">
  <!-- Header -->
  <header class="header">
    <div class="header-content">
      <h1>üì¶ Control de Inventario Escolar</h1>
      <button class="btn-logout" (click)="logout()">Cerrar Sesi√≥n</button>
    </div>
  </header>

  <!-- Estad√≠sticas -->
  <div class="stats">
    <div class="stat-card">
      <div class="stat-number">{{ getStats().total }}</div>
      <div class="stat-label">Total Art√≠culos</div>
    </div>
    <div class="stat-card green">
      <div class="stat-number">{{ getStats().disponibles }}</div>
      <div class="stat-label">Disponibles</div>
    </div>
    <div class="stat-card blue">
      <div class="stat-number">{{ getStats().enUso }}</div>
      <div class="stat-label">En Uso</div>
    </div>
    <div class="stat-card orange">
      <div class="stat-number">{{ getStats().danados }}</div>
      <div class="stat-label">Da√±ados</div>
    </div>
    <div class="stat-card red">
      <div class="stat-number">{{ getStats().perdidos }}</div>
      <div class="stat-label">Perdidos</div>
    </div>
  </div>

  <!-- Filtros y b√∫squeda -->
  <div class="filters">
    <input 
      type="text" 
      [(ngModel)]="searchTerm" 
      (input)="onSearch()"
      placeholder="üîç Buscar por nombre o descripci√≥n..."
      class="search-input"
    />
    
    <select [(ngModel)]="selectedCategoria" (change)="applyFilters()" class="filter-select">
      <option value="">Todas las categor√≠as</option>
      <option *ngFor="let cat of categorias" [value]="cat">{{ cat }}</option>
    </select>

    <select [(ngModel)]="selectedEstado" (change)="applyFilters()" class="filter-select">
      <option value="">Todos los estados</option>
      <option value="disponible">Disponible</option>
      <option value="en-uso">En Uso</option>
      <option value="da√±ado">Da√±ado</option>
      <option value="perdido">Perdido</option>
    </select>

    <button class="btn-add" (click)="openForm()">+ Agregar Art√≠culo</button>
  </div>

  <!-- Lista de art√≠culos -->
  <div class="items-grid">
    <div *ngFor="let item of filteredItems" class="item-card">
      <div class="item-header">
        <h3>{{ item.nombre }}</h3>
        <span class="badge" [class]="item.estado">{{ item.estado }}</span>
      </div>
      
      <div class="item-body">
        <p><strong>Categor√≠a:</strong> {{ item.categoria }}</p>
        <p><strong>Cantidad:</strong> {{ item.cantidad }}</p>
        <p><strong>Ubicaci√≥n:</strong> {{ item.ubicacion }}</p>
        <p><strong>Descripci√≥n:</strong> {{ item.descripcion }}</p>
        <p class="item-date">
          <strong>Registrado:</strong> {{ item.fechaRegistro | date:'dd/MM/yyyy' }}
        </p>
      </div>

      <div class="item-actions">
        <button class="btn-edit" (click)="openForm(item)">‚úèÔ∏è Editar</button>
        <button class="btn-delete" (click)="deleteItem(item.id!)">üóëÔ∏è Eliminar</button>
      </div>
    </div>

    <div *ngIf="filteredItems.length === 0" class="empty-state">
      <p>üì≠ No hay art√≠culos que coincidan con los filtros</p>
      <button class="btn-add" (click)="openForm()">Agregar el primero</button>
    </div>
  </div>

  <!-- Modal de formulario -->
  <div *ngIf="showForm" class="modal" (click)="closeForm()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <h2>{{ editingItem ? '‚úèÔ∏è Editar Art√≠culo' : '‚ûï Nuevo Art√≠culo' }}</h2>
      
      <form (ngSubmit)="onSubmit()">
        <div class="form-group">
          <label>Nombre *</label>
          <input type="text" [(ngModel)]="formData.nombre" name="nombre" required />
        </div>

        <div class="form-group">
          <label>Categor√≠a *</label>
          <select [(ngModel)]="formData.categoria" name="categoria" required>
            <option value="">Selecciona una categor√≠a</option>
            <option *ngFor="let cat of categorias" [value]="cat">{{ cat }}</option>
          </select>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Cantidad *</label>
            <input type="number" [(ngModel)]="formData.cantidad" name="cantidad" min="0" required />
          </div>

          <div class="form-group">
            <label>Estado</label>
            <select [(ngModel)]="formData.estado" name="estado">
              <option value="disponible">Disponible</option>
              <option value="en-uso">En Uso</option>
              <option value="da√±ado">Da√±ado</option>
              <option value="perdido">Perdido</option>
            </select>
          </div>
        </div>

        <div class="form-group">
          <label>Ubicaci√≥n</label>
          <input type="text" [(ngModel)]="formData.ubicacion" name="ubicacion" />
        </div>

        <div class="form-group">
          <label>Descripci√≥n</label>
          <textarea [(ngModel)]="formData.descripcion" name="descripcion" rows="3"></textarea>
        </div>

        <div class="form-actions">
          <button type="button" class="btn-cancel" (click)="closeForm()">Cancelar</button>
          <button type="submit" class="btn-submit">
            {{ editingItem ? 'Actualizar' : 'Agregar' }}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>