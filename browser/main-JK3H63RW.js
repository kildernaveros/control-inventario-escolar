var h1=Object.defineProperty,f1=Object.defineProperties;var p1=Object.getOwnPropertyDescriptors;var Bl=Object.getOwnPropertySymbols;var GD=Object.prototype.hasOwnProperty,WD=Object.prototype.propertyIsEnumerable;var qD=(n,e,t)=>e in n?h1(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,k=(n,e)=>{for(var t in e||={})GD.call(e,t)&&qD(n,t,e[t]);if(Bl)for(var t of Bl(e))WD.call(e,t)&&qD(n,t,e[t]);return n},ae=(n,e)=>f1(n,p1(e));var KD=(n,e)=>{var t={};for(var r in n)GD.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&Bl)for(var r of Bl(n))e.indexOf(r)<0&&WD.call(n,r)&&(t[r]=n[r]);return t};var Qg;function $l(){return Qg}function Bn(n){let e=Qg;return Qg=n,e}var QD=Symbol("NotFound");function rs(n){return n===QD||n?.name==="\u0275NotFound"}var Dt=null,Hl=!1,Yg=1,g1=null,bt=Symbol("SIGNAL");function ce(n){let e=Dt;return Dt=n,e}function Wl(){return Dt}var is={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function os(n){if(Hl)throw new Error("");if(Dt===null)return;Dt.consumerOnSignalRead(n);let e=Dt.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=Dt.recomputing;if(r&&(t=e!==void 0?e.nextProducer:Dt.producers,t!==void 0&&t.producer===n)){Dt.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===Dt&&(!r||y1(i,Dt)))return;let o=as(Dt),s={producer:n,consumer:Dt,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};Dt.producersTail=s,e!==void 0?e.nextProducer=s:Dt.producers=s,o&&XD(n,s)}function YD(){Yg++}function Kl(n){if(!(as(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Yg)){if(!n.producerMustRecompute(n)&&!hc(n)){Gl(n);return}n.producerRecomputeValue(n),Gl(n)}}function Zg(n){if(n.consumers===void 0)return;let e=Hl;Hl=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||m1(r)}}finally{Hl=e}}function Jg(){return Dt?.consumerAllowSignalWrites!==!1}function m1(n){n.dirty=!0,Zg(n),n.consumerMarkedDirty?.(n)}function Gl(n){n.dirty=!1,n.lastCleanEpoch=Yg}function ss(n){return n&&ZD(n),ce(n)}function ZD(n){n.producersTail=void 0,n.recomputing=!0}function dc(n,e){ce(e),n&&JD(n)}function JD(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(as(n))do t=Xg(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function hc(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(Kl(t),r!==t.version))return!0}return!1}function fc(n){if(as(n)){let e=n.producers;for(;e!==void 0;)e=Xg(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function XD(n,e){let t=n.consumersTail,r=as(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)XD(i.producer,i)}function Xg(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!as(e)){let o=e.producers;for(;o!==void 0;)o=Xg(o)}return t}function as(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function Ql(n){g1?.(n)}function y1(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function Yl(n,e){return Object.is(n,e)}function Zl(n,e){let t=Object.create(v1);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Kl(t),os(t),t.value===lc)throw t.error;return t.value};return r[bt]=t,Ql(t),r}var zl=Symbol("UNSET"),ql=Symbol("COMPUTING"),lc=Symbol("ERRORED"),v1=ae(k({},is),{value:zl,dirty:!0,error:null,equal:Yl,kind:"computed",producerMustRecompute(n){return n.value===zl||n.value===ql},producerRecomputeValue(n){if(n.value===ql)throw new Error("");let e=n.value;n.value=ql;let t=ss(n),r,i=!1;try{r=n.computation(),ce(null),i=e!==zl&&e!==lc&&r!==lc&&n.equal(e,r)}catch(o){r=lc,n.error=o}finally{dc(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function _1(){throw new Error}var eb=_1;function tb(n){eb(n)}function em(n){eb=n}var E1=null;function tm(n,e){let t=Object.create(Jl);t.value=n,e!==void 0&&(t.equal=e);let r=()=>nb(t);return r[bt]=t,Ql(t),[r,s=>cs(t,s),s=>nm(t,s)]}function nb(n){return os(n),n.value}function cs(n,e){Jg()||tb(n),n.equal(n.value,e)||(n.value=e,I1(n))}function nm(n,e){Jg()||tb(n),cs(n,e(n.value))}var Jl=ae(k({},is),{equal:Yl,value:void 0,kind:"signal"});function I1(n){n.version++,YD(),Zg(n),E1?.(n)}function oe(n){return typeof n=="function"}function us(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Xl=us(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Wi(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var ke=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(oe(r))try{r()}catch(o){e=o instanceof Xl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{rb(o)}catch(s){e=e??[],s instanceof Xl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Xl(e)}}add(e){var t;if(e&&e!==this)if(this.closed)rb(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Wi(t,e)}remove(e){let{_finalizers:t}=this;t&&Wi(t,e),e instanceof n&&e._removeParent(this)}};ke.EMPTY=(()=>{let n=new ke;return n.closed=!0,n})();var rm=ke.EMPTY;function ed(n){return n instanceof ke||n&&"closed"in n&&oe(n.remove)&&oe(n.add)&&oe(n.unsubscribe)}function rb(n){oe(n)?n():n.unsubscribe()}var An={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ls={setTimeout(n,e,...t){let{delegate:r}=ls;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=ls;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function td(n){ls.setTimeout(()=>{let{onUnhandledError:e}=An;if(e)e(n);else throw n})}function pc(){}var ib=im("C",void 0,void 0);function ob(n){return im("E",void 0,n)}function sb(n){return im("N",n,void 0)}function im(n,e,t){return{kind:n,value:e,error:t}}var Ki=null;function ds(n){if(An.useDeprecatedSynchronousErrorHandling){let e=!Ki;if(e&&(Ki={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Ki;if(Ki=null,t)throw r}}else n()}function ab(n){An.useDeprecatedSynchronousErrorHandling&&Ki&&(Ki.errorThrown=!0,Ki.error=n)}var Qi=class extends ke{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ed(e)&&e.add(this)):this.destination=D1}static create(e,t,r){return new hs(e,t,r)}next(e){this.isStopped?sm(sb(e),this):this._next(e)}error(e){this.isStopped?sm(ob(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?sm(ib,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},w1=Function.prototype.bind;function om(n,e){return w1.call(n,e)}var am=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){nd(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){nd(r)}else nd(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){nd(t)}}},hs=class extends Qi{constructor(e,t,r){super();let i;if(oe(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&An.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&om(e.next,o),error:e.error&&om(e.error,o),complete:e.complete&&om(e.complete,o)}):i=e}this.destination=new am(i)}};function nd(n){An.useDeprecatedSynchronousErrorHandling?ab(n):td(n)}function T1(n){throw n}function sm(n,e){let{onStoppedNotification:t}=An;t&&ls.setTimeout(()=>t(n,e))}var D1={closed:!0,next:pc,error:T1,complete:pc};var fs=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Jt(n){return n}function rd(...n){return cm(n)}function cm(n){return n.length===0?Jt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var X=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=C1(t)?t:new hs(t,r,i);return ds(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=cb(r),new r((i,o)=>{let s=new hs({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[fs](){return this}pipe(...t){return cm(t)(this)}toPromise(t){return t=cb(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function cb(n){var e;return(e=n??An.Promise)!==null&&e!==void 0?e:Promise}function b1(n){return n&&oe(n.next)&&oe(n.error)&&oe(n.complete)}function C1(n){return n&&n instanceof Qi||b1(n)&&ed(n)}function um(n){return oe(n?.lift)}function ge(n){return e=>{if(um(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function fe(n,e,t,r,i){return new lm(n,e,t,r,i)}var lm=class extends Qi{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ps(){return ge((n,e)=>{let t=null;n._refCount++;let r=fe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var gs=class extends X{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,um(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ke;let t=this.getSubject();e.add(this.source.subscribe(fe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ke.EMPTY)}return e}refCount(){return ps()(this)}};var ub=us(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Xe=(()=>{class n extends X{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new id(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new ub}next(t){ds(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){ds(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ds(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?rm:(this.currentObservers=null,o.push(t),new ke(()=>{this.currentObservers=null,Wi(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new X;return t.source=this,t}}return n.create=(e,t)=>new id(e,t),n})(),id=class extends Xe{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:rm}};var gt=class extends Xe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var dm={now(){return(dm.delegate||Date).now()},delegate:void 0};var od=class extends ke{constructor(e,t){super()}schedule(e,t=0){return this}};var gc={setInterval(n,e,...t){let{delegate:r}=gc;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=gc;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var ms=class extends od{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return gc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&gc.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Wi(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var ys=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};ys.now=dm.now;var vs=class extends ys{constructor(e,t=ys.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var hm=new vs(ms);var sd=class extends ms{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var ad=class extends vs{};var fm=new ad(sd);var Bt=new X(n=>n.complete());function lb(n){return n&&oe(n.schedule)}function db(n){return n[n.length-1]}function cd(n){return oe(db(n))?n.pop():void 0}function Jr(n){return lb(db(n))?n.pop():void 0}function pm(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function fb(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}function hb(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Yi(n){return this instanceof Yi?(this.v=n,this):new Yi(n)}function pb(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(w){return Promise.resolve(w).then(y,p)}}function a(y,w){r[y]&&(i[y]=function(R){return new Promise(function(N,V){o.push([y,R,N,V])>1||u(y,R)})},w&&(i[y]=w(i[y])))}function u(y,w){try{l(r[y](w))}catch(R){m(o[0][3],R)}}function l(y){y.value instanceof Yi?Promise.resolve(y.value.v).then(h,p):m(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,w){y(w),o.shift(),o.length&&u(o[0][0],o[0][1])}}function gb(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof hb=="function"?hb(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,u){s=n[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var ud=n=>n&&typeof n.length=="number"&&typeof n!="function";function ld(n){return oe(n?.then)}function dd(n){return oe(n[fs])}function hd(n){return Symbol.asyncIterator&&oe(n?.[Symbol.asyncIterator])}function fd(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function S1(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var pd=S1();function gd(n){return oe(n?.[pd])}function md(n){return pb(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Yi(t.read());if(i)return yield Yi(void 0);yield yield Yi(r)}}finally{t.releaseLock()}})}function yd(n){return oe(n?.getReader)}function $e(n){if(n instanceof X)return n;if(n!=null){if(dd(n))return A1(n);if(ud(n))return R1(n);if(ld(n))return N1(n);if(hd(n))return mb(n);if(gd(n))return M1(n);if(yd(n))return P1(n)}throw fd(n)}function A1(n){return new X(e=>{let t=n[fs]();if(oe(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function R1(n){return new X(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function N1(n){return new X(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,td)})}function M1(n){return new X(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function mb(n){return new X(e=>{x1(n,e).catch(t=>e.error(t))})}function P1(n){return mb(md(n))}function x1(n,e){var t,r,i,o;return fb(this,void 0,void 0,function*(){try{for(t=gb(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function $t(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Xr(n,e=0){return ge((t,r)=>{t.subscribe(fe(r,i=>$t(r,n,()=>r.next(i),e),()=>$t(r,n,()=>r.complete(),e),i=>$t(r,n,()=>r.error(i),e)))})}function ei(n,e=0){return ge((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function yb(n,e){return $e(n).pipe(ei(e),Xr(e))}function vb(n,e){return $e(n).pipe(ei(e),Xr(e))}function _b(n,e){return new X(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function Eb(n,e){return new X(t=>{let r;return $t(t,e,()=>{r=n[pd](),$t(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>oe(r?.return)&&r.return()})}function vd(n,e){if(!n)throw new Error("Iterable cannot be null");return new X(t=>{$t(t,e,()=>{let r=n[Symbol.asyncIterator]();$t(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Ib(n,e){return vd(md(n),e)}function wb(n,e){if(n!=null){if(dd(n))return yb(n,e);if(ud(n))return _b(n,e);if(ld(n))return vb(n,e);if(hd(n))return vd(n,e);if(gd(n))return Eb(n,e);if(yd(n))return Ib(n,e)}throw fd(n)}function Pe(n,e){return e?wb(n,e):$e(n)}function J(...n){let e=Jr(n);return Pe(n,e)}function _s(n,e){let t=oe(n)?n:()=>n,r=i=>i.error(t());return new X(e?i=>e.schedule(r,0,i):r)}function gm(n){return!!n&&(n instanceof X||oe(n.lift)&&oe(n.subscribe))}var gr=us(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ue(n,e){return ge((t,r)=>{let i=0;t.subscribe(fe(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:O1}=Array;function k1(n,e){return O1(e)?n(...e):n(e)}function _d(n){return ue(e=>k1(n,e))}var{isArray:F1}=Array,{getPrototypeOf:L1,prototype:V1,keys:j1}=Object;function Ed(n){if(n.length===1){let e=n[0];if(F1(e))return{args:e,keys:null};if(U1(e)){let t=j1(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function U1(n){return n&&typeof n=="object"&&L1(n)===V1}function Id(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function wd(...n){let e=Jr(n),t=cd(n),{args:r,keys:i}=Ed(n);if(r.length===0)return Pe([],e);let o=new X(B1(r,e,i?s=>Id(i,s):Jt));return t?o.pipe(_d(t)):o}function B1(n,e,t=Jt){return r=>{Tb(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)Tb(e,()=>{let l=Pe(n[u],e),h=!1;l.subscribe(fe(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Tb(n,e,t){n?$t(t,n,e):e()}function Db(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=R=>l<r?w(R):u.push(R),w=R=>{o&&e.next(R),l++;let N=!1;$e(t(R,h++)).subscribe(fe(e,V=>{i?.(V),o?y(V):e.next(V)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;u.length&&l<r;){let V=u.shift();s?$t(e,s,()=>w(V)):w(V)}m()}catch(V){e.error(V)}}))};return n.subscribe(fe(e,y,()=>{p=!0,m()})),()=>{a?.()}}function et(n,e,t=1/0){return oe(e)?et((r,i)=>ue((o,s)=>e(r,o,i,s))($e(n(r,i))),t):(typeof e=="number"&&(t=e),ge((r,i)=>Db(r,i,n,t)))}function bb(n=1/0){return et(Jt,n)}function Cb(){return bb(1)}function Es(...n){return Cb()(Pe(n,Jr(n)))}function mc(n){return new X(e=>{$e(n()).subscribe(e)})}function mm(...n){let e=cd(n),{args:t,keys:r}=Ed(n),i=new X(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;$e(t[h]).subscribe(fe(o,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?Id(r,a):a),o.complete())}))}});return e?i.pipe(_d(e)):i}function Xt(n,e){return ge((t,r)=>{let i=0;t.subscribe(fe(r,o=>n.call(e,o,i++)&&r.next(o)))})}function ti(n){return ge((e,t)=>{let r=null,i=!1,o;r=e.subscribe(fe(t,void 0,void 0,s=>{o=$e(n(s,ti(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function Sb(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(fe(s,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Is(n,e){return oe(e)?et(n,e,1):et(n,1)}function ni(n){return ge((e,t)=>{let r=!1;e.subscribe(fe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function mr(n){return n<=0?()=>Bt:ge((e,t)=>{let r=0;e.subscribe(fe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Td(n=$1){return ge((e,t)=>{let r=!1;e.subscribe(fe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function $1(){return new gr}function yc(n){return ge((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function yr(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Xt((i,o)=>n(i,o,r)):Jt,mr(1),t?ni(e):Td(()=>new gr))}function ws(n){return n<=0?()=>Bt:ge((e,t)=>{let r=[];e.subscribe(fe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function ym(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Xt((i,o)=>n(i,o,r)):Jt,ws(1),t?ni(e):Td(()=>new gr))}function Dd(n,e){return ge(Sb(n,e,arguments.length>=2,!0))}function bd(...n){let e=Jr(n);return ge((t,r)=>{(e?Es(n,t,e):Es(n,t)).subscribe(r)})}function Ht(n,e){return ge((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(fe(r,u=>{i?.unsubscribe();let l=0,h=o++;$e(n(u,h)).subscribe(i=fe(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Cd(n){return ge((e,t)=>{$e(n).subscribe(fe(t,()=>t.complete(),pc)),!t.closed&&e.subscribe(t)})}function at(n,e,t){let r=oe(n)||e||t?{next:n,error:e,complete:t}:n;return r?ge((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(fe(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Jt}function Ab(n){let e=ce(null);try{return n()}finally{ce(e)}}var ri=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Nm=new ri("20.3.15");var Mm="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",$=class extends Error{code;constructor(e,t){super(Er(e,t)),this.code=e}};function H1(n){return`NG0${Math.abs(n)}`}function Er(n,e){return`${H1(n)}${e?": "+e:""}`}function we(n){for(let e in n)if(n[e]===we)return e;throw Error("")}function Mb(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function _r(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(_r).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function Nd(n,e){return n?e?`${n} ${e}`:n:e||""}var z1=we({__forward_ref__:we});function tn(n){return n.__forward_ref__=tn,n.toString=function(){return _r(this())},n}function mt(n){return Pm(n)?n():n}function Pm(n){return typeof n=="function"&&n.hasOwnProperty(z1)&&n.__forward_ref__===tn}function H(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ir(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ic(n){return q1(n,Md)}function xm(n){return Ic(n)!==null}function q1(n,e){return n.hasOwnProperty(e)&&n[e]||null}function G1(n){let e=n?.[Md]??null;return e||null}function _m(n){return n&&n.hasOwnProperty(Ad)?n[Ad]:null}var Md=we({\u0275prov:we}),Ad=we({\u0275inj:we}),j=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=H({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Om(n){return n&&!!n.\u0275providers}var km=we({\u0275cmp:we}),Fm=we({\u0275dir:we}),Lm=we({\u0275pipe:we}),Vm=we({\u0275mod:we}),_c=we({\u0275fac:we}),no=we({__NG_ELEMENT_ID__:we}),Rb=we({__NG_ENV_ID__:we});function Pd(n){return typeof n=="string"?n:n==null?"":String(n)}function Pb(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Pd(n)}var xb=we({ngErrorCode:we}),W1=we({ngErrorMessage:we}),K1=we({ngTokenPath:we});function jm(n,e){return Ob("",-200,e)}function xd(n,e){throw new $(-201,!1)}function Ob(n,e,t){let r=new $(e,n);return r[xb]=e,r[W1]=n,t&&(r[K1]=t),r}function Q1(n){return n[xb]}var Em;function kb(){return Em}function en(n){let e=Em;return Em=n,e}function Um(n,e,t){let r=Ic(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;xd(n,"Injector")}var Y1={},Zi=Y1,Im="__NG_DI_FLAG__",wm=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=Ji(t)||0;try{return this.injector.get(e,r&8?null:Zi,r)}catch(i){if(rs(i))return i;throw i}}};function Z1(n,e=0){let t=$l();if(t===void 0)throw new $(-203,!1);if(t===null)return Um(n,void 0,e);{let r=J1(e),i=t.retrieve(n,r);if(rs(i)){if(r.optional)return null;throw i}return i}}function te(n,e=0){return(kb()||Z1)(mt(n),e)}function A(n,e){return te(n,Ji(e))}function Ji(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function J1(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Tm(n){let e=[];for(let t=0;t<n.length;t++){let r=mt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new $(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=X1(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(te(i,o))}else e.push(te(r))}return e}function Fb(n,e){return n[Im]=e,n.prototype[Im]=e,n}function X1(n){return n[Im]}function Xi(n,e){let t=n.hasOwnProperty(_c);return t?n[_c]:null}function Od(n,e){n.forEach(t=>Array.isArray(t)?Od(t,e):e(t))}function Bm(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function wc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Lb(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function kd(n,e,t){let r=Ds(n,e);return r>=0?n[r|1]=t:(r=~r,Lb(n,r,e,t)),r}function Fd(n,e){let t=Ds(n,e);if(t>=0)return n[t|1]}function Ds(n,e){return eF(n,e,1)}function eF(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var oi={},Ot=[],yn=new j(""),$m=new j("",-1),Hm=new j(""),Ec=class{get(e,t=Zi){if(t===Zi){let i=Ob("",-201);throw i.name="\u0275NotFound",i}return t}};function zm(n){return n[Vm]||null}function wr(n){return n[km]||null}function Ld(n){return n[Fm]||null}function qm(n){return n[Lm]||null}function yt(n){return{\u0275providers:n}}function Vb(n){return yt([{provide:yn,multi:!0,useValue:n}])}function jb(...n){return{\u0275providers:Vd(!0,n),\u0275fromNgModule:!0}}function Vd(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Od(e,s=>{let a=s;Rd(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Ub(i,o),t}function Ub(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Gm(i,o=>{e(o,r)})}}function Rd(n,e,t,r){if(n=mt(n),!n)return!1;let i=null,o=_m(n),s=!o&&wr(n);if(!o&&!s){let u=n.ngModule;if(o=_m(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Rd(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Od(o.imports,h=>{Rd(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&Ub(l,e)}if(!a){let l=Xi(i)||(()=>new i);e({provide:i,useFactory:l,deps:Ot},i),e({provide:Hm,useValue:i,multi:!0},i),e({provide:yn,useValue:()=>te(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;Gm(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Gm(n,e){for(let t of n)Om(t)&&(t=t.\u0275providers),Array.isArray(t)?Gm(t,e):e(t)}var tF=we({provide:String,useValue:we});function Bb(n){return n!==null&&typeof n=="object"&&tF in n}function nF(n){return!!(n&&n.useExisting)}function rF(n){return!!(n&&n.useFactory)}function eo(n){return typeof n=="function"}function $b(n){return!!n.useClass}var Tc=new j(""),Sd={},Nb={},vm;function Dc(){return vm===void 0&&(vm=new Ec),vm}var He=class{},to=class extends He{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,bm(e,s=>this.processProvider(s)),this.records.set($m,Ts(void 0,this)),i.has("environment")&&this.records.set(He,Ts(void 0,this));let o=this.records.get(Tc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Hm,Ot,{self:!0}))}retrieve(e,t){let r=Ji(t)||0;try{return this.get(e,Zi,r)}catch(i){if(rs(i))return i;throw i}}destroy(){vc(this),this._destroyed=!0;let e=ce(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ce(e)}}onDestroy(e){return vc(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){vc(this);let t=Bn(this),r=en(void 0),i;try{return e()}finally{Bn(t),en(r)}}get(e,t=Zi,r){if(vc(this),e.hasOwnProperty(Rb))return e[Rb](this);let i=Ji(r),o,s=Bn(this),a=en(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=cF(e)&&Ic(e);h&&this.injectableDefInScope(h)?l=Ts(Dm(e),Sd):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?Dc():this.parent;return t=i&8&&t===Zi?null:t,u.get(e,t)}catch(u){let l=Q1(u);throw l===-200||l===-201?new $(l,null):u}finally{en(a),Bn(s)}}resolveInjectorInitializers(){let e=ce(null),t=Bn(this),r=en(void 0),i;try{let o=this.get(yn,Ot,{self:!0});for(let s of o)s()}finally{Bn(t),en(r),ce(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(_r(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=mt(e);let t=eo(e)?e:mt(e&&e.provide),r=oF(e);if(!eo(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Ts(void 0,Sd,!0),i.factory=()=>Tm(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=ce(null);try{if(t.value===Nb)throw jm(_r(e));return t.value===Sd&&(t.value=Nb,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&aF(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ce(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=mt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Dm(n){let e=Ic(n),t=e!==null?e.factory:Xi(n);if(t!==null)return t;if(n instanceof j)throw new $(204,!1);if(n instanceof Function)return iF(n);throw new $(204,!1)}function iF(n){if(n.length>0)throw new $(204,!1);let t=G1(n);return t!==null?()=>t.factory(n):()=>new n}function oF(n){if(Bb(n))return Ts(void 0,n.useValue);{let e=Wm(n);return Ts(e,Sd)}}function Wm(n,e,t){let r;if(eo(n)){let i=mt(n);return Xi(i)||Dm(i)}else if(Bb(n))r=()=>mt(n.useValue);else if(rF(n))r=()=>n.useFactory(...Tm(n.deps||[]));else if(nF(n))r=(i,o)=>te(mt(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=mt(n&&(n.useClass||n.provide));if(sF(n))r=()=>new i(...Tm(n.deps));else return Xi(i)||Dm(i)}return r}function vc(n){if(n.destroyed)throw new $(205,!1)}function Ts(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function sF(n){return!!n.deps}function aF(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function cF(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function bm(n,e){for(let t of n)Array.isArray(t)?bm(t,e):t&&Om(t)?bm(t.\u0275providers,e):e(t)}function qe(n,e){let t;n instanceof to?(vc(n),t=n):t=new wm(n);let r,i=Bn(t),o=en(void 0);try{return e()}finally{Bn(i),en(o)}}function Hb(){return kb()!==void 0||$l()!=null}var kt=0,W=1,ne=2,ze=3,vn=4,_n=5,nn=6,bs=7,Ct=8,En=9,Tr=10,Te=11,Cs=12,Km=13,ro=14,zt=15,io=16,oo=17,so=18,bc=19,Qm=20,vr=21,jd=22,Cc=23,rn=24,ao=25,Sc=26,Le=27,zb=1,Nn=6,Hn=7,Ac=8,Rc=9,Ft=10;function on(n){return Array.isArray(n)&&typeof n[zb]=="object"}function sn(n){return Array.isArray(n)&&n[zb]===!0}function Ym(n){return(n.flags&4)!==0}function Dr(n){return n.componentOffset>-1}function Nc(n){return(n.flags&1)===1}function zn(n){return!!n.template}function co(n){return(n[ne]&512)!==0}function si(n){return(n[ne]&256)===256}var qb="svg",Gb="math";function an(n){for(;Array.isArray(n);)n=n[kt];return n}function Zm(n,e){return an(e[n])}function In(n,e){return an(e[n.index])}function Ss(n,e){return n.data[e]}function wn(n,e){let t=e[n];return on(t)?t:t[kt]}function Ud(n){return(n[ne]&128)===128}function Wb(n){return sn(n[ze])}function Mc(n,e){return e==null?null:n[e]}function Jm(n){n[oo]=0}function Xm(n){n[ne]&1024||(n[ne]|=1024,Ud(n)&&As(n))}function Kb(n,e){for(;n>0;)e=e[ro],n--;return e}function Pc(n){return!!(n[ne]&9216||n[rn]?.dirty)}function Bd(n){n[Tr].changeDetectionScheduler?.notify(8),n[ne]&64&&(n[ne]|=1024),Pc(n)&&As(n)}function As(n){n[Tr].changeDetectionScheduler?.notify(0);let e=ii(n);for(;e!==null&&!(e[ne]&8192||(e[ne]|=8192,!Ud(e)));)e=ii(e)}function ey(n,e){if(si(n))throw new $(911,!1);n[vr]===null&&(n[vr]=[]),n[vr].push(e)}function Qb(n,e){if(n[vr]===null)return;let t=n[vr].indexOf(e);t!==-1&&n[vr].splice(t,1)}function ii(n){let e=n[ze];return sn(e)?e[ze]:e}function Yb(n){return n[bs]??=[]}function Zb(n){return n.cleanup??=[]}var de={lFrame:hC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Cm=!1;function Jb(){return de.lFrame.elementDepthCount}function Xb(){de.lFrame.elementDepthCount++}function eC(){de.lFrame.elementDepthCount--}function ty(){return de.bindingsEnabled}function ny(){return de.skipHydrationRootTNode!==null}function tC(n){return de.skipHydrationRootTNode===n}function nC(n){de.skipHydrationRootTNode=n}function rC(){de.skipHydrationRootTNode=null}function Se(){return de.lFrame.lView}function qt(){return de.lFrame.tView}function St(n){return de.lFrame.contextLView=n,n[Ct]}function At(n){return de.lFrame.contextLView=null,n}function Lt(){let n=ry();for(;n!==null&&n.type===64;)n=n.parent;return n}function ry(){return de.lFrame.currentTNode}function iC(){let n=de.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Rs(n,e){let t=de.lFrame;t.currentTNode=n,t.isParent=e}function iy(){return de.lFrame.isParent}function oC(){de.lFrame.isParent=!1}function oy(){return Cm}function sy(n){let e=Cm;return Cm=n,e}function sC(n){return de.lFrame.bindingIndex=n}function xc(){return de.lFrame.bindingIndex++}function ay(n){let e=de.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function aC(){return de.lFrame.inI18n}function cC(n,e){let t=de.lFrame;t.bindingIndex=t.bindingRootIndex=n,$d(e)}function uC(){return de.lFrame.currentDirectiveIndex}function $d(n){de.lFrame.currentDirectiveIndex=n}function lC(n){let e=de.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function cy(n){de.lFrame.currentQueryIndex=n}function uF(n){let e=n[W];return e.type===2?e.declTNode:e.type===1?n[_n]:null}function uy(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=uF(o),i===null||(o=o[ro],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=de.lFrame=dC();return r.currentTNode=e,r.lView=n,!0}function Hd(n){let e=dC(),t=n[W];de.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function dC(){let n=de.lFrame,e=n===null?null:n.child;return e===null?hC(n):e}function hC(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function fC(){let n=de.lFrame;return de.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var ly=fC;function zd(){let n=fC();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function pC(n){return(de.lFrame.contextLView=Kb(n,de.lFrame.contextLView))[Ct]}function ai(){return de.lFrame.selectedIndex}function ci(n){de.lFrame.selectedIndex=n}function qd(){let n=de.lFrame;return Ss(n.tView,n.selectedIndex)}function dy(){return de.lFrame.currentNamespace}var gC=!0;function Gd(){return gC}function br(n){gC=n}function Sm(n,e=null,t=null,r){let i=hy(n,e,t,r);return i.resolveInjectorInitializers(),i}function hy(n,e=null,t=null,r,i=new Set){let o=[t||Ot,jb(n)];return r=r||(typeof n=="object"?void 0:_r(n)),new to(o,e||Dc(),r||null,i)}var Fe=class n{static THROW_IF_NOT_FOUND=Zi;static NULL=new Ec;static create(e,t){if(Array.isArray(e))return Sm({name:""},t,e,"");{let r=e.name??"";return Sm({name:r},e.parent,e.providers,r)}}static \u0275prov=H({token:n,providedIn:"any",factory:()=>te($m)});static __NG_ELEMENT_ID__=-1},tt=new j(""),Tn=(()=>{class n{static __NG_ELEMENT_ID__=lF;static __NG_ENV_ID__=t=>t}return n})(),Am=class extends Tn{_lView;constructor(e){super(),this._lView=e}get destroyed(){return si(this._lView)}onDestroy(e){let t=this._lView;return ey(t,e),()=>Qb(t,e)}};function lF(){return new Am(Se())}var Rn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Gt=new j("",{providedIn:"root",factory:()=>{let n=A(He),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(Rn),e.handleError(t))}}}),mC={provide:yn,useValue:()=>void A(Rn),multi:!0},dF=new j("",{providedIn:"root",factory:()=>{let n=A(tt).defaultView;if(!n)return;let e=A(Gt),t=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),A(Tn).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function fy(){return yt([Vb(()=>void A(dF))])}function py(n){return typeof n=="function"&&n[bt]!==void 0}function Wt(n,e){let[t,r,i]=tm(n,e?.equal),o=t,s=o[bt];return o.set=r,o.update=i,o.asReadonly=yC.bind(o),o}function yC(){let n=this[bt];if(n.readonlyFn===void 0){let e=()=>this();e[bt]=n,n.readonlyFn=e}return n.readonlyFn}function gy(n){return py(n)&&typeof n.set=="function"}var Wd=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=hF}return n})();function hF(){return new Wd(Se(),Lt())}var $n=class{},Ns=new j("",{providedIn:"root",factory:()=>!1});var my=new j(""),Kd=new j(""),Mn=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new gt(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new X(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),ui=(()=>{class n{internalPendingTasks=A(Mn);scheduler=A($n);errorHandler=A(Gt);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})();function Oc(...n){}var yy=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:()=>new Rm})}return n})(),Rm=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};var Qd={JSACTION:"jsaction"};function js(n){return{toString:n}.toString()}var Yd="__parameters__";function IF(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function wF(n,e,t){return js(()=>{let r=IF(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(Yd)?u[Yd]:Object.defineProperty(u,Yd,{value:[]})[Yd];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Kt=Fb(wF("Optional"),8);function TF(n){return typeof n=="function"}var rh=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function n0(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var mo=(()=>{let n=()=>r0;return n.ngInherit=!0,n})();function r0(n){return n.type.prototype.ngOnChanges&&(n.setInput=bF),DF}function DF(){let n=o0(this),e=n?.current;if(e){let t=n.previous;if(t===oi)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function bF(n,e,t,r,i){let o=this.declaredInputs[r],s=o0(n)||CF(n,{previous:oi,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new rh(l&&l.currentValue,t,u===oi),n0(n,e,i,t)}var i0="__ngSimpleChanges__";function o0(n){return n[i0]||null}function CF(n,e){return n[i0]=e}var vC=[];var Ee=function(n,e=null,t){for(let r=0;r<vC.length;r++){let i=vC[r];i(n,e,t)}};function SF(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=r0(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function s0(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Jd(n,e,t){a0(n,e,3,t)}function Xd(n,e,t,r){(n[ne]&3)===t&&a0(n,e,t,r)}function vy(n,e){let t=n[ne];(t&3)===e&&(t&=16383,t+=1,n[ne]=t)}function a0(n,e,t,r){let i=r!==void 0?n[oo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[oo]+=65536),(a<o||o==-1)&&(AF(n,t,e,u),n[oo]=(n[oo]&4294901760)+u+2),u++}function _C(n,e){Ee(4,n,e);let t=ce(null);try{e.call(n)}finally{ce(t),Ee(5,n,e)}}function AF(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ne]>>14<n[oo]>>16&&(n[ne]&3)===e&&(n[ne]+=16384,_C(a,o)):_C(a,o)}var Ps=-1,ho=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function RF(n){return(n.flags&8)!==0}function NF(n){return(n.flags&16)!==0}function MF(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];xF(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function PF(n){return n===3||n===4||n===6}function xF(n){return n.charCodeAt(0)===64}function Lc(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?EC(n,t,i,null,e[++r]):EC(n,t,i,null,null))}}return n}function EC(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function c0(n){return n!==Ps}function ih(n){return n&32767}function OF(n){return n>>16}function oh(n,e){let t=OF(n),r=e;for(;t>0;)r=r[ro],t--;return r}var My=!0;function IC(n){let e=My;return My=n,e}var kF=256,u0=kF-1,l0=5,FF=0,qn={};function LF(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(no)&&(r=t[no]),r==null&&(r=t[no]=FF++);let i=r&u0,o=1<<i;e.data[n+(i>>l0)]|=o}function sh(n,e){let t=d0(n,e);if(t!==-1)return t;let r=e[W];r.firstCreatePass&&(n.injectorIndex=e.length,_y(r.data,n),_y(e,null),_y(r.blueprint,null));let i=tv(n,e),o=n.injectorIndex;if(c0(i)){let s=ih(i),a=oh(i,e),u=a[W].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function _y(n,e){n.push(0,0,0,0,0,0,0,0,e)}function d0(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function tv(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=m0(i),r===null)return Ps;if(t++,i=i[ro],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Ps}function Py(n,e,t){LF(n,e,t)}function h0(n,e,t){if(t&8||n!==void 0)return n;xd(e,"NodeInjector")}function f0(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[En],o=en(void 0);try{return i?i.get(e,r,t&8):Um(e,r,t&8)}finally{en(o)}}return h0(r,e,t)}function p0(n,e,t,r=0,i){if(n!==null){if(e[ne]&2048&&!(r&2)){let s=$F(n,e,t,r,qn);if(s!==qn)return s}let o=g0(n,e,t,r,qn);if(o!==qn)return o}return f0(e,t,r,i)}function g0(n,e,t,r,i){let o=UF(t);if(typeof o=="function"){if(!uy(e,n,r))return r&1?h0(i,t,r):f0(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))xd(t);else return s}finally{ly()}}else if(typeof o=="number"){let s=null,a=d0(n,e),u=Ps,l=r&1?e[zt][_n]:null;for((a===-1||r&4)&&(u=a===-1?tv(n,e):e[a+8],u===Ps||!TC(r,!1)?a=-1:(s=e[W],a=ih(u),e=oh(u,e)));a!==-1;){let h=e[W];if(wC(o,a,h.data)){let p=VF(a,e,t,s,r,l);if(p!==qn)return p}u=e[a+8],u!==Ps&&TC(r,e[W].data[a+8]===l)&&wC(o,a,e)?(s=h,a=ih(u),e=oh(u,e)):a=-1}}return i}function VF(n,e,t,r,i,o){let s=e[W],a=s.data[n+8],u=r==null?Dr(a)&&My:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=jF(a,s,t,u,l);return h!==null?ah(e,s,h,a,i):qn}function jF(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let w=s[y];if(y<u&&t===w||y>=u&&w.type===t)return y}if(i){let y=s[u];if(y&&zn(y)&&y.type===t)return u}return null}function ah(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof ho){let a=o;if(a.resolving){let y=Pb(s[t]);throw jm(y)}let u=IC(a.canSeeViewProviders);a.resolving=!0;let l=s[t].type||s[t],h,p=a.injectImpl?en(a.injectImpl):null,m=uy(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&SF(t,s[t],e)}finally{p!==null&&en(p),IC(u),a.resolving=!1,ly()}}return o}function UF(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(no)?n[no]:void 0;return typeof e=="number"?e>=0?e&u0:BF:e}function wC(n,e,t){let r=1<<n;return!!(t[e+(n>>l0)]&r)}function TC(n,e){return!(n&2)&&!(n&1&&e)}var lo=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return p0(this._tNode,this._lView,e,Ji(r),t)}};function BF(){return new lo(Lt(),Se())}function On(n){return js(()=>{let e=n.prototype.constructor,t=e[_c]||xy(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[_c]||xy(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function xy(n){return Pm(n)?()=>{let e=xy(mt(n));return e&&e()}:Xi(n)}function $F(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ne]&2048&&!co(s);){let a=g0(o,s,t,r|2,qn);if(a!==qn)return a;let u=o.parent;if(!u){let l=s[Qm];if(l){let h=l.get(t,qn,r);if(h!==qn)return h}u=m0(s),s=s[ro]}o=u}return i}function m0(n){let e=n[W],t=e.type;return t===2?e.declTNode:t===1?n[_n]:null}function HF(){return Eh(Lt(),Se())}function Eh(n,e){return new di(In(n,e))}var di=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=HF}return n})();var y0="ngSkipHydration",zF="ngskiphydration";function v0(n){let e=n.mergedAttrs;if(e===null)return!1;for(let t=0;t<e.length;t+=2){let r=e[t];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===zF)return!0}return!1}function _0(n){return n.hasAttribute(y0)}function ch(n){return(n.flags&128)===128}function E0(n){if(ch(n))return!0;let e=n.parent;for(;e;){if(ch(n)||v0(e))return!0;e=e.parent}return!1}var nv=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(nv||{}),I0=new Map,qF=0;function GF(){return qF++}function WF(n){I0.set(n[bc],n)}function Oy(n){I0.delete(n[bc])}var DC="__ngContext__";function ks(n,e){on(e)?(n[DC]=e[bc],WF(e)):n[DC]=e}function w0(n){return D0(n[Cs])}function T0(n){return D0(n[vn])}function D0(n){for(;n!==null&&!sn(n);)n=n[vn];return n}var ky;function rv(n){ky=n}function Hc(){if(ky!==void 0)return ky;if(typeof document<"u")return document;throw new $(210,!1)}var Wn=new j("",{providedIn:"root",factory:()=>KF}),KF="ng",Ih=new j(""),yo=new j("",{providedIn:"platform",factory:()=>"unknown"});var wh=new j("",{providedIn:"root",factory:()=>Hc().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function QF(){let n=new vo;return n.store=YF(Hc(),A(Wn)),n}var vo=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:QF});store={};onSerializeCallbacks={};get(t,r){return this.store[t]!==void 0?this.store[t]:r}set(t,r){this.store[t]=r}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(t,r){this.onSerializeCallbacks[t]=r}toJson(){for(let t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return n})();function YF(n,e){let t=n.getElementById(e+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var b0="h",C0="b",ZF="f",JF="n",S0="e",A0="t",Th="c",iv="x",Vc="r",R0="i",N0="n",ov="d";var M0="di",P0="s",x0="p";var zc=new j(""),O0=!1,sv=new j("",{providedIn:"root",factory:()=>O0});var av=new j(""),k0=!1,F0=new j(""),cv=new j("",{providedIn:"root",factory:()=>new Map});var qc="ngb";var L0=(n,e,t)=>{let r=n,i=r.__jsaction_fns??new Map,o=i.get(e)??[];o.push(t),i.set(e,o),r.__jsaction_fns=i},V0=(n,e)=>{let t=n,r=t.getAttribute(qc)??"",i=e.get(r)??new Set;i.has(t)||i.add(t),e.set(r,i)};var j0=n=>{n.removeAttribute(Qd.JSACTION),n.removeAttribute(qc),n.__jsaction_fns=void 0},U0=new j("",{providedIn:"root",factory:()=>({})});function uv(n,e){let t=e?.__jsaction_fns?.get(n.type);if(!(!t||!e?.isConnected))for(let r of t)r(n)}var Fy=new Map;function B0(n,e){return Fy.set(n,e),()=>Fy.delete(n)}var bC=!1,$0=(n,e,t,r)=>{};function XF(n,e,t,r){$0(n,e,t,r)}function H0(){bC||($0=(n,e,t,r)=>{let i=n[En].get(Wn);Fy.get(i)?.(e,t,r)},bC=!0)}var Dh=new j("");function bh(n){return(n.flags&32)===32}var eL="__nghData__",lv=eL,tL="__nghDeferData__",z0=tL;var eh="ngh",q0="nghm",G0=()=>null;function nL(n,e,t=!1){let r=n.getAttribute(eh);if(r==null)return null;let[i,o]=r.split("|");if(r=t?o:i,!r)return null;let s=o?`|${o}`:"",a=t?i:s,u={};if(r!==""){let h=e.get(vo,null,{optional:!0});h!==null&&(u=h.get(lv,[])[Number(r)])}let l={data:u,firstChild:n.firstChild??null};return t&&(l.firstChild=n,Ch(l,0,n.nextSibling)),a?n.setAttribute(eh,a):n.removeAttribute(eh),l}function W0(){G0=nL}function K0(n,e,t=!1){return G0(n,e,t)}function Q0(n){let e=n._lView;return e[W].type===2?null:(co(e)&&(e=e[Le]),e)}function rL(n){return n.textContent?.replace(/\s/gm,"")}function iL(n){let e=Hc(),t=e.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=rL(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=t.nextNode();)i.push(r);for(let o of i)o.textContent==="ngetn"?o.replaceWith(e.createTextNode("")):o.remove()}function Ch(n,e,t){n.segmentHeads??={},n.segmentHeads[e]=t}function Ly(n,e){return n.segmentHeads?.[e]??null}function Y0(n){return n.get(F0,!1,{optional:!0})}function oL(n,e){let t=n.data,r=t[S0]?.[e]??null;return r===null&&t[Th]?.[e]&&(r=dv(n,e)),r}function Z0(n,e){return n.data[Th]?.[e]??null}function dv(n,e){let t=Z0(n,e)??[],r=0;for(let i of t)r+=i[Vc]*(i[iv]??1);return r}function sL(n){if(typeof n.disconnectedNodes>"u"){let e=n.data[ov];n.disconnectedNodes=e?new Set(e):null}return n.disconnectedNodes}function J0(n,e){if(typeof n.disconnectedNodes>"u"){let t=n.data[ov];n.disconnectedNodes=t?new Set(t):null}return!!sL(n)?.has(e)}function Sh(n,e){let t=n[nn];return t!==null&&!ny()&&!bh(e)&&!J0(t,e.index-Le)}function aL(n,e){let t=e.get(Dh),i=e.get(vo).get(z0,{}),o=!1,s=n,a=null,u=[];for(;!o&&s;){o=t.has(s);let l=t.hydrating.get(s);if(a===null&&l!=null){a=l.promise;break}u.unshift(s),s=i[s][x0]}return{parentBlockPromise:a,hydrationQueue:u}}function Ey(n){return!!n&&n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===q0}function CC(n){for(;n&&n.nodeType===Node.TEXT_NODE;)n=n.previousSibling;return n}function X0(n){for(let r of n.body.childNodes)if(Ey(r))return;let e=CC(n.body.previousSibling);if(Ey(e))return;let t=CC(n.head.lastChild);if(!Ey(t))throw new $(-507,!1)}function eS(n,e){let t=n.contentQueries;if(t!==null){let r=ce(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];cy(o),a.contentQueries(2,e[s],s)}}}finally{ce(r)}}}function Vy(n,e,t){cy(0);let r=ce(null);try{e(n,t)}finally{ce(r)}}function tS(n,e,t){if(Ym(e)){let r=ce(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{ce(r)}}}var Cr=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(Cr||{});var jy=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Mm})`}};function Ah(n){return n instanceof jy?n.changingThisBreaksApplicationSecurity:n}var cL=/^>|^->|<!--|-->|--!>|<!-$/g,uL=/(<|>)/g,lL="\u200B$1\u200B";function dL(n){return n.replace(cL,e=>e.replace(uL,lL))}function nS(n,e){return n.createText(e)}function hL(n,e,t){n.setValue(e,t)}function rS(n,e){return n.createComment(dL(e))}function hv(n,e,t){return n.createElement(e,t)}function uh(n,e,t,r,i){n.insertBefore(e,t,r,i)}function iS(n,e,t){n.appendChild(e,t)}function SC(n,e,t,r,i){r!==null?uh(n,e,t,r,i):iS(n,e,t)}function fv(n,e,t,r){n.removeChild(null,e,t,r)}function oS(n){n.textContent=""}function fL(n,e,t){n.setAttribute(e,"style",t)}function pL(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function sS(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&MF(n,e,r),i!==null&&pL(n,e,i),o!==null&&fL(n,e,o)}function aS(n){return n.ownerDocument.body}function cS(n){return n instanceof Function?n():n}function gL(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var uS="ng-template";function mL(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&gL(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(pv(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function pv(n){return n.type===4&&n.value!==uS}function yL(n,e,t){let r=n.type===4&&!t?uS:n.value;return e===r}function vL(n,e,t){let r=4,i=n.attrs,o=i!==null?IL(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!Pn(r)&&!Pn(u))return!1;if(s&&Pn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!yL(n,u,t)||u===""&&e.length===1){if(Pn(r))return!1;s=!0}}else if(r&8){if(i===null||!mL(n,i,u,t)){if(Pn(r))return!1;s=!0}}else{let l=e[++a],h=_L(u,i,pv(n),t);if(h===-1){if(Pn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Pn(r))return!1;s=!0}}}}return Pn(r)||s}function Pn(n){return(n&1)===0}function _L(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return wL(e,n)}function EL(n,e,t=!1){for(let r=0;r<e.length;r++)if(vL(n,e[r],t))return!0;return!1}function IL(n){for(let e=0;e<n.length;e++){let t=n[e];if(PF(t))return e}return n.length}function wL(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function AC(n,e){return n?":not("+e.trim()+")":e}function TL(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Pn(s)&&(e+=AC(o,i),i=""),r=s,o=o||!Pn(r);t++}return i!==""&&(e+=AC(o,i)),e}function DL(n){return n.map(TL).join(",")}function bL(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Pn(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Kn={};function gv(n,e,t,r,i,o,s,a,u,l,h){let p=Le+r,m=p+i,y=CL(p,m),w=typeof l=="function"?l():l;return y[W]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:w,incompleteFirstPass:!1,ssrId:h}}function CL(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Kn);return t}function SL(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=gv(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function mv(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[kt]=i,p[ne]=r|4|128|8|64|1024,(l!==null||n&&n[ne]&2048)&&(p[ne]|=2048),Jm(p),p[ze]=p[ro]=n,p[Ct]=t,p[Tr]=s||n&&n[Tr],p[Te]=a||n&&n[Te],p[En]=u||n&&n[En]||null,p[_n]=o,p[bc]=GF(),p[nn]=h,p[Qm]=l,p[zt]=e.type==2?n[zt]:p,p}function AL(n,e,t){let r=In(e,n),i=SL(t),o=n[Tr].rendererFactory,s=yv(n,mv(n,i,null,lS(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function lS(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function dS(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function yv(n,e){return n[Cs]?n[Km][vn]=e:n[Cs]=e,n[Km]=e,e}function z(n=1){hS(qt(),Se(),ai()+n,!1)}function hS(n,e,t,r){if(!r)if((e[ne]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Jd(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Xd(e,o,0,t)}ci(t)}var Rh=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Rh||{});function Uy(n,e,t,r){let i=ce(null);try{let[o,s,a]=n.inputs[t],u=null;(s&Rh.SignalBased)!==0&&(u=e[o][bt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,o):n0(e,u,o,r)}finally{ce(i)}}var Gn=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Gn||{}),RL;function vv(n,e){return RL(n,e)}var Fs=new Set,Nh=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Nh||{}),_o=new j(""),RC=new Set;function Sr(n){RC.has(n)||(RC.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var fS=!1,By=class extends Xe{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Hb()&&(this.destroyRef=A(Tn,{optional:!0})??void 0,this.pendingTasks=A(Mn,{optional:!0})??void 0)}emit(e){let t=ce(null);try{super.next(e)}finally{ce(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof ke&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Ge=By;function pS(n){let e,t;function r(){n=Oc;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function NC(n){return queueMicrotask(()=>n()),()=>{n=Oc}}var _v="isAngularZone",lh=_v+"_ID",NL=0,ve=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Ge(!1);onMicrotaskEmpty=new Ge(!1);onStable=new Ge(!1);onError=new Ge(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=fS}=e;if(typeof Zone>"u")throw new $(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,xL(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(_v)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new $(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new $(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,ML,Oc,Oc);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},ML={};function Ev(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function PL(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){pS(()=>{n.callbackScheduled=!1,$y(n),n.isCheckStableRunning=!0,Ev(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),$y(n)}function xL(n){let e=()=>{PL(n)},t=NL++;n._inner=n._inner.fork({name:"angular",properties:{[_v]:!0,[lh]:t,[lh+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(OL(u))return r.invokeTask(o,s,a,u);try{return MC(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),PC(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return MC(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!kL(u)&&e(),PC(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,$y(n),Ev(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function $y(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function MC(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function PC(n){n._nesting--,Ev(n)}var jc=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Ge;onMicrotaskEmpty=new Ge;onStable=new Ge;onError=new Ge;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function OL(n){return gS(n,"__ignore_ng_zone__")}function kL(n){return gS(n,"__scheduler_tick__")}function gS(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Iv=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),mS=[0,1,2,3],yS=(()=>{class n{ngZone=A(ve);scheduler=A($n);errorHandler=A(Rn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){A(_o,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Ee(16),this.executing=!0;for(let r of mS)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Ee(17)}register(t){let{view:r}=t;r!==void 0?((r[ao]??=[]).push(t),As(r),r[ne]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Nh.AFTER_NEXT_RENDER,t):t()}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),dh=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[ao];e&&(this.view[ao]=e.filter(t=>t!==this))}};function Gc(n,e){let t=e?.injector??A(Fe);return Sr("NgAfterNextRender"),LL(n,t,e,!0)}function FL(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function LL(n,e,t,r){let i=e.get(Iv);i.impl??=e.get(yS);let o=e.get(_o,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(Tn):null,a=e.get(Wd,null,{optional:!0}),u=new dh(i.impl,FL(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(u),u}var VL=new j("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function vS(n,e,t){let r=n.get(VL);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function jL(n,e){for(let[t,r]of e)vS(n,r.animateFns)}function xC(n,e,t,r){let i=n?.[Sc]?.enter;e!==null&&i&&i.has(t.index)&&jL(r,i)}function Ms(n,e,t,r,i,o,s,a){if(i!=null){let u,l=!1;sn(i)?u=i:on(i)&&(l=!0,i=i[kt]);let h=an(i);n===0&&r!==null?(xC(a,r,o,t),s==null?iS(e,r,h):uh(e,r,h,s||null,!0)):n===1&&r!==null?(xC(a,r,o,t),uh(e,r,h,s||null,!0)):n===2?OC(a,o,t,p=>{fv(e,h,l,p)}):n===3&&OC(a,o,t,()=>{e.destroyNode(h)}),u!=null&&JL(e,n,t,u,o,r,s)}}function UL(n,e){_S(n,e),e[kt]=null,e[_n]=null}function BL(n,e,t,r,i,o){r[kt]=i,r[_n]=e,Mh(n,r,t,1,i,o)}function _S(n,e){e[Tr].changeDetectionScheduler?.notify(9),Mh(n,e,e[Te],2,null,null)}function $L(n){let e=n[Cs];if(!e)return Iy(n[W],n);for(;e;){let t=null;if(on(e))t=e[Cs];else{let r=e[Ft];r&&(t=r)}if(!t){for(;e&&!e[vn]&&e!==n;)on(e)&&Iy(e[W],e),e=e[ze];e===null&&(e=n),on(e)&&Iy(e[W],e),t=e&&e[vn]}e=t}}function wv(n,e){let t=n[Rc],r=t.indexOf(e);t.splice(r,1)}function Tv(n,e){if(si(e))return;let t=e[Te];t.destroyNode&&Mh(n,e,t,3,null,null),$L(e)}function Iy(n,e){if(si(e))return;let t=ce(null);try{e[ne]&=-129,e[ne]|=256,e[rn]&&fc(e[rn]),qL(n,e),zL(n,e),e[W].type===1&&e[Te].destroy();let r=e[io];if(r!==null&&sn(e[ze])){r!==e[ze]&&wv(r,e);let i=e[so];i!==null&&i.detachView(n)}Oy(e)}finally{ce(t)}}function OC(n,e,t,r){let i=n?.[Sc];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&Fs.add(n),vS(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let u=0;u<s.animateFns.length;u++){let l=s.animateFns[u],{promise:h}=l();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),HL(n,r)}else n&&Fs.delete(n),r(!1)},i)}function HL(n,e){let t=n[Sc]?.running;if(t){t.then(()=>{n[Sc].running=void 0,Fs.delete(n),e(!0)});return}e(!1)}function zL(n,e){let t=n.cleanup,r=e[bs];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[bs]=null);let i=e[vr];if(i!==null){e[vr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Cc];if(o!==null){e[Cc]=null;for(let s of o)s.destroy()}}function qL(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof ho)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Ee(4,a,u);try{u.call(a)}finally{Ee(5,a,u)}}else{Ee(4,i,o);try{o.call(i)}finally{Ee(5,i,o)}}}}}function GL(n,e,t){return WL(n,e.parent,t)}function WL(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[kt];if(Dr(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Cr.None||i===Cr.Emulated)return null}return In(r,t)}function KL(n,e,t){return YL(n,e,t)}function QL(n,e,t){return n.type&40?In(n,t):null}var YL=QL,kC;function Dv(n,e,t,r){let i=GL(n,r,e),o=e[Te],s=r.parent||e[_n],a=KL(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)SC(o,i,t[u],a,!1);else SC(o,i,t,a,!1);kC!==void 0&&kC(o,r,e,t,i)}function kc(n,e){if(e!==null){let t=e.type;if(t&3)return In(e,n);if(t&4)return Hy(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return kc(n,r);{let i=n[e.index];return sn(i)?Hy(-1,i):an(i)}}else{if(t&128)return kc(n,e.next);if(t&32)return vv(e,n)()||an(n[e.index]);{let r=ES(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ii(n[zt]);return kc(i,r)}else return kc(n,e.next)}}}return null}function ES(n,e){if(e!==null){let r=n[zt][_n],i=e.projection;return r.projection[i]}return null}function Hy(n,e){let t=Ft+n+1;if(t<e.length){let r=e[t],i=r[W].firstChild;if(i!==null)return kc(r,i)}return e[Hn]}function bv(n,e,t,r,i,o,s){for(;t!=null;){let a=r[En];if(t.type===128){t=t.next;continue}let u=r[t.index],l=t.type;if(s&&e===0&&(u&&ks(an(u),r),t.flags|=2),!bh(t))if(l&8)bv(n,e,t.child,r,i,o,!1),Ms(e,n,a,i,u,t,o,r);else if(l&32){let h=vv(t,r),p;for(;p=h();)Ms(e,n,a,i,p,t,o,r);Ms(e,n,a,i,u,t,o,r)}else l&16?ZL(n,e,r,t,i,o):Ms(e,n,a,i,u,t,o,r);t=s?t.projectionNext:t.next}}function Mh(n,e,t,r,i,o){bv(t,r,n.firstChild,e,i,o,!1)}function ZL(n,e,t,r,i,o){let s=t[zt],u=s[_n].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Ms(e,n,t[En],i,h,r,o,t)}else{let l=u,h=s[ze];ch(r)&&(l.flags|=128),bv(n,e,l,h,i,o,!0)}}function JL(n,e,t,r,i,o,s){let a=r[Hn],u=an(r);a!==u&&Ms(e,n,t,o,a,i,s);for(let l=Ft;l<r.length;l++){let h=r[l];Mh(h[W],h,n,e,o,a)}}function XL(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Gn.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Gn.Important),n.setStyle(t,r,i,o))}}function IS(n,e,t,r,i){let o=ai(),s=r&2;try{ci(-1),s&&e.length>Le&&hS(n,e,Le,!1),Ee(s?2:0,i,t),t(r,i)}finally{ci(o),Ee(s?3:1,i,t)}}function Cv(n,e,t){sV(n,e,t),(t.flags&64)===64&&aV(n,e,t)}function wS(n,e,t=In){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function eV(n,e,t,r){let o=r.get(sv,O0)||t===Cr.ShadowDom,s=n.selectRootElement(e,o);return tV(s),s}function tV(n){TS(n)}var TS=()=>null;function nV(n){_0(n)?oS(n):iL(n)}function DS(){TS=nV}function rV(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function bS(n,e,t,r,i,o){let s=e[W];if(Av(n,s,e,t,r)){Dr(n)&&oV(e,n.index);return}n.type&3&&(t=rV(t)),iV(n,e,t,r,i,o)}function iV(n,e,t,r,i,o){if(n.type&3){let s=In(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function oV(n,e){let t=wn(e,n);t[ne]&16||(t[ne]|=64)}function sV(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Dr(t)&&AL(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||sh(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],u=ah(e,n,s,t);if(ks(u,e),o!==null&&dV(e,s-r,u,a,t,o),zn(a)){let l=wn(t.index,e);l[Ct]=ah(e,n,s,t)}}}function aV(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=uC();try{ci(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];$d(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&cV(u,l)}}finally{ci(-1),$d(s)}}function cV(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function CS(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];EL(e,o.selectors,!1)&&(r??=[],zn(o)?r.unshift(o):r.push(o))}return r}function uV(n,e,t,r,i,o){let s=In(n,e);lV(e[Te],s,o,n.value,t,r,i)}function lV(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Pd(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function dV(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];Uy(r,t,u,l)}}function hV(n,e,t,r,i){let o=Le+t,s=e[W],a=i(s,e,n,r,t);e[o]=a,Rs(n,!0);let u=n.type===2;return u?(sS(e[Te],a,n),(Jb()===0||Nc(n))&&ks(a,e),Xb()):ks(a,e),Gd()&&(!u||!bh(n))&&Dv(s,e,a,n),n}function fV(n){let e=n;return iy()?oC():(e=e.parent,Rs(e,!1)),e}function Sv(n,e){let t=n[En];if(!t)return;let r;try{r=t.get(Gt,null)}catch{r=null}r?.(e)}function Av(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];Uy(p,t[l],h,i),a=!0}if(o)for(let u of o){let l=t[u],h=e.data[u];Uy(h,l,r,i),a=!0}return a}function pV(n,e){let t=wn(e,n),r=t[W];gV(r,t);let i=t[kt];i!==null&&t[nn]===null&&(t[nn]=K0(i,t[En])),Ee(18),Rv(r,t,t[Ct]),Ee(19,t[Ct])}function gV(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Rv(n,e,t){Hd(e);try{let r=n.viewQuery;r!==null&&Vy(1,r,t);let i=n.template;i!==null&&IS(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[so]?.finishViewCreation(n),n.staticContentQueries&&eS(n,e),n.staticViewQueries&&Vy(2,n.viewQuery,t);let o=n.components;o!==null&&mV(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ne]&=-5,zd()}}function mV(n,e){for(let t=0;t<e.length;t++)pV(n,e[t])}function SS(n,e,t,r){let i=ce(null);try{let o=e.tView,a=n[ne]&4096?4096:16,u=mv(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[io]=l;let h=n[so];return h!==null&&(u[so]=h.createEmbeddedView(o)),Rv(o,u,t),u}finally{ce(i)}}function zy(n,e){return!e||e.firstChild===null||ch(n)}function Uc(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(an(o)),sn(o)&&AS(o,r);let s=t.type;if(s&8)Uc(n,e,t.child,r);else if(s&32){let a=vv(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=ES(e,t);if(Array.isArray(a))r.push(...a);else{let u=ii(e[zt]);Uc(u[W],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function AS(n,e){for(let t=Ft;t<n.length;t++){let r=n[t],i=r[W].firstChild;i!==null&&Uc(r[W],r,i,e)}n[Hn]!==n[kt]&&e.push(n[Hn])}function RS(n){if(n[ao]!==null){for(let e of n[ao])e.impl.addSequence(e);n[ao].length=0}}var NS=[];function yV(n){return n[rn]??vV(n)}function vV(n){let e=NS.pop()??Object.create(EV);return e.lView=n,e}function _V(n){n.lView[rn]!==n&&(n.lView=null,NS.push(n))}var EV=ae(k({},is),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{As(n.lView)},consumerOnSignalRead(){this.lView[rn]=this}});function IV(n){let e=n[rn]??Object.create(wV);return e.lView=n,e}var wV=ae(k({},is),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=ii(n.lView);for(;e&&!MS(e[W]);)e=ii(e);e&&Xm(e)},consumerOnSignalRead(){this.lView[rn]=this}});function MS(n){return n.type!==2}function PS(n){if(n[Cc]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Cc])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[ne]&8192)}}var TV=100;function xS(n,e=0){let r=n[Tr].rendererFactory,i=!1;i||r.begin?.();try{DV(n,e)}finally{i||r.end?.()}}function DV(n,e){let t=oy();try{sy(!0),qy(n,e);let r=0;for(;Pc(n);){if(r===TV)throw new $(103,!1);r++,qy(n,1)}}finally{sy(t)}}function bV(n,e,t,r){if(si(e))return;let i=e[ne],o=!1,s=!1;Hd(e);let a=!0,u=null,l=null;o||(MS(n)?(l=yV(e),u=ss(l)):Wl()===null?(a=!1,l=IV(e),u=ss(l)):e[rn]&&(fc(e[rn]),e[rn]=null));try{Jm(e),sC(n.bindingStartIndex),t!==null&&IS(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&Jd(e,y,null)}else{let y=n.preOrderHooks;y!==null&&Xd(e,y,0,null),vy(e,0)}if(s||CV(e),PS(e),OS(e,0),n.contentQueries!==null&&eS(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&Jd(e,y)}else{let y=n.contentHooks;y!==null&&Xd(e,y,1),vy(e,1)}AV(n,e);let p=n.components;p!==null&&FS(e,p,0);let m=n.viewQuery;if(m!==null&&Vy(2,m,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&Jd(e,y)}else{let y=n.viewHooks;y!==null&&Xd(e,y,2),vy(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[jd]){for(let y of e[jd])y();e[jd]=null}o||(RS(e),e[ne]&=-73)}catch(h){throw o||As(e),h}finally{l!==null&&(dc(l,u),a&&_V(l)),zd()}}function OS(n,e){for(let t=w0(n);t!==null;t=T0(t))for(let r=Ft;r<t.length;r++){let i=t[r];kS(i,e)}}function CV(n){for(let e=w0(n);e!==null;e=T0(e)){if(!(e[ne]&2))continue;let t=e[Rc];for(let r=0;r<t.length;r++){let i=t[r];Xm(i)}}}function SV(n,e,t){Ee(18);let r=wn(e,n);kS(r,t),Ee(19,r[Ct])}function kS(n,e){Ud(n)&&qy(n,e)}function qy(n,e){let r=n[W],i=n[ne],o=n[rn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&hc(o)),s||=!1,o&&(o.dirty=!1),n[ne]&=-9217,s)bV(r,n,r.template,n[Ct]);else if(i&8192){let a=ce(null);try{PS(n),OS(n,1);let u=r.components;u!==null&&FS(n,u,1),RS(n)}finally{ce(a)}}}function FS(n,e,t){for(let r=0;r<e.length;r++)SV(n,e[r],t)}function AV(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)ci(~i);else{let o=i,s=t[++r],a=t[++r];cC(s,o);let u=e[o];Ee(24,u),a(2,u),Ee(25,u)}}}finally{ci(-1)}}function Ph(n,e){let t=oy()?64:1088;for(n[Tr].changeDetectionScheduler?.notify(e);n;){n[ne]|=t;let r=ii(n);if(co(n)&&!r)return n;n=r}return null}function LS(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function VS(n,e,t,r=!0){let i=e[W];if(NV(i,e,n,t),r){let s=Hy(t,n),a=e[Te],u=a.parentNode(n[Hn]);u!==null&&BL(i,n[_n],a,e,u,s)}let o=e[nn];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function RV(n,e){let t=hh(n,e);return t!==void 0&&Tv(t[W],t),t}function hh(n,e){if(n.length<=Ft)return;let t=Ft+e,r=n[t];if(r){let i=r[io];i!==null&&i!==n&&wv(i,r),e>0&&(n[t-1][vn]=r[vn]);let o=wc(n,Ft+e);UL(r[W],r);let s=o[so];s!==null&&s.detachView(o[W]),r[ze]=null,r[vn]=null,r[ne]&=-129}return r}function NV(n,e,t,r){let i=Ft+r,o=t.length;r>0&&(t[i-1][vn]=e),r<o-Ft?(e[vn]=t[i],Bm(t,Ft+r,e)):(t.push(e),e[vn]=null),e[ze]=t;let s=e[io];s!==null&&t!==s&&jS(s,e);let a=e[so];a!==null&&a.insertView(n),Bd(e),e[ne]|=128}function jS(n,e){let t=n[Rc],r=e[ze];if(on(r))n[ne]|=2;else{let i=r[ze][zt];e[zt]!==i&&(n[ne]|=2)}t===null?n[Rc]=[e]:t.push(e)}var li=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[W];return Uc(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Ct]}set context(e){this._lView[Ct]=e}get destroyed(){return si(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ze];if(sn(e)){let t=e[Ac],r=t?t.indexOf(this):-1;r>-1&&(hh(e,r),wc(t,r))}this._attachedToViewContainer=!1}Tv(this._lView[W],this._lView)}onDestroy(e){ey(this._lView,e)}markForCheck(){Ph(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ne]&=-129}reattach(){Bd(this._lView),this._lView[ne]|=128}detectChanges(){this._lView[ne]|=1024,xS(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new $(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=co(this._lView),t=this._lView[io];t!==null&&!e&&wv(t,this._lView),_S(this._lView[W],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new $(902,!1);this._appRef=e;let t=co(this._lView),r=this._lView[io];r!==null&&!t&&jS(r,this._lView),Bd(this._lView)}};var Wc=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=MV;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=SS(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new li(o)}}return n})();function MV(){return PV(Lt(),Se())}function PV(n,e){return n.type&4?new Wc(e,n,Eh(n,e)):null}function Nv(n,e,t,r,i){let o=n.data[e];if(o===null)o=xV(n,e,t,r,i),aC()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=iC();o.injectorIndex=s===null?-1:s.injectorIndex}return Rs(o,!0),o}function xV(n,e,t,r,i){let o=ry(),s=iy(),a=s?o:o&&o.parent,u=n.data[e]=kV(n,a,t,e,r,i);return OV(n,u,o,s),u}function OV(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function kV(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return ny()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var FV=new RegExp(`^(\\d+)*(${C0}|${b0})*(.*)`);function LV(n){let e=n.match(FV),[t,r,i,o]=e,s=r?parseInt(r,10):i,a=[];for(let[u,l,h]of o.matchAll(/(f|n)(\d*)/g)){let p=parseInt(h,10)||1;a.push(l,p)}return[s,...a]}function VV(n){return!n.prev&&n.parent?.type===8}function wy(n){return n.index-Le}function jV(n,e){let t=n.i18nNodes;if(t)return t.get(e)}function xh(n,e,t,r){let i=wy(r),o=jV(n,i);if(o===void 0){let s=n.data[N0];if(s?.[i])o=BV(s[i],t);else if(e.firstChild===r)o=n.firstChild;else{let a=r.prev===null,u=r.prev??r.parent;if(VV(r)){let l=wy(r.parent);o=Ly(n,l)}else{let l=In(u,t);if(a)o=l.firstChild;else{let h=wy(u),p=Ly(n,h);if(u.type===2&&p){let y=dv(n,h)+1;o=Oh(y,p)}else o=l.nextSibling}}}}return o}function Oh(n,e){let t=e;for(let r=0;r<n;r++)t=t.nextSibling;return t}function UV(n,e){let t=n;for(let r=0;r<e.length;r+=2){let i=e[r],o=e[r+1];for(let s=0;s<o;s++)switch(i){case ZF:t=t.firstChild;break;case JF:t=t.nextSibling;break}}return t}function BV(n,e){let[t,...r]=LV(n),i;if(t===b0)i=e[zt][kt];else if(t===C0)i=aS(e[zt][kt]);else{let o=Number(t);i=an(e[o+Le])}return UV(i,r)}var $V=!1;function US(n){$V=n}function HV(n){let e=n[nn];if(e){let{i18nNodes:t,dehydratedIcuData:r}=e;if(t&&r){let i=n[Te];for(let o of r.values())zV(i,t,o)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function zV(n,e,t){for(let r of t.node.cases[t.case]){let i=e.get(r.index-Le);i&&fv(n,i,!1)}}function Mv(n){let e=n[Nn]??[],r=n[ze][Te],i=[];for(let o of e)o.data[M0]!==void 0?i.push(o):BS(o,r);n[Nn]=i}function qV(n){let{lContainer:e}=n,t=e[Nn];if(t===null)return;let i=e[ze][Te];for(let o of t)BS(o,i)}function BS(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[Vc];for(;t<i;){let o=r.nextSibling;fv(e,r,!1),r=o,t++}}}function kh(n){Mv(n);let e=n[kt];on(e)&&fh(e);for(let t=Ft;t<n.length;t++)fh(n[t])}function fh(n){HV(n);let e=n[W];for(let t=Le;t<e.bindingStartIndex;t++)if(sn(n[t])){let r=n[t];kh(r)}else on(n[t])&&fh(n[t])}function Pv(n){let e=n._views;for(let t of e){let r=Q0(t);r!==null&&r[kt]!==null&&(on(r)?fh(r):kh(r))}}function GV(n,e,t,r){n!==null&&(t.cleanup(e),kh(n.lContainer),Pv(r))}function WV(n,e){let t=[];for(let r of e)for(let i=0;i<(r[iv]??1);i++){let o={data:r,firstChild:null};r[Vc]>0&&(o.firstChild=n,n=Oh(r[Vc],n)),t.push(o)}return[n,t]}var $S=()=>null,KV=()=>null;function HS(){$S=QV,KV=YV}function QV(n,e){return zS(n,e)?n[Nn].shift():(Mv(n),null)}function Gy(n,e){return $S(n,e)}function YV(n,e,t){if(e.tView.ssrId===null)return null;let r=Gy(n,e.tView.ssrId);return t[W].firstUpdatePass&&r===null&&ZV(t,e),r}function ZV(n,e){let t=e;for(;t;){if(FC(n,t))return;if((t.flags&256)===256)break;t=t.prev}for(t=e.next;t&&(t.flags&512)===512;){if(FC(n,t))return;t=t.next}}function zS(n,e){let t=n[Nn];return!e||t===null||t.length===0?!1:t[0].data[R0]===e}function FC(n,e){let t=e.tView?.ssrId;if(t==null)return!1;let r=n[e.index];return sn(r)&&zS(r,t)?(Mv(r),!0):!1}var qS=class{},Fh=class{},Wy=class{resolveComponentFactory(e){throw new $(917,!1)}},Kc=class{static NULL=new Wy},fo=class{},Eo=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>JV()}return n})();function JV(){let n=Se(),e=Lt(),t=wn(e.index,n);return(on(t)?t:n)[Te]}var GS=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:()=>null})}return n})();var th={},xs=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,th,r);return i!==th||t===th?i:this.parentInjector.get(e,t,r)}};function LC(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Nd(i,a);else if(o==2){let u=a,l=e[++s];r=Nd(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function ee(n,e=0){let t=Se();if(t===null)return te(n,e);let r=Lt();return p0(r,t,mt(n),e)}function WS(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,u,l]=h.resolveHostDirectives(s);break}t2(n,e,t,a,o,u,l)}o!==null&&r!==null&&XV(t,r,o)}function XV(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new $(-301,!1);r.push(e[i],o)}}function e2(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function t2(n,e,t,r,i,o,s){let a=r.length,u=!1;for(let m=0;m<a;m++){let y=r[m];!u&&zn(y)&&(u=!0,e2(n,t,m)),Py(sh(t,e),n,y.type)}a2(t,n.data.length,a);for(let m=0;m<a;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=dS(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let m=0;m<a;m++){let y=r[m];if(t.mergedAttrs=Lc(t.mergedAttrs,y.hostAttrs),r2(n,t,e,p,y),s2(p,y,i),s!==null&&s.has(y)){let[R,N]=s.get(y);t.directiveToIndex.set(y.type,[p,R+t.directiveStart,N+t.directiveStart])}else(o===null||!o.has(y))&&t.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let w=y.type.prototype;!l&&(w.ngOnChanges||w.ngOnInit||w.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!h&&(w.ngOnChanges||w.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}n2(n,t,o)}function n2(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))VC(0,e,i,r),VC(1,e,i,r),UC(e,r,!1);else{let o=t.get(i);jC(0,e,o,r),jC(1,e,o,r),UC(e,r,!0)}}}function VC(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),KS(e,o)}}function jC(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),KS(e,s)}}function KS(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function UC(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||pv(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(t&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function r2(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Xi(i.type,!0)),s=new ho(o,zn(i),ee,null);n.blueprint[r]=s,t[r]=s,i2(n,e,r,dS(n,t,i.hostVars,Kn),i)}function i2(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;o2(s)!=a&&s.push(a),s.push(t,r,o)}}function o2(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function s2(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;zn(e)&&(t[""]=n)}}function a2(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function QS(n,e,t,r,i,o,s,a){let u=e[W],l=u.consts,h=Mc(l,s),p=Nv(u,n,t,r,h);return o&&WS(u,e,p,Mc(l,a),i),p.mergedAttrs=Lc(p.mergedAttrs,p.attrs),p.attrs!==null&&LC(p,p.attrs,!1),p.mergedAttrs!==null&&LC(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function YS(n,e){s0(n,e),Ym(e)&&n.queries.elementEnd(e)}function xv(n){return JS(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function ZS(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function JS(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Us(n,e,t){if(t===Kn)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Ty(n,e,t){return function r(i){let o=Dr(n)?wn(n.index,e):e;Ph(o,5);let s=e[Ct],a=BC(e,s,t,i),u=r.__ngNextListenerFn__;for(;u;)a=BC(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function BC(n,e,t,r){let i=ce(null);try{return Ee(6,e,t),t(r)!==!1}catch(o){return Sv(n,o),!1}finally{Ee(7,e,t),ce(i)}}function c2(n,e,t,r,i,o,s,a){let u=Nc(n),l=!1,h=null;if(!r&&u&&(h=l2(e,t,o,n.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=In(n,t),m=r?r(p):p;XF(t,m,o,a);let y=i.listen(m,o,a);if(!u2(o)){let w=r?R=>r(an(R[n.index])):n.index;XS(w,e,t,o,a,y,!1)}}return l}function u2(n){return n.startsWith("animation")||n.startsWith("transition")}function l2(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[bs],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function XS(n,e,t,r,i,o,s){let a=e.firstCreatePass?Zb(e):null,u=Yb(t),l=u.length;u.push(i,o),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function $C(n,e,t,r,i,o){let s=e[t],a=e[W],l=a.data[t].outputs[r],p=s[l].subscribe(o);XS(n.index,a,e,i,o,p,!0)}var Ky=Symbol("BINDING");var ph=class extends Kc{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=wr(e);return new Ls(t,this.ngModule)}};function d2(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Rh.SignalBased)!==0};return i&&(o.transform=i),o})}function h2(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function f2(n,e,t){let r=e instanceof He?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new xs(t,r):t}function p2(n){let e=n.get(fo,null);if(e===null)throw new $(407,!1);let t=n.get(GS,null),r=n.get($n,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function g2(n,e){let t=eA(n);return hv(e,t,t==="svg"?qb:t==="math"?Gb:null)}function eA(n){return(n.selectors[0][0]||"div").toLowerCase()}var Ls=class extends Fh{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=d2(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=h2(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=DL(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){Ee(22);let a=ce(null);try{let u=this.componentDef,l=m2(r,u,s,o),h=f2(u,i||this.ngModule,e),p=p2(h),m=p.rendererFactory.createRenderer(null,u),y=r?eV(m,r,u.encapsulation,h):g2(u,m),w=s?.some(HC)||o?.some(V=>typeof V!="function"&&V.bindings.some(HC)),R=mv(null,l,null,512|lS(u),null,null,p,m,h,null,K0(y,h,!0));R[Le]=y,Hd(R);let N=null;try{let V=QS(Le,R,2,"#host",()=>l.directiveRegistry,!0,0);sS(m,y,V),ks(y,R),Cv(l,R,V),tS(l,V,R),YS(l,V),t!==void 0&&v2(V,this.ngContentSelectors,t),N=wn(V.index,R),R[Ct]=N[Ct],Rv(l,R,null)}catch(V){throw N!==null&&Oy(N),Oy(R),V}finally{Ee(23),zd()}return new gh(this.componentType,R,!!w)}finally{ce(a)}}};function m2(n,e,t,r){let i=n?["ng-version","20.3.15"]:bL(e.selectors[0]),o=null,s=null,a=0;if(t)for(let h of t)a+=h[Ky].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let m of p.bindings){a+=m[Ky].requiredVars;let y=h+1;m.create&&(m.targetIdx=y,(o??=[]).push(m)),m.update&&(m.targetIdx=y,(s??=[]).push(m))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,m=Ld(p);u.push(m)}return gv(0,null,y2(o,s),1,a,u,null,null,null,[i],null)}function y2(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function HC(n){let e=n[Ky].kind;return e==="input"||e==="twoWay"}var gh=class extends qS{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Ss(t[W],Le),this.location=Eh(this._tNode,t),this.instance=wn(this._tNode.index,t)[Ct],this.hostView=this.changeDetectorRef=new li(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=Av(r,i[W],i,e,t);this.previousInputValues.set(e,t);let s=wn(r.index,i);Ph(s,1)}get injector(){return new lo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function v2(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Io=(()=>{class n{static __NG_ELEMENT_ID__=_2}return n})();function _2(){let n=Lt();return I2(n,Se())}var E2=Io,tA=class extends E2{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Eh(this._hostTNode,this._hostLView)}get injector(){return new lo(this._hostTNode,this._hostLView)}get parentInjector(){let e=tv(this._hostTNode,this._hostLView);if(c0(e)){let t=oh(e,this._hostLView),r=ih(e),i=t[W].data[r+8];return new lo(i,t)}else return new lo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=zC(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ft}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Gy(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,zy(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let u=e&&!TF(e),l;if(u)l=t;else{let N=t||{};l=N.index,r=N.injector,i=N.projectableNodes,o=N.environmentInjector||N.ngModuleRef,s=N.directives,a=N.bindings}let h=u?e:new Ls(wr(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let V=(u?p:this.parentInjector).get(He,null);V&&(o=V)}let m=wr(h.componentType??{}),y=Gy(this._lContainer,m?.id??null),w=y?.firstChild??null,R=h.create(p,i,w,o,s,a);return this.insertImpl(R.hostView,l,zy(this._hostTNode,y)),R}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(Wb(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[ze],l=new tA(u,u[_n],u[ze]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return VS(s,i,o,r),e.attachToViewContainerRef(),Bm(Dy(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=zC(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=hh(this._lContainer,t);r&&(wc(Dy(this._lContainer),t),Tv(r[W],r))}detach(e){let t=this._adjustIndex(e,-1),r=hh(this._lContainer,t);return r&&wc(Dy(this._lContainer),t)!=null?new li(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function zC(n){return n[Ac]}function Dy(n){return n[Ac]||(n[Ac]=[])}function I2(n,e){let t,r=e[n.index];return sn(r)?t=r:(t=LS(r,e,null,n),e[n.index]=t,yv(e,t)),nA(t,e,n,r),new tA(t,n,e)}function w2(n,e){let t=n[Te],r=t.createComment(""),i=In(e,n),o=t.parentNode(i);return uh(t,o,r,t.nextSibling(i),!1),r}var nA=rA,Ov=()=>!1;function T2(n,e,t){return Ov(n,e,t)}function rA(n,e,t,r){if(n[Hn])return;let i;t.type&8?i=an(r):i=w2(e,t),n[Hn]=i}function D2(n,e,t){if(n[Hn]&&n[Nn])return!0;let r=t[nn],i=e.index-Le;if(!r||E0(e)||J0(r,i))return!1;let s=Ly(r,i),a=r.data[Th]?.[i],[u,l]=WV(s,a);return n[Hn]=u,n[Nn]=l,!0}function b2(n,e,t,r){Ov(n,t,e)||rA(n,e,t,r)}function iA(){nA=b2,Ov=D2}var po=class{},Lh=class{};var mh=class extends po{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new ph(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=zm(e);this._bootstrapComponents=cS(o.bootstrap),this._r3Injector=hy(e,t,[{provide:po,useValue:this},{provide:Kc,useValue:this.componentFactoryResolver},...r],_r(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},yh=class extends Lh{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new mh(this.moduleType,e,[])}};var Bc=class extends po{injector;componentFactoryResolver=new ph(this);instance=null;constructor(e){super();let t=new to([...e.providers,{provide:po,useValue:this},{provide:Kc,useValue:this.componentFactoryResolver}],e.parent||Dc(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Bs(n,e,t=null){return new Bc({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var C2=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Vd(!1,t.type),i=r.length>0?Bs([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=H({token:n,providedIn:"environment",factory:()=>new n(te(He))})}return n})();function un(n){return js(()=>{let e=oA(n),t=ae(k({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===nv.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(C2).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Cr.Emulated,styles:n.styles||Ot,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Sr("NgStandalone"),sA(t);let r=n.dependencies;return t.directiveDefs=qC(r,S2),t.pipeDefs=qC(r,qm),t.id=N2(t),t})}function S2(n){return wr(n)||Ld(n)}function hi(n){return js(()=>({type:n.type,bootstrap:n.bootstrap||Ot,declarations:n.declarations||Ot,imports:n.imports||Ot,exports:n.exports||Ot,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function A2(n,e){if(n==null)return oi;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=Rh.None,u=null),t[o]=[r,a,u],e[o]=s}return t}function R2(n){if(n==null)return oi;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function xe(n){return js(()=>{let e=oA(n);return sA(e),e})}function oA(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||oi,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Ot,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:A2(n.inputs,e),outputs:R2(n.outputs),debugInfo:null}}function sA(n){n.features?.forEach(e=>e(n))}function qC(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function N2(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function M2(n){return Object.getPrototypeOf(n.prototype).constructor}function Qt(n){let e=M2(n.type),t=!0,r=[n];for(;e;){let i;if(zn(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new $(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=by(n.inputs),s.declaredInputs=by(n.declaredInputs),s.outputs=by(n.outputs);let a=i.hostBindings;a&&F2(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&O2(n,u),l&&k2(n,l),P2(n,i),Mb(n.outputs,i.outputs),zn(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Qt&&(t=!1)}}e=Object.getPrototypeOf(e)}x2(r)}function P2(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function x2(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Lc(i.hostAttrs,t=Lc(t,i.hostAttrs))}}function by(n){return n===oi?{}:n===Ot?[]:n}function O2(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function k2(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function F2(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function L2(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=Lc(n.mergedAttrs,n.attrs);let h=n.tView=gv(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),h.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),Rs(n,!1);let u=aA(t,e,n,r);Gd()&&Dv(t,e,u,n),ks(u,e);let l=LS(u,e,u,n);e[r+Le]=l,yv(e,l),T2(l,n,e)}function V2(n,e,t,r,i,o,s,a,u,l,h){let p=t+Le,m;return e.firstCreatePass?(m=Nv(e,p,4,s||null,a||null),ty()&&WS(e,n,m,Mc(e.consts,l),CS),s0(e,m)):m=e.data[p],L2(m,n,e,t,r,i,o,u),Nc(m)&&Cv(e,n,m),l!=null&&wS(n,m,h),m}function ln(n,e,t,r,i,o,s,a){let u=Se(),l=qt(),h=Mc(l.consts,o);return V2(u,l,n,e,t,r,i,h,void 0,s,a),ln}var aA=cA;function cA(n,e,t,r){return br(!0),e[Te].createComment("")}function j2(n,e,t,r){let i=!Sh(e,t);br(i);let o=e[nn]?.data[A0]?.[r]??null;if(o!==null&&t.tView!==null&&t.tView.ssrId===null&&(t.tView.ssrId=o),i)return cA(n,e);let s=e[nn],a=xh(s,n,e,t);Ch(s,r,a);let u=dv(s,r);return Oh(u,a)}function uA(){aA=j2}var cn=(function(n){return n[n.NOT_STARTED=0]="NOT_STARTED",n[n.IN_PROGRESS=1]="IN_PROGRESS",n[n.COMPLETE=2]="COMPLETE",n[n.FAILED=3]="FAILED",n})(cn||{}),GC=0,U2=1,We=(function(n){return n[n.Placeholder=0]="Placeholder",n[n.Loading=1]="Loading",n[n.Complete=2]="Complete",n[n.Error=3]="Error",n})(We||{});var B2=0,Qc=1;var $2=4,H2=5;var z2=7,Os=8,q2=9,kv=(function(n){return n[n.Manual=0]="Manual",n[n.Playthrough=1]="Playthrough",n})(kv||{});function nh(n,e){let t=W2(n),r=e[t];if(r!==null){for(let i of r)i();e[t]=null}}function G2(n){nh(1,n),nh(0,n),nh(2,n)}function W2(n){let e=$2;return n===1?e=H2:n===2&&(e=q2),e}function lA(n){return n+1}function $s(n,e){let t=n[W],r=lA(e.index);return n[r]}function Yc(n,e){let t=lA(e.index);return n.data[t]}function K2(n,e,t){let r=e[W],i=Yc(r,t);switch(n){case We.Complete:return i.primaryTmplIndex;case We.Loading:return i.loadingTmplIndex;case We.Error:return i.errorTmplIndex;case We.Placeholder:return i.placeholderTmplIndex;default:return null}}function WC(n,e){return e===We.Placeholder?n.placeholderBlockConfig?.[GC]??null:e===We.Loading?n.loadingBlockConfig?.[GC]??null:null}function Q2(n){return n.loadingBlockConfig?.[U2]??null}function KC(n,e){if(!n||n.length===0)return e;let t=new Set(n);for(let r of e)t.add(r);return n.length===t.size?n:Array.from(t)}function Y2(n,e){let t=e.primaryTmplIndex+Le;return Ss(n,t)}var Z2=(()=>{class n{cachedInjectors=new Map;getOrCreateInjector(t,r,i,o){if(!this.cachedInjectors.has(t)){let s=i.length>0?Bs(i,r,o):null;this.cachedInjectors.set(t,s)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=H({token:n,providedIn:"environment",factory:()=>new n})}return n})();var dA=new j("");function Cy(n,e,t){return n.get(Z2).getOrCreateInjector(e,n,t,"")}function J2(n,e,t){if(n instanceof xs){let i=n.injector,o=n.parentInjector,s=Cy(o,e,t);return new xs(i,s)}let r=n.get(He);if(r!==n){let i=Cy(r,e,t);return new xs(n,i)}return Cy(n,e,t)}function uo(n,e,t,r=!1){let i=t[ze],o=i[W];if(si(i))return;let s=$s(i,e),a=s[Qc],u=s[z2];if(!(u!==null&&n<u)&&QC(a,n)&&QC(s[B2]??-1,n)){let l=Yc(o,e),p=!r&&!0&&(Q2(l)!==null||WC(l,We.Loading)!==null||WC(l,We.Placeholder))?tj:ej;try{p(n,s,t,e,i)}catch(m){Sv(i,m)}}}function X2(n,e){let t=n[Nn]?.findIndex(i=>i.data[P0]===e[Qc])??-1;return{dehydratedView:t>-1?n[Nn][t]:null,dehydratedViewIx:t}}function ej(n,e,t,r,i){Ee(20);let o=K2(n,i,r);if(o!==null){e[Qc]=n;let s=i[W],a=o+Le,u=Ss(s,a),l=0;RV(t,l);let h;if(n===We.Complete){let w=Yc(s,r),R=w.providers;R&&R.length>0&&(h=J2(i[En],w,R))}let{dehydratedView:p,dehydratedViewIx:m}=X2(t,e),y=SS(i,u,null,{injector:h,dehydratedView:p});if(VS(t,y,l,zy(u,p)),Ph(y,2),m>-1&&t[Nn]?.splice(m,1),(n===We.Complete||n===We.Error)&&Array.isArray(e[Os])){for(let w of e[Os])w();e[Os]=null}}Ee(21)}function QC(n,e){return n<e}function YC(n,e,t){n.loadingPromise.then(()=>{n.loadingState===cn.COMPLETE?uo(We.Complete,e,t):n.loadingState===cn.FAILED&&uo(We.Error,e,t)})}var tj=null;var Vh=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var Fv=new j("");function fi(n){return!!n&&typeof n.then=="function"}function Lv(n){return!!n&&typeof n.subscribe=="function"}var hA=new j("");var Vv=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=A(hA,{optional:!0})??[];injector=A(Fe);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=qe(this.injector,i);if(fi(o))t.push(o);else if(Lv(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pi=new j("");function fA(){em(()=>{let n="";throw new $(600,n)})}function pA(n){return n.isBoundToModule}var nj=10;var Rt=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=A(Gt);afterRenderManager=A(Iv);zonelessEnabled=A(Ns);rootEffectScheduler=A(yy);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Xe;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=A(Mn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ue(t=>!t))}constructor(){A(_o,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=A(He);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Fe.NULL){return this._injector.get(ve).run(()=>{Ee(10);let s=t instanceof Fh;if(!this._injector.get(Vv).done){let w="";throw new $(405,w)}let u;s?u=t:u=this._injector.get(Kc).resolveComponentFactory(t),this.componentTypes.push(u.componentType);let l=pA(u)?void 0:this._injector.get(po),h=r||u.selector,p=u.create(i,[],h,l),m=p.location.nativeElement,y=p.injector.get(Fv,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),Fc(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),Ee(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Ee(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Nh.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new $(101,!1);let t=ce(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ce(t),this.afterTick.next(),Ee(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(fo,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<nj;)Ee(14),this.synchronizeOnce(),Ee(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Pc(i))continue;let o=r&&!this.zonelessEnabled?0:1;xS(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Pc(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Fc(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(pi,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Fc(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new $(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Fc(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function rj(){let n,e;return{promise:new Promise((r,i)=>{n=r,e=i}),resolve:n,reject:e}}function gA(n,e,t){let r=e[En],i=e[W];if(n.loadingState!==cn.NOT_STARTED)return n.loadingPromise??Promise.resolve();let o=$s(e,t),s=Y2(i,n);n.loadingState=cn.IN_PROGRESS,nh(1,o);let a=n.dependencyResolverFn,u=r.get(ui).add();return a?(n.loadingPromise=Promise.allSettled(a()).then(l=>{let h=!1,p=[],m=[];for(let y of l)if(y.status==="fulfilled"){let w=y.value,R=wr(w)||Ld(w);if(R)p.push(R);else{let N=qm(w);N&&m.push(N)}}else{h=!0;break}if(h){if(n.loadingState=cn.FAILED,n.errorTmplIndex===null){let w=new $(-750,!1);Sv(e,w)}}else{n.loadingState=cn.COMPLETE;let y=s.tView;if(p.length>0){y.directiveRegistry=KC(y.directiveRegistry,p);let w=p.map(N=>N.type),R=Vd(!1,...w);n.providers=R}m.length>0&&(y.pipeRegistry=KC(y.pipeRegistry,m))}}),n.loadingPromise.finally(()=>{n.loadingPromise=null,u()})):(n.loadingPromise=Promise.resolve().then(()=>{n.loadingPromise=null,n.loadingState=cn.COMPLETE,u()}),n.loadingPromise)}function ij(n,e){return e[En].get(dA,null,{optional:!0})?.behavior!==kv.Manual}function oj(n,e,t){let r=e[W],i=e[t.index];if(!ij(n,e))return;let o=$s(e,t),s=Yc(r,t);switch(G2(o),s.loadingState){case cn.NOT_STARTED:uo(We.Loading,t,i),gA(s,e,t),s.loadingState===cn.IN_PROGRESS&&YC(s,t,i);break;case cn.IN_PROGRESS:uo(We.Loading,t,i),YC(s,t,i);break;case cn.COMPLETE:uo(We.Complete,t,i);break;case cn.FAILED:uo(We.Error,t,i);break;default:}}async function mA(n,e,t){let r=n.get(Dh);if(r.hydrating.has(e))return;let{parentBlockPromise:o,hydrationQueue:s}=aL(e,n);if(s.length===0)return;o!==null&&s.shift(),cj(r,s),o!==null&&await o;let a=s[0];r.has(a)?await ZC(n,s,t):r.awaitParentBlock(a,async()=>await ZC(n,s,t))}async function ZC(n,e,t){let r=n.get(Dh),i=r.hydrating,o=n.get(Mn),s=o.add();for(let u=0;u<e.length;u++){let l=e[u],h=r.get(l);if(h!=null){if(await lj(h),await uj(n),sj(h)){qV(h),JC(e.slice(u),r);break}i.get(l).resolve()}else{aj(u,e,r),JC(e.slice(u),r);break}}let a=e[e.length-1];await i.get(a)?.promise,o.remove(s),t&&t(e),GV(r.get(a),e,r,n.get(Rt))}function sj(n){return $s(n.lView,n.tNode)[Qc]===We.Error}function aj(n,e,t){let r=n-1,i=r>-1?t.get(e[r]):null;i&&kh(i.lContainer)}function JC(n,e){let t=e.hydrating;for(let r in n)t.get(r)?.reject();e.cleanup(n)}function cj(n,e){for(let t of e)n.hydrating.set(t,rj())}function uj(n){return new Promise(e=>Gc(e,{injector:n}))}async function lj(n){let{tNode:e,lView:t}=n,r=$s(t,e);return new Promise(i=>{dj(r,i),oj(2,t,e)})}function dj(n,e){Array.isArray(n[Os])||(n[Os]=[]),n[Os].push(e)}function Zc(n,e,t,r){let i=Se(),o=xc();if(Us(i,o,e)){let s=qt(),a=qd();uV(a,i,n,e,t,r)}return Zc}var DJ=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function nt(n,e,t){let r=Se(),i=xc();if(Us(r,i,e)){let o=qt(),s=qd();bS(s,r,n,e,r[Te],t)}return nt}function Qy(n,e,t,r,i){Av(e,n,t,i?"class":"style",r)}function O(n,e,t,r){let i=Se(),o=i[W],s=n+Le,a=o.firstCreatePass?QS(s,i,2,e,CS,ty(),t,r):o.data[s];if(hV(a,i,n,e,yA),Nc(a)){let u=i[W];Cv(u,i,a),tS(u,a,i)}return r!=null&&wS(i,a),O}function x(){let n=qt(),e=Lt(),t=fV(e);return n.firstCreatePass&&YS(n,t),tC(t)&&rC(),eC(),t.classesWithoutHost!=null&&RF(t)&&Qy(n,t,Se(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&NF(t)&&Qy(n,t,Se(),t.stylesWithoutHost,!1),x}function Hs(n,e,t,r){return O(n,e,t,r),x(),Hs}var yA=(n,e,t,r,i)=>(br(!0),hv(e[Te],r,dy()));function hj(n,e,t,r,i){let o=!Sh(e,t);if(br(o),o)return hv(e[Te],r,dy());let s=e[nn],a=xh(s,n,e,t);return Z0(s,i)&&Ch(s,i,a.nextSibling),s&&(v0(t)||_0(a))&&Dr(t)&&(nC(t),oS(a)),a}function vA(){yA=hj}var fj=(n,e,t,r,i)=>(br(!0),rS(e[Te],""));function pj(n,e,t,r,i){let o,s=!Sh(e,t);if(br(s),s)return rS(e[Te],"");let a=e[nn],u=xh(a,n,e,t),l=oL(a,i);return Ch(a,i,u),o=Oh(l,u),o}function _A(){fj=pj}function Jc(){return Se()}var Xc="en-US";var gj=Xc;function EA(n){typeof n=="string"&&(gj=n.toLowerCase().replace(/_/g,"-"))}function Ae(n,e,t){let r=Se(),i=qt(),o=Lt();return IA(i,r,r[Te],o,n,e,t),Ae}function IA(n,e,t,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=Ty(r,e,o),c2(r,n,e,s,t,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let m=h[p],y=h[p+1];u??=Ty(r,e,o),$C(r,e,m,y,i,u)}if(l&&l.length)for(let p of l)u??=Ty(r,e,o),$C(r,e,p,i,i,u)}}function Ve(n=1){return pC(n)}function Zd(n,e){return n<<17|e<<2}function go(n){return n>>17&32767}function mj(n){return(n&2)==2}function yj(n,e){return n&131071|e<<17}function Yy(n){return n|2}function Vs(n){return(n&131068)>>2}function Sy(n,e){return n&-131069|e<<2}function vj(n){return(n&1)===1}function Zy(n){return n|1}function _j(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=go(s),u=Vs(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||Ds(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let m=go(n[a+1]);n[r+1]=Zd(m,a),m!==0&&(n[m+1]=Sy(n[m+1],r)),n[a+1]=yj(n[a+1],r)}else n[r+1]=Zd(a,0),a!==0&&(n[a+1]=Sy(n[a+1],r)),a=r;else n[r+1]=Zd(u,0),a===0?a=r:n[u+1]=Sy(n[u+1],r),u=r;l&&(n[r+1]=Yy(n[r+1])),XC(n,h,r,!0),XC(n,h,r,!1),Ej(e,h,n,r,o),s=Zd(a,u),o?e.classBindings=s:e.styleBindings=s}function Ej(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Ds(o,e)>=0&&(t[r+1]=Zy(t[r+1]))}function XC(n,e,t,r){let i=n[t+1],o=e===null,s=r?go(i):Vs(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];Ij(u,e)&&(a=!0,n[s+1]=r?Zy(l):Yy(l)),s=r?go(l):Vs(l)}a&&(n[t+1]=r?Yy(i):Zy(i))}function Ij(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Ds(n,e)>=0:!1}var xn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function wj(n){return n.substring(xn.key,xn.keyEnd)}function Tj(n){return Dj(n),wA(n,TA(n,0,xn.textEnd))}function wA(n,e){let t=xn.textEnd;return t===e?-1:(e=xn.keyEnd=bj(n,xn.key=e,t),TA(n,e,t))}function Dj(n){xn.key=0,xn.keyEnd=0,xn.value=0,xn.valueEnd=0,xn.textEnd=n.length}function TA(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function bj(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function eu(n,e){return Sj(n,e,null,!0),eu}function jv(n){Aj(Oj,Cj,n,!0)}function Cj(n,e){for(let t=Tj(e);t>=0;t=wA(e,t))kd(n,wj(e),!0)}function Sj(n,e,t,r){let i=Se(),o=qt(),s=ay(2);if(o.firstUpdatePass&&bA(o,n,s,r),e!==Kn&&Us(i,s,e)){let a=o.data[ai()];CA(o,a,i,i[Te],n,i[s+1]=Fj(e,t),r,s)}}function Aj(n,e,t,r){let i=qt(),o=ay(2);i.firstUpdatePass&&bA(i,null,o,r);let s=Se();if(t!==Kn&&Us(s,o,t)){let a=i.data[ai()];if(SA(a,r)&&!DA(i,o)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;u!==null&&(t=Nd(u,t||"")),Qy(i,a,s,t,r)}else kj(i,a,s,s[Te],s[o+1],s[o+1]=xj(n,e,t),r,o)}}function DA(n,e){return e>=n.expandoStartIndex}function bA(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[ai()],s=DA(n,t);SA(o,r)&&e===null&&!s&&(e=!1),e=Rj(i,o,e,r),_j(i,o,e,t,s,r)}}function Rj(n,e,t,r){let i=lC(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Ay(null,n,e,t,r),t=$c(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Ay(i,n,e,t,r),o===null){let u=Nj(n,e,r);u!==void 0&&Array.isArray(u)&&(u=Ay(null,n,e,u[1],r),u=$c(u,e.attrs,r),Mj(n,e,r,u))}else o=Pj(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function Nj(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Vs(r)!==0)return n[go(r)]}function Mj(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[go(i)]=r}function Pj(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=$c(r,s,t)}return $c(r,e.attrs,t)}function Ay(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=$c(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function $c(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),kd(n,s,t?!0:e[++o]))}return n===void 0?null:n}function xj(n,e,t){if(t==null||t==="")return Ot;let r=[],i=Ah(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function Oj(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&kd(n,r,t)}function kj(n,e,t,r,i,o,s,a){i===Kn&&(i=Ot);let u=0,l=0,h=0<i.length?i[0]:null,p=0<o.length?o[0]:null;for(;h!==null||p!==null;){let m=u<i.length?i[u+1]:void 0,y=l<o.length?o[l+1]:void 0,w=null,R;h===p?(u+=2,l+=2,m!==y&&(w=p,R=y)):p===null||h!==null&&h<p?(u+=2,w=h):(l+=2,w=p,R=y),w!==null&&CA(n,e,t,r,w,R,s,a),h=u<i.length?i[u]:null,p=l<o.length?o[l]:null}}function CA(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=vj(l)?e0(u,e,t,i,Vs(l),s):void 0;if(!vh(h)){vh(o)||mj(l)&&(o=e0(u,null,t,i,a,s));let p=Zm(ai(),t);XL(r,s,p,i,o)}}function e0(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=t[i+1];m===Kn&&(m=p?Ot:void 0);let y=p?Fd(m,r):h===r?m:void 0;if(l&&!vh(y)&&(y=Fd(u,r)),vh(y)&&(a=y,s))return a;let w=n[i+1];i=s?go(w):Vs(w)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=Fd(u,r))}return a}function vh(n){return n!==void 0}function Fj(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=_r(Ah(n)))),n}function SA(n,e){return(n.flags&(e?8:16))!==0}function F(n,e=""){let t=Se(),r=qt(),i=n+Le,o=r.firstCreatePass?Nv(r,i,1,e,null):r.data[i],s=AA(r,t,o,e,n);t[i]=s,Gd()&&Dv(r,t,s,o),Rs(o,!1)}var AA=(n,e,t,r,i)=>(br(!0),nS(e[Te],r));function Lj(n,e,t,r,i){let o=!Sh(e,t);if(br(o),o)return nS(e[Te],r);let s=e[nn];return xh(s,n,e,t)}function RA(){AA=Lj}function Vj(n,e,t,r=""){return Us(n,xc(),t)?e+Pd(t)+r:Kn}function dn(n){return rt("",n),dn}function rt(n,e,t){let r=Se(),i=Vj(r,n,e,t);return i!==Kn&&jj(r,ai(),i),rt}function jj(n,e,t){let r=Zm(e,n);hL(n[Te],r,t)}function it(n,e,t){gy(e)&&(e=e());let r=Se(),i=xc();if(Us(r,i,e)){let o=qt(),s=qd();bS(s,r,n,e,r[Te],t)}return it}function ct(n,e){let t=gy(n);return t&&n.set(e),t}function ot(n,e){let t=Se(),r=qt(),i=Lt();return IA(r,t,t[Te],i,n,e),ot}function Uj(n,e,t){let r=qt();if(r.firstCreatePass){let i=zn(n);Jy(t,r.data,r.blueprint,i,!0),Jy(e,r.data,r.blueprint,i,!1)}}function Jy(n,e,t,r,i){if(n=mt(n),Array.isArray(n))for(let o=0;o<n.length;o++)Jy(n[o],e,t,r,i);else{let o=qt(),s=Se(),a=Lt(),u=eo(n)?n:mt(n.provide),l=Wm(n),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(eo(n)||!n.multi){let y=new ho(l,i,ee,null),w=Ny(u,e,i?h:h+m,p);w===-1?(Py(sh(a,s),o,u),Ry(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[w]=y,s[w]=y)}else{let y=Ny(u,e,h+m,p),w=Ny(u,e,h,h+m),R=y>=0&&t[y],N=w>=0&&t[w];if(i&&!N||!i&&!R){Py(sh(a,s),o,u);let V=Hj(i?$j:Bj,t.length,i,r,l,n);!i&&N&&(t[w].providerFactory=V),Ry(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(V),s.push(V)}else{let V=NA(t[i?w:y],l,!i&&r);Ry(o,n,y>-1?y:w,V)}!i&&r&&N&&t[w].componentProviders++}}}function Ry(n,e,t,r){let i=eo(e),o=$b(e);if(i||o){let u=(o?mt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function NA(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Ny(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function Bj(n,e,t,r,i){return Xy(this.multi,[])}function $j(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=ah(r,r[W],this.providerFactory.index,i);s=u.slice(0,a),Xy(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],Xy(o,s);return s}function Xy(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function Hj(n,e,t,r,i,o){let s=new ho(n,t,ee,null);return s.multi=[],s.index=e,s.componentProviders=0,NA(s,i,r&&!t),s}function Qn(n,e=[]){return t=>{t.providersResolver=(r,i)=>Uj(r,i?i(n):n,e)}}var _h=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Uv=(()=>{class n{compileModuleSync(t){return new yh(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=zm(t),o=cS(i.declarations).reduce((s,a)=>{let u=wr(a);return u&&s.push(new Ls(u)),s},[]);return new _h(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var zj=(()=>{class n{zone=A(ve);changeDetectionScheduler=A($n);applicationRef=A(Rt);applicationErrorHandler=A(Gt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function MA({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new ve(ae(k({},PA()),{scheduleInRootZone:t})),[{provide:ve,useFactory:n},{provide:yn,multi:!0,useFactory:()=>{let r=A(zj,{optional:!0});return()=>r.initialize()}},{provide:yn,multi:!0,useFactory:()=>{let r=A(qj);return()=>{r.initialize()}}},e===!0?{provide:my,useValue:!0}:[],{provide:Kd,useValue:t??fS},{provide:Gt,useFactory:()=>{let r=A(ve),i=A(He),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(Rn),o.handleError(s))})}}}]}function PA(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var qj=(()=>{class n{subscription=new ke;initialized=!1;zone=A(ve);pendingTasks=A(Mn);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ve.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ve.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Bv=(()=>{class n{applicationErrorHandler=A(Gt);appRef=A(Rt);taskService=A(Mn);ngZone=A(ve);zonelessEnabled=A(Ns);tracing=A(_o,{optional:!0});disableScheduling=A(my,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new ke;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(lh):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(A(Kd,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof jc||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?NC:pS;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(lh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,NC(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $v(){return Sr("NgZoneless"),yt([{provide:$n,useExisting:Bv},{provide:ve,useClass:jc},{provide:Ns,useValue:!0},{provide:Kd,useValue:!1},[]])}function Gj(){return typeof $localize<"u"&&$localize.locale||Xc}var jh=new j("",{providedIn:"root",factory:()=>A(jh,{optional:!0,skipSelf:!0})||Gj()});function vt(n){return Ab(n)}function wo(n,e){return Zl(n,e?.equal)}var xA=class{[bt];constructor(e){this[bt]=e}destroy(){this[bt].destroy()}};var Wv={JSACTION:"__jsaction",OWNER:"__owner"},LA={};function Wj(n){return n[Wv.JSACTION]}function OA(n,e){n[Wv.JSACTION]=e}function Kj(n){return LA[n]}function Qj(n,e){LA[n]=e}var G={AUXCLICK:"auxclick",CHANGE:"change",CLICK:"click",CLICKMOD:"clickmod",CLICKONLY:"clickonly",DBLCLICK:"dblclick",FOCUS:"focus",FOCUSIN:"focusin",BLUR:"blur",FOCUSOUT:"focusout",SUBMIT:"submit",KEYDOWN:"keydown",KEYPRESS:"keypress",KEYUP:"keyup",MOUSEUP:"mouseup",MOUSEDOWN:"mousedown",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",MOUSEMOVE:"mousemove",POINTERUP:"pointerup",POINTERDOWN:"pointerdown",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERMOVE:"pointermove",POINTERCANCEL:"pointercancel",GOTPOINTERCAPTURE:"gotpointercapture",LOSTPOINTERCAPTURE:"lostpointercapture",ERROR:"error",LOAD:"load",UNLOAD:"unload",TOUCHSTART:"touchstart",TOUCHEND:"touchend",TOUCHMOVE:"touchmove",INPUT:"input",SCROLL:"scroll",TOGGLE:"toggle",CUSTOM:"_custom"},Yj=[G.MOUSEENTER,G.MOUSELEAVE,"pointerenter","pointerleave"],VJ=[G.CLICK,G.DBLCLICK,G.FOCUSIN,G.FOCUSOUT,G.KEYDOWN,G.KEYUP,G.KEYPRESS,G.MOUSEOVER,G.MOUSEOUT,G.SUBMIT,G.TOUCHSTART,G.TOUCHEND,G.TOUCHMOVE,"touchcancel","auxclick","change","compositionstart","compositionupdate","compositionend","beforeinput","input","select","copy","cut","paste","mousedown","mouseup","wheel","contextmenu","dragover","dragenter","dragleave","drop","dragstart","dragend","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerout","gotpointercapture","lostpointercapture","ended","loadedmetadata","pagehide","pageshow","visibilitychange","beforematch"],Zj=[G.FOCUS,G.BLUR,G.ERROR,G.LOAD,G.TOGGLE],Kv=n=>Zj.indexOf(n)>=0;function Jj(n){return n===G.MOUSEENTER?G.MOUSEOVER:n===G.MOUSELEAVE?G.MOUSEOUT:n===G.POINTERENTER?G.POINTEROVER:n===G.POINTERLEAVE?G.POINTEROUT:n}function Xj(n,e,t,r){let i=!1;Kv(e)&&(i=!0);let o=typeof r=="boolean"?{capture:i,passive:r}:i;return n.addEventListener(e,t,o),{eventType:e,handler:t,capture:i,passive:r}}function eU(n,e){if(n.removeEventListener){let t=typeof e.passive=="boolean"?{capture:e.capture}:e.capture;n.removeEventListener(e.eventType,e.handler,t)}else n.detachEvent&&n.detachEvent(`on${e.eventType}`,e.handler)}function tU(n){n.preventDefault?n.preventDefault():n.returnValue=!1}var kA=typeof navigator<"u"&&/Macintosh/.test(navigator.userAgent);function nU(n){return n.which===2||n.which==null&&n.button===4}function rU(n){return kA&&n.metaKey||!kA&&n.ctrlKey||nU(n)||n.shiftKey}function iU(n,e,t){let r=n.relatedTarget;return(n.type===G.MOUSEOVER&&e===G.MOUSEENTER||n.type===G.MOUSEOUT&&e===G.MOUSELEAVE||n.type===G.POINTEROVER&&e===G.POINTERENTER||n.type===G.POINTEROUT&&e===G.POINTERLEAVE)&&(!r||r!==t&&!t.contains(r))}function oU(n,e){let t={};for(let r in n){if(r==="srcElement"||r==="target")continue;let i=r,o=n[i];typeof o!="function"&&(t[i]=o)}return n.type===G.MOUSEOVER?t.type=G.MOUSEENTER:n.type===G.MOUSEOUT?t.type=G.MOUSELEAVE:n.type===G.POINTEROVER?t.type=G.POINTERENTER:t.type=G.POINTERLEAVE,t.target=t.srcElement=e,t.bubbles=!1,t._originalEvent=n,t}var sU=typeof navigator<"u"&&/iPhone|iPad|iPod/.test(navigator.userAgent),Hh=class{element;handlerInfos=[];constructor(e){this.element=e}addEventListener(e,t,r){sU&&(this.element.style.cursor="pointer"),this.handlerInfos.push(Xj(this.element,e,t(this.element),r))}cleanUp(){for(let e=0;e<this.handlerInfos.length;e++)eU(this.element,this.handlerInfos[e]);this.handlerInfos=[]}},aU={NAMESPACE_ACTION_SEPARATOR:".",EVENT_ACTION_SEPARATOR:":"};function gi(n){return n.eventType}function Qv(n,e){n.eventType=e}function Bh(n){return n.event}function VA(n,e){n.event=e}function jA(n){return n.targetElement}function UA(n,e){n.targetElement=e}function BA(n){return n.eic}function cU(n,e){n.eic=e}function uU(n){return n.timeStamp}function lU(n,e){n.timeStamp=e}function $h(n){return n.eia}function $A(n,e,t){n.eia=[e,t]}function Hv(n){n.eia=void 0}function Uh(n){return n[1]}function dU(n){return n.eirp}function HA(n,e){n.eirp=e}function zA(n){return n.eir}function qA(n,e){n.eir=e}function GA(n){return{eventType:n.eventType,event:n.event,targetElement:n.targetElement,eic:n.eic,eia:n.eia,timeStamp:n.timeStamp,eirp:n.eirp,eiack:n.eiack,eir:n.eir}}function hU(n,e,t,r,i,o,s,a){return{eventType:n,event:e,targetElement:t,eic:r,timeStamp:i,eia:o,eirp:s,eiack:a}}var zv=class n{eventInfo;constructor(e){this.eventInfo=e}getEventType(){return gi(this.eventInfo)}setEventType(e){Qv(this.eventInfo,e)}getEvent(){return Bh(this.eventInfo)}setEvent(e){VA(this.eventInfo,e)}getTargetElement(){return jA(this.eventInfo)}setTargetElement(e){UA(this.eventInfo,e)}getContainer(){return BA(this.eventInfo)}setContainer(e){cU(this.eventInfo,e)}getTimestamp(){return uU(this.eventInfo)}setTimestamp(e){lU(this.eventInfo,e)}getAction(){let e=$h(this.eventInfo);if(e)return{name:e[0],element:e[1]}}setAction(e){if(!e){Hv(this.eventInfo);return}$A(this.eventInfo,e.name,e.element)}getIsReplay(){return dU(this.eventInfo)}setIsReplay(e){HA(this.eventInfo,e)}getResolved(){return zA(this.eventInfo)}setResolved(e){qA(this.eventInfo,e)}clone(){return new n(GA(this.eventInfo))}},fU={},pU=/\s*;\s*/,gU=G.CLICK,qv=class{a11yClickSupport=!1;clickModSupport=!0;syntheticMouseEventSupport;updateEventInfoForA11yClick=void 0;preventDefaultForA11yClick=void 0;populateClickOnlyAction=void 0;constructor({syntheticMouseEventSupport:e=!1,clickModSupport:t=!0}={}){this.syntheticMouseEventSupport=e,this.clickModSupport=t}resolveEventType(e){this.clickModSupport&&gi(e)===G.CLICK&&rU(Bh(e))?Qv(e,G.CLICKMOD):this.a11yClickSupport&&this.updateEventInfoForA11yClick(e)}resolveAction(e){zA(e)||(this.populateAction(e,jA(e)),qA(e,!0))}resolveParentAction(e){let t=$h(e),r=t&&Uh(t);Hv(e);let i=r&&this.getParentNode(r);i&&this.populateAction(e,i)}populateAction(e,t){let r=t;for(;r&&r!==BA(e)&&(r.nodeType===Node.ELEMENT_NODE&&this.populateActionOnElement(r,e),!$h(e));)r=this.getParentNode(r);let i=$h(e);if(i&&(this.a11yClickSupport&&this.preventDefaultForA11yClick(e),this.syntheticMouseEventSupport&&(gi(e)===G.MOUSEENTER||gi(e)===G.MOUSELEAVE||gi(e)===G.POINTERENTER||gi(e)===G.POINTERLEAVE)))if(iU(Bh(e),gi(e),Uh(i))){let o=oU(Bh(e),Uh(i));VA(e,o),UA(e,Uh(i))}else Hv(e)}getParentNode(e){let t=e[Wv.OWNER];if(t)return t;let r=e.parentNode;return r?.nodeName==="#document-fragment"?r?.host??null:r}populateActionOnElement(e,t){let r=this.parseActions(e),i=r[gi(t)];i!==void 0&&$A(t,i,e),this.a11yClickSupport&&this.populateClickOnlyAction(e,t,r)}parseActions(e){let t=Wj(e);if(!t){let r=e.getAttribute(Qd.JSACTION);if(!r)t=fU,OA(e,t);else{if(t=Kj(r),!t){t={};let i=r.split(pU);for(let o=0;o<i.length;o++){let s=i[o];if(!s)continue;let a=s.indexOf(aU.EVENT_ACTION_SEPARATOR),u=a!==-1,l=u?s.substr(0,a).trim():gU,h=u?s.substr(a+1).trim():s;t[l]=h}Qj(r,t)}OA(e,t)}}return t}addA11yClickSupport(e,t,r){this.a11yClickSupport=!0,this.updateEventInfoForA11yClick=e,this.preventDefaultForA11yClick=t,this.populateClickOnlyAction=r}},WA=(function(n){return n[n.I_AM_THE_JSACTION_FRAMEWORK=0]="I_AM_THE_JSACTION_FRAMEWORK",n})(WA||{}),Gv=class{dispatchDelegate;actionResolver;eventReplayer;eventReplayScheduled=!1;replayEventInfoWrappers=[];constructor(e,{actionResolver:t,eventReplayer:r}={}){this.dispatchDelegate=e,this.actionResolver=t,this.eventReplayer=r}dispatch(e){let t=new zv(e);this.actionResolver?.resolveEventType(e),this.actionResolver?.resolveAction(e);let r=t.getAction();if(r&&mU(r.element,t)&&tU(t.getEvent()),this.eventReplayer&&t.getIsReplay()){this.scheduleEventInfoWrapperReplay(t);return}this.dispatchDelegate(t)}scheduleEventInfoWrapperReplay(e){this.replayEventInfoWrappers.push(e),!this.eventReplayScheduled&&(this.eventReplayScheduled=!0,Promise.resolve().then(()=>{this.eventReplayScheduled=!1,this.eventReplayer(this.replayEventInfoWrappers)}))}};function mU(n,e){return n.tagName==="A"&&(e.getEventType()===G.CLICK||e.getEventType()===G.CLICKMOD)}var KA=Symbol.for("propagationStopped"),Yv={REPLAY:101};var yU="`preventDefault` called during event replay.";var vU="`composedPath` called during event replay.",zh=class{dispatchDelegate;clickModSupport;actionResolver;dispatcher;constructor(e,t=!0){this.dispatchDelegate=e,this.clickModSupport=t,this.actionResolver=new qv({clickModSupport:t}),this.dispatcher=new Gv(r=>{this.dispatchToDelegate(r)},{actionResolver:this.actionResolver})}dispatch(e){this.dispatcher.dispatch(e)}dispatchToDelegate(e){for(e.getIsReplay()&&IU(e),_U(e);e.getAction();){if(wU(e),Kv(e.getEventType())&&e.getAction().element!==e.getTargetElement()||(this.dispatchDelegate(e.getEvent(),e.getAction().name),EU(e)))return;this.actionResolver.resolveParentAction(e.eventInfo)}}};function _U(n){let e=n.getEvent(),t=n.getEvent().stopPropagation.bind(e),r=()=>{e[KA]=!0,t()};To(e,"stopPropagation",r),To(e,"stopImmediatePropagation",r)}function EU(n){return!!n.getEvent()[KA]}function IU(n){let e=n.getEvent(),t=n.getTargetElement(),r=e.preventDefault.bind(e);To(e,"target",t),To(e,"eventPhase",Yv.REPLAY),To(e,"preventDefault",()=>{throw r(),new Error(yU+"")}),To(e,"composedPath",()=>{throw new Error(vU+"")})}function wU(n){let e=n.getEvent(),t=n.getAction()?.element;t&&To(e,"currentTarget",t,{configurable:!0})}function To(n,e,t,{configurable:r=!1}={}){Object.defineProperty(n,e,{value:t,configurable:r})}function QA(n,e){n.ecrd(t=>{e.dispatch(t)},WA.I_AM_THE_JSACTION_FRAMEWORK)}function TU(n){return n?.q??[]}function DU(n){n&&(FA(n.c,n.et,n.h),FA(n.c,n.etc,n.h,!0))}function FA(n,e,t,r){for(let i=0;i<e.length;i++)n.removeEventListener(e[i],t,r)}var bU=!1,YA=(()=>{class n{static MOUSE_SPECIAL_SUPPORT=bU;containerManager;eventHandlers={};browserEventTypeToExtraEventTypes={};dispatcher=null;queuedEventInfos=[];constructor(t){this.containerManager=t}handleEvent(t,r,i){let o=hU(t,r,r.target,i,Date.now());this.handleEventInfo(o)}handleEventInfo(t){if(!this.dispatcher){HA(t,!0),this.queuedEventInfos?.push(t);return}this.dispatcher(t)}addEvent(t,r,i){if(t in this.eventHandlers||!this.containerManager||!n.MOUSE_SPECIAL_SUPPORT&&Yj.indexOf(t)>=0)return;let o=(a,u,l)=>{this.handleEvent(a,u,l)};this.eventHandlers[t]=o;let s=Jj(r||t);if(s!==t){let a=this.browserEventTypeToExtraEventTypes[s]||[];a.push(t),this.browserEventTypeToExtraEventTypes[s]=a}this.containerManager.addEventListener(s,a=>u=>{o(t,u,a)},i)}replayEarlyEvents(t=window._ejsa){t&&(this.replayEarlyEventInfos(t.q),DU(t),delete window._ejsa)}replayEarlyEventInfos(t){for(let r=0;r<t.length;r++){let i=t[r],o=this.getEventTypesForBrowserEventType(i.eventType);for(let s=0;s<o.length;s++){let a=GA(i);Qv(a,o[s]),this.handleEventInfo(a)}}}getEventTypesForBrowserEventType(t){let r=[];return this.eventHandlers[t]&&r.push(t),this.browserEventTypeToExtraEventTypes[t]&&r.push(...this.browserEventTypeToExtraEventTypes[t]),r}handler(t){return this.eventHandlers[t]}cleanUp(){this.containerManager?.cleanUp(),this.containerManager=null,this.eventHandlers={},this.browserEventTypeToExtraEventTypes={},this.dispatcher=null,this.queuedEventInfos=[]}registerDispatcher(t,r){this.ecrd(t,r)}ecrd(t,r){if(this.dispatcher=t,this.queuedEventInfos?.length){for(let i=0;i<this.queuedEventInfos.length;i++)this.handleEventInfo(this.queuedEventInfos[i]);this.queuedEventInfos=null}}}return n})();function ZA(n,e=window){return TU(e._ejsas?.[n])}function Zv(n,e=window){e._ejsas&&(e._ejsas[n]=void 0)}var oR=Symbol("InputSignalNode#UNSET"),tB=ae(k({},Jl),{transformFn:void 0,applyValueToInputSignal(n,e){cs(n,e)}});function sR(n,e){let t=Object.create(tB);t.value=n,t.transformFn=e?.transform;function r(){if(os(t),t.value===oR){let i=null;throw new $(-950,i)}return t.value}return r[bt]=t,r}var nB=new j("");nB.__NG_ELEMENT_ID__=n=>{let e=Lt();if(e===null)throw new $(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new $(204,!1)};function JA(n,e){return sR(n,e)}function rB(n){return sR(oR,n)}var aR=(JA.required=rB,JA);var Jv=new j(""),iB=new j("");function tu(n){return!n.moduleRef}function oB(n){let e=tu(n)?n.r3Injector:n.moduleRef.injector,t=e.get(ve);return t.run(()=>{tu(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Gt),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),tu(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Jv);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Jv);s.add(o),n.moduleRef.onDestroy(()=>{Fc(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return aB(r,t,()=>{let o=e.get(Mn),s=o.add(),a=e.get(Vv);return a.runInitializers(),a.donePromise.then(()=>{let u=e.get(jh,Xc);if(EA(u||Xc),!e.get(iB,!0))return tu(n)?e.get(Rt):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(tu(n)){let h=e.get(Rt);return n.rootComponent!==void 0&&h.bootstrap(n.rootComponent),h}else return sB?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var sB;function aB(n,e,t){try{let r=t();return fi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var Gh=null;function cB(n=[],e){return Fe.create({name:e,providers:[{provide:Tc,useValue:"platform"},{provide:Jv,useValue:new Set([()=>Gh=null])},...n]})}function uB(n=[]){if(Gh)return Gh;let e=cB(n);return Gh=e,fA(),lB(e),e}function lB(n){let e=n.get(Ih,null);qe(n,()=>{e?.forEach(t=>t())})}function r_(){return!1}var zs=(()=>{class n{static __NG_ELEMENT_ID__=dB}return n})();function dB(n){return hB(Lt(),Se(),(n&16)===16)}function hB(n,e,t){if(Dr(n)&&!t){let r=wn(n.index,e);return new li(r,r)}else if(n.type&175){let r=e[zt];return new li(r,e)}return null}var Xv=class{constructor(){}supports(e){return xv(e)}create(e){return new e_(e)}},fB=(n,e)=>e,e_=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||fB}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<XA(r,i,o)?t:r,a=XA(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let y=m<o.length?o[m]:o[m]=0,w=y+m;h<=w&&w<l&&(o[m]=y+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!xv(e))throw new $(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,ZS(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new t_(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Kh),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Kh),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},t_=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},n_=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Kh=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new n_,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function XA(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function eR(){return new i_([new Xv])}var i_=(()=>{class n{factories;static \u0275prov=H({token:n,providedIn:"root",factory:eR});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=A(n,{optional:!0,skipSelf:!0});return n.create(t,r||eR())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new $(901,!1)}}return n})();function cR(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;Ee(8);try{let o=i?.injector??uB(r),s=[MA({}),{provide:$n,useExisting:Bv},mC,...t||[]],a=new Bc({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return oB({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Ee(9)}}var qh=new WeakSet,tR="",Wh=[];function nR(n){return n.get(av,k0)}function uR(){let n=[{provide:av,useFactory:()=>{let e=!0;{let t=A(Wn);e=!!window._ejsas?.[t]}return e&&Sr("NgEventReplay"),e}}];return n.push({provide:yn,useValue:()=>{let e=A(Rt),{injector:t}=e;if(!qh.has(e)){let r=A(cv);if(nR(t)){H0();let i=t.get(Wn),o=B0(i,(s,a,u)=>{s.nodeType===Node.ELEMENT_NODE&&(L0(s,a,u),V0(s,r))});e.onDestroy(o)}}},multi:!0},{provide:pi,useFactory:()=>{let e=A(Rt),{injector:t}=e;return()=>{if(!nR(t)||qh.has(e))return;qh.add(e);let r=t.get(Wn);e.onDestroy(()=>{qh.delete(e),Zv(r)}),e.whenStable().then(()=>{if(e.destroyed)return;let i=t.get(U0);pB(i,t);let o=t.get(cv);o.get(tR)?.forEach(j0),o.delete(tR);let s=i.instance;Y0(t)?e.onDestroy(()=>s.cleanUp()):s.cleanUp()})}},multi:!0}),n}var pB=(n,e)=>{let t=e.get(Wn),r=window._ejsas[t],i=n.instance=new YA(new Hh(r.c));for(let a of r.et)i.addEvent(a);for(let a of r.etc)i.addEvent(a);let o=ZA(t);i.replayEarlyEventInfos(o),Zv(t);let s=new zh(a=>{gB(e,a,a.currentTarget)});QA(i,s)};function gB(n,e,t){let r=(t&&t.getAttribute(qc))??"";/d\d+/.test(r)?mB(r,n,e,t):e.eventPhase===Yv.REPLAY&&uv(e,t)}function mB(n,e,t,r){Wh.push({event:t,currentTarget:r}),mA(e,n,yB)}function yB(n){let e=[...Wh],t=new Set(n);Wh=[];for(let{event:r,currentTarget:i}of e){let o=i.getAttribute(qc);t.has(o)?uv(r,i):Wh.push({event:r,currentTarget:i})}}var rR=!1;function vB(){rR||(rR=!0,W0(),vA(),RA(),_A(),uA(),iA(),HS(),DS())}function _B(n){return n.whenStable()}function lR(){let n=[{provide:zc,useFactory:()=>{let e=!0;return e=!!A(vo,{optional:!0})?.get(lv,null),e&&Sr("NgHydration"),e}},{provide:yn,useValue:()=>{US(!1),A(zc)&&(X0(Hc()),vB())},multi:!0}];return n.push({provide:sv,useFactory:()=>A(zc)},{provide:pi,useFactory:()=>{if(A(zc)){let e=A(Rt);return()=>{_B(e).then(()=>{e.destroyed||Pv(e)})}}return()=>{}},multi:!0}),yt(n)}function Qh(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var fR=null;function Dn(){return fR}function o_(n){fR??=n}var ru=class{},s_=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>A(pR),providedIn:"platform"})}return n})();var pR=(()=>{class n extends s_{_location;_history;_doc=A(tt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Dn().getBaseHref(this._doc)}onPopState(t){let r=Dn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Dn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function gR(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function dR(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function mi(n){return n&&n[0]!=="?"?`?${n}`:n}var Yh=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>A(yR),providedIn:"root"})}return n})(),mR=new j(""),yR=(()=>{class n extends Yh{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??A(tt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return gR(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+mi(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+mi(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+mi(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(te(s_),te(mR,8))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),qs=(()=>{class n{_subject=new Xe;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=wB(dR(hR(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+mi(r))}normalize(t){return n.stripTrailingSlash(IB(this._basePath,hR(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+mi(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+mi(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=mi;static joinWithSlash=gR;static stripTrailingSlash=dR;static \u0275fac=function(r){return new(r||n)(te(Yh))};static \u0275prov=H({token:n,factory:()=>EB(),providedIn:"root"})}return n})();function EB(){return new qs(te(Yh))}function IB(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function hR(n){return n.replace(/\/index.html$/,"")}function wB(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Zh=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Xh=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Zh(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),vR(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);vR(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(ee(Io),ee(Wc),ee(i_))};static \u0275dir=xe({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function vR(n,e){n.context.$implicit=e.item}var Ar=(()=>{class n{_viewContainer;_context=new Jh;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){_R(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){_R(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(ee(Io),ee(Wc))};static \u0275dir=xe({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Jh=class{$implicit=null;ngIf=null};function _R(n,e){if(n&&!n.createEmbeddedView)throw new $(2020,!1)}var Yn=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=hi({type:n});static \u0275inj=Ir({})}return n})();function a_(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var iu=class{};var ER="browser";var ou=class{_doc;constructor(e){this._doc=e}manager},tf=(()=>{class n extends ou{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(te(tt))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),rf=new j(""),h_=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof tf));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof tf);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new $(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(te(rf),te(ve))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),c_="ng-app-id";function IR(n){for(let e of n)e.remove()}function wR(n,e){let t=e.createElement("style");return t.textContent=n,t}function TB(n,e,t,r){let i=n.head?.querySelectorAll(`style[${c_}="${e}"],link[${c_}="${e}"]`);if(i)for(let o of i)o.removeAttribute(c_),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function l_(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var f_=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,TB(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,wR);r?.forEach(i=>this.addUsage(i,this.external,l_))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(IR(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])IR(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,wR(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,l_(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(te(tt),te(Wn),te(wh,8),te(yo))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),u_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},p_=/%COMP%/g;var DR="%COMP%",DB=`_nghost-${DR}`,bB=`_ngcontent-${DR}`,CB=!0,SB=new j("",{providedIn:"root",factory:()=>CB});function AB(n){return bB.replace(p_,n)}function RB(n){return DB.replace(p_,n)}function bR(n,e){return e.map(t=>t.replace(p_,n))}var g_=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,u=null,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=u,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new su(t,s,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof nf?i.applyToHost(t):i instanceof au&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case Cr.Emulated:o=new nf(u,l,r,this.appId,h,s,a,p,m);break;case Cr.ShadowDom:return new d_(u,l,t,r,s,a,this.nonce,p,m);default:o=new au(u,l,r,h,s,a,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(te(h_),te(f_),te(Wn),te(SB),te(tt),te(ve),te(wh),te(_o,8))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),su=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(u_[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(TR(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(TR(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new $(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=u_[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=u_[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Gn.DashCase|Gn.Important)?e.style.setProperty(t,r,i&Gn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Gn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Dn().getGlobalEventTarget(this.doc,e),!e))throw new $(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function TR(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var d_=class extends su{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=bR(i.id,h);for(let m of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=m,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let m of p){let y=l_(m,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},au=class extends su{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?bR(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Fs.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},nf=class extends au{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,t,r,o,s,a,u,l,h),this.contentAttr=AB(h),this.hostAttr=RB(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var of=class n extends ru{supportsDOMEvents=!0;static makeCurrent(){o_(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=NB();return t==null?null:MB(t)}resetBaseElement(){cu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return a_(document.cookie,e)}},cu=null;function NB(){return cu=cu||document.head.querySelector("base"),cu?cu.getAttribute("href"):null}function MB(n){return new URL(n,document.baseURI).pathname}var PB=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),CR=["alt","control","meta","shift"],xB={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},OB={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},SR=(()=>{class n extends ou{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Dn().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),CR.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=xB[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),CR.forEach(s=>{if(s!==i){let a=OB[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(te(tt))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();function m_(n,e,t){let r=k({rootComponent:n,platformRef:t?.platformRef},kB(e));return cR(r)}function kB(n){return{appProviders:[...UB,...n?.providers??[]],platformProviders:jB}}function FB(){of.makeCurrent()}function LB(){return new Rn}function VB(){return rv(document),document}var jB=[{provide:yo,useValue:ER},{provide:Ih,useValue:FB,multi:!0},{provide:tt,useFactory:VB}];var UB=[{provide:Tc,useValue:"root"},{provide:Rn,useFactory:LB},{provide:rf,useClass:tf,multi:!0,deps:[tt]},{provide:rf,useClass:SR,multi:!0,deps:[tt]},g_,f_,h_,{provide:fo,useExisting:g_},{provide:iu,useClass:PB},[]];var uu=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=t.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var BB="X-Request-URL",$B="text/plain",HB="application/json",ase=`${HB}, ${$B}, */*`;var v_=(function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n})(v_||{}),y_=class{headers;status;statusText;url;ok;type;redirected;constructor(e,t=200,r="OK"){this.headers=e.headers||new uu,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.redirected=e.redirected,this.ok=this.status>=200&&this.status<300}};var sf=class n extends y_{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=v_.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected})}};var AR=new j("");var cse=RegExp(`^${BB}:`,"m");var zB=new j(""),qB="b",GB="h",WB="s",KB="st",QB="u",YB="rt",__=new j(""),ZB=["GET","HEAD"];function JB(n,e){let y=A(__),{isCacheActive:t}=y,r=KD(y,["isCacheActive"]),{transferCache:i,method:o}=n;if(!t||i===!1||o==="POST"&&!r.includePostRequests&&!i||o!=="POST"&&!ZB.includes(o)||!r.includeRequestsWithAuthHeaders&&XB(n)||r.filter?.(n)===!1)return e(n);let s=A(vo);if(A(zB,{optional:!0}))throw new $(2803,!1);let u=n.url,l=e$(n,u),h=s.get(l,null),p=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(p=i.includeHeaders),h){let{[qB]:w,[YB]:R,[GB]:N,[WB]:V,[KB]:Q,[QB]:Z}=h,_e=w;switch(R){case"arraybuffer":_e=new TextEncoder().encode(w).buffer;break;case"blob":_e=new Blob([w]);break}let ft=new uu(N);return J(new sf({body:_e,headers:ft,status:V,statusText:Q,url:Z}))}return e(n)}function XB(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function RR(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function e$(n,e){let{params:t,method:r,responseType:i}=n,o=RR(t),s=n.serializeBody();s instanceof URLSearchParams?s=RR(s):typeof s!="string"&&(s="");let a=[r,i,e,s,o].join("|"),u=t$(a);return u}function t$(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function NR(n){return[{provide:__,useFactory:()=>(Sr("NgHttpTransferCache"),k({isCacheActive:!0},n))},{provide:AR,useValue:JB,multi:!0},{provide:pi,multi:!0,useFactory:()=>{let e=A(Rt),t=A(__);return()=>{e.whenStable().then(()=>{t.isCacheActive=!1})}}}]}var MR=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(te(tt))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var af=(function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n[n.IncrementalHydration=4]="IncrementalHydration",n})(af||{});function n$(n,e=[],t={}){return{\u0275kind:n,\u0275providers:e}}function PR(){return n$(af.EventReplay,uR())}function xR(...n){let e=[],t=new Set;for(let{\u0275providers:i,\u0275kind:o}of n)t.add(o),i.length&&e.push(i);let r=t.has(af.HttpTransferCacheOptions);return yt([[],[],lR(),t.has(af.NoHttpTransferCache)||r?[]:NR({}),e])}var re="primary",Du=Symbol("RouteTitle"),D_=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Co(n){return new D_(n)}function BR(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function i$(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Zn(n[t],e[t]))return!1;return!0}function Zn(n,e){let t=n?b_(n):void 0,r=e?b_(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!$R(n[i],e[i]))return!1;return!0}function b_(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function $R(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function HR(n){return n.length>0?n[n.length-1]:null}function Mr(n){return gm(n)?n:fi(n)?Pe(Promise.resolve(n)):J(n)}var o$={exact:qR,subset:GR},zR={exact:s$,subset:a$,ignored:()=>!0};function OR(n,e,t){return o$[t.paths](n.root,e.root,t.matrixParams)&&zR[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function s$(n,e){return Zn(n,e)}function qR(n,e,t){if(!Do(n.segments,e.segments)||!lf(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!qR(n.children[r],e.children[r],t))return!1;return!0}function a$(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>$R(n[t],e[t]))}function GR(n,e,t){return WR(n,e,e.segments,t)}function WR(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Do(i,t)||e.hasChildren()||!lf(i,t,r))}else if(n.segments.length===t.length){if(!Do(n.segments,t)||!lf(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!GR(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Do(n.segments,i)||!lf(n.segments,i,r)||!n.children[re]?!1:WR(n.children[re],e,o,r)}}function lf(n,e,t){return e.every((r,i)=>zR[t](n[i].parameters,r.parameters))}var Xn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Ie([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Co(this.queryParams),this._queryParamMap}toString(){return l$.serialize(this)}},Ie=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return df(this)}},yi=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Co(this.parameters),this._parameterMap}toString(){return QR(this)}};function c$(n,e){return Do(n,e)&&n.every((t,r)=>Zn(t.parameters,e[r].parameters))}function Do(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function u$(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===re&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==re&&(t=t.concat(e(i,r)))}),t}var bu=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>new So,providedIn:"root"})}return n})(),So=class{parse(e){let t=new S_(e);return new Xn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${lu(e.root,!0)}`,r=f$(e.queryParams),i=typeof e.fragment=="string"?`#${d$(e.fragment)}`:"";return`${t}${r}${i}`}},l$=new So;function df(n){return n.segments.map(e=>QR(e)).join("/")}function lu(n,e){if(!n.hasChildren())return df(n);if(e){let t=n.children[re]?lu(n.children[re],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==re&&r.push(`${i}:${lu(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=u$(n,(r,i)=>i===re?[lu(n.children[re],!1)]:[`${i}:${lu(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[re]!=null?`${df(n)}/${t[0]}`:`${df(n)}/(${t.join("//")})`}}function KR(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function cf(n){return KR(n).replace(/%3B/gi,";")}function d$(n){return encodeURI(n)}function C_(n){return KR(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function hf(n){return decodeURIComponent(n)}function kR(n){return hf(n.replace(/\+/g,"%20"))}function QR(n){return`${C_(n.path)}${h$(n.parameters)}`}function h$(n){return Object.entries(n).map(([e,t])=>`;${C_(e)}=${C_(t)}`).join("")}function f$(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${cf(t)}=${cf(i)}`).join("&"):`${cf(t)}=${cf(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var p$=/^[^\/()?;#]+/;function E_(n){let e=n.match(p$);return e?e[0]:""}var g$=/^[^\/()?;=#]+/;function m$(n){let e=n.match(g$);return e?e[0]:""}var y$=/^[^=?&#]+/;function v$(n){let e=n.match(y$);return e?e[0]:""}var _$=/^[^&#]+/;function E$(n){let e=n.match(_$);return e?e[0]:""}var S_=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ie([],{}):new Ie([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[re]=new Ie(e,t)),r}parseSegment(){let e=E_(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new $(4009,!1);return this.capture(e),new yi(hf(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=m$(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=E_(this.remaining);i&&(r=i,this.capture(r))}e[hf(t)]=hf(r)}parseQueryParam(e){let t=v$(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=E$(this.remaining);s&&(r=s,this.capture(r))}let i=kR(t),o=kR(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=E_(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new $(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=re);let s=this.parseChildren();t[o??re]=Object.keys(s).length===1&&s[re]?s[re]:new Ie([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new $(4011,!1)}};function YR(n){return n.segments.length>0?new Ie([],{[re]:n}):n}function ZR(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=ZR(i);if(r===re&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Ie(n.segments,e);return I$(t)}function I$(n){if(n.numberOfChildren===1&&n.children[re]){let e=n.children[re];return new Ie(n.segments.concat(e.segments),e.children)}return n}function Ys(n){return n instanceof Xn}function JR(n,e,t=null,r=null){let i=XR(n);return eN(i,e,t,r)}function XR(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new Ie(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=YR(r);return e??i}function eN(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return I_(i,i,i,t,r);let o=w$(e);if(o.toRoot())return I_(i,i,new Ie([],{}),t,r);let s=T$(o,i,n),a=s.processChildren?hu(s.segmentGroup,s.index,o.commands):nN(s.segmentGroup,s.index,o.commands);return I_(i,s.segmentGroup,a,t,r)}function ff(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function gu(n){return typeof n=="object"&&n!=null&&n.outlets}function I_(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=tN(n,e,t);let a=YR(ZR(s));return new Xn(a,o,i)}function tN(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=tN(o,e,t)}),new Ie(n.segments,r)}var pf=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ff(r[0]))throw new $(4003,!1);let i=r.find(gu);if(i&&i!==HR(r))throw new $(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function w$(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new pf(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new pf(t,e,r)}var Ks=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function T$(n,e,t){if(n.isAbsolute)return new Ks(e,!0,0);if(!t)return new Ks(e,!1,NaN);if(t.parent===null)return new Ks(t,!0,0);let r=ff(n.commands[0])?0:1,i=t.segments.length-1+r;return D$(t,i,n.numberOfDoubleDots)}function D$(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new $(4005,!1);i=r.segments.length}return new Ks(r,!1,i-o)}function b$(n){return gu(n[0])?n[0].outlets:{[re]:n}}function nN(n,e,t){if(n??=new Ie([],{}),n.segments.length===0&&n.hasChildren())return hu(n,e,t);let r=C$(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Ie(n.segments.slice(0,r.pathIndex),{});return o.children[re]=new Ie(n.segments.slice(r.pathIndex),n.children),hu(o,0,i)}else return r.match&&i.length===0?new Ie(n.segments,{}):r.match&&!n.hasChildren()?A_(n,e,t):r.match?hu(n,0,i):A_(n,e,t)}function hu(n,e,t){if(t.length===0)return new Ie(n.segments,{});{let r=b$(t),i={};if(Object.keys(r).some(o=>o!==re)&&n.children[re]&&n.numberOfChildren===1&&n.children[re].segments.length===0){let o=hu(n.children[re],e,t);return new Ie(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=nN(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ie(n.segments,i)}}function C$(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(gu(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!LR(u,l,s))return o;r+=2}else{if(!LR(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function A_(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(gu(o)){let u=S$(o.outlets);return new Ie(r,u)}if(i===0&&ff(t[0])){let u=n.segments[e];r.push(new yi(u.path,FR(t[0]))),i++;continue}let s=gu(o)?o.outlets[re]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&ff(a)?(r.push(new yi(s,FR(a))),i+=2):(r.push(new yi(s,{})),i++)}return new Ie(r,{})}function S$(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=A_(new Ie([],{}),0,r))}),e}function FR(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function LR(n,e,t){return n==t.path&&Zn(e,t.parameters)}var fu="imperative",ut=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(ut||{}),fn=class{id;url;constructor(e,t){this.id=e,this.url=t}},Ao=class extends fn{type=ut.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Rr=class extends fn{urlAfterRedirects;type=ut.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},jt=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(jt||{}),mu=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(mu||{}),Jn=class extends fn{reason;code;type=ut.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Nr=class extends fn{reason;code;type=ut.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Zs=class extends fn{error;target;type=ut.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},yu=class extends fn{urlAfterRedirects;state;type=ut.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gf=class extends fn{urlAfterRedirects;state;type=ut.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},mf=class extends fn{urlAfterRedirects;state;shouldActivate;type=ut.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},yf=class extends fn{urlAfterRedirects;state;type=ut.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vf=class extends fn{urlAfterRedirects;state;type=ut.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_f=class{route;type=ut.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Ef=class{route;type=ut.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},If=class{snapshot;type=ut.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},wf=class{snapshot;type=ut.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Tf=class{snapshot;type=ut.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Df=class{snapshot;type=ut.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var vu=class{},Js=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function A$(n){return!(n instanceof vu)&&!(n instanceof Js)}function R$(n,e){return n.providers&&!n._injector&&(n._injector=Bs(n.providers,e,`Route: ${n.path}`)),n._injector??e}function kn(n){return n.outlet||re}function N$(n,e){let t=n.filter(r=>kn(r)===e);return t.push(...n.filter(r=>kn(r)!==e)),t}function ta(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var bf=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return ta(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new na(this.rootInjector)}},na=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new bf(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(te(He))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Cf=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=R_(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=R_(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=N_(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return N_(e,this._root).map(t=>t.value)}};function R_(n,e){if(n===e.value)return e;for(let t of e.children){let r=R_(n,t);if(r)return r}return null}function N_(n,e){if(n===e.value)return[e];for(let t of e.children){let r=N_(n,t);if(r.length)return r.unshift(e),r}return[]}var hn=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Ws(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var _u=class extends Cf{snapshot;constructor(e,t){super(e),this.snapshot=t,V_(this,e)}toString(){return this.snapshot.toString()}};function rN(n){let e=M$(n),t=new gt([new yi("",{})]),r=new gt({}),i=new gt({}),o=new gt({}),s=new gt(""),a=new vi(t,r,o,s,i,re,n,e.root);return a.snapshot=e.root,new _u(new hn(a,[]),e)}function M$(n){let e={},t={},r={},o=new bo([],e,r,"",t,re,n,null,{});return new Eu("",new hn(o,[]))}var vi=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ue(l=>l[Du]))??J(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ue(e=>Co(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ue(e=>Co(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Sf(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:k(k({},e.params),n.params),data:k(k({},e.data),n.data),resolve:k(k(k(k({},n.data),e.data),i?.data),n._resolvedData)}:r={params:k({},n.params),data:k({},n.data),resolve:k(k({},n.data),n._resolvedData??{})},i&&oN(i)&&(r.resolve[Du]=i.title),r}var bo=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Du]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Co(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Co(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Eu=class extends Cf{url;constructor(e,t){super(t),this.url=e,V_(this,t)}toString(){return iN(this._root)}};function V_(n,e){e.value._routerState=n,e.children.forEach(t=>V_(n,t))}function iN(n){let e=n.children.length>0?` { ${n.children.map(iN).join(", ")} } `:"";return`${n.value}${e}`}function w_(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Zn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Zn(e.params,t.params)||n.paramsSubject.next(t.params),i$(e.url,t.url)||n.urlSubject.next(t.url),Zn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function M_(n,e){let t=Zn(n.params,e.params)&&c$(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||M_(n.parent,e.parent))}function oN(n){return typeof n.title=="string"||n.title===null}var sN=new j(""),Cu=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=re;activateEvents=new Ge;deactivateEvents=new Ge;attachEvents=new Ge;detachEvents=new Ge;routerOutletData=aR();parentContexts=A(na);location=A(Io);changeDetector=A(zs);inputBinder=A(Mf,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new $(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new $(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new $(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new $(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new P_(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=xe({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[mo]})}return n})(),P_=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===vi?this.route:e===na?this.childContexts:e===sN?this.outletData:this.parent.get(e,t)}},Mf=new j("");var j_=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=un({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Hs(0,"router-outlet")},dependencies:[Cu],encapsulation:2})}return n})();function U_(n){let e=n.children&&n.children.map(U_),t=e?ae(k({},n),{children:e}):k({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==re&&(t.component=j_),t}function P$(n,e,t){let r=Iu(n,e._root,t?t._root:void 0);return new _u(r,e)}function Iu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=x$(n,e,t);return new hn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Iu(n,a)),s}}let r=O$(e.value),i=e.children.map(o=>Iu(n,o));return new hn(r,i)}}function x$(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Iu(n,r,i);return Iu(n,r)})}function O$(n){return new vi(new gt(n.url),new gt(n.params),new gt(n.queryParams),new gt(n.fragment),new gt(n.data),n.outlet,n.component,n)}var Xs=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},aN="ngNavigationCancelingError";function Af(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Ys(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=cN(!1,jt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function cN(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[aN]=!0,t.cancellationCode=e,t}function k$(n){return uN(n)&&Ys(n.url)}function uN(n){return!!n&&n[aN]}var F$=(n,e,t,r)=>ue(i=>(new x_(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),x_=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),w_(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Ws(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ws(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ws(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Ws(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Df(o.value.snapshot))}),e.children.length&&this.forwardEvent(new wf(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(w_(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),w_(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Rf=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Qs=class{component;route;constructor(e,t){this.component=e,this.route=t}};function L$(n,e,t){let r=n._root,i=e?e._root:null;return du(r,i,t,[r.value])}function V$(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ra(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!xm(n)?n:e.get(n):r}function du(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ws(e);return n.children.forEach(s=>{j$(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>pu(a,t.getContext(s),i)),i}function j$(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=U$(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Rf(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?du(n,e,a?a.children:null,r,i):du(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Qs(a.outlet.component,s))}else s&&pu(e,a,i),i.canActivateChecks.push(new Rf(r)),o.component?du(n,null,a?a.children:null,r,i):du(n,null,t,r,i);return i}function U$(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Do(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Do(n.url,e.url)||!Zn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!M_(n,e)||!Zn(n.queryParams,e.queryParams);case"paramsChange":default:return!M_(n,e)}}function pu(n,e,t){let r=Ws(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?pu(s,e.children.getContext(o),t):pu(s,null,t):pu(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Qs(e.outlet.component,i)):t.canDeactivateChecks.push(new Qs(null,i)):t.canDeactivateChecks.push(new Qs(null,i))}function Su(n){return typeof n=="function"}function B$(n){return typeof n=="boolean"}function $$(n){return n&&Su(n.canLoad)}function H$(n){return n&&Su(n.canActivate)}function z$(n){return n&&Su(n.canActivateChild)}function q$(n){return n&&Su(n.canDeactivate)}function G$(n){return n&&Su(n.canMatch)}function lN(n){return n instanceof gr||n?.name==="EmptyError"}var uf=Symbol("INITIAL_VALUE");function ea(){return Ht(n=>wd(n.map(e=>e.pipe(mr(1),bd(uf)))).pipe(ue(e=>{for(let t of e)if(t!==!0){if(t===uf)return uf;if(t===!1||W$(t))return t}return!0}),Xt(e=>e!==uf),mr(1)))}function W$(n){return Ys(n)||n instanceof Xs}function K$(n,e){return et(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?J(ae(k({},t),{guardsResult:!0})):Q$(s,r,i,n).pipe(et(a=>a&&B$(a)?Y$(r,o,n,e):J(a)),ue(a=>ae(k({},t),{guardsResult:a})))})}function Q$(n,e,t,r){return Pe(n).pipe(et(i=>tH(i.component,i.route,t,e,r)),yr(i=>i!==!0,!0))}function Y$(n,e,t,r){return Pe(e).pipe(Is(i=>Es(J$(i.route.parent,r),Z$(i.route,r),eH(n,i.path,t),X$(n,i.route,t))),yr(i=>i!==!0,!0))}function Z$(n,e){return n!==null&&e&&e(new Tf(n)),J(!0)}function J$(n,e){return n!==null&&e&&e(new If(n)),J(!0)}function X$(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return J(!0);let i=r.map(o=>mc(()=>{let s=ta(e)??t,a=ra(o,s),u=H$(a)?a.canActivate(e,n):qe(s,()=>a(e,n));return Mr(u).pipe(yr())}));return J(i).pipe(ea())}function eH(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>V$(s)).filter(s=>s!==null).map(s=>mc(()=>{let a=s.guards.map(u=>{let l=ta(s.node)??t,h=ra(u,l),p=z$(h)?h.canActivateChild(r,n):qe(l,()=>h(r,n));return Mr(p).pipe(yr())});return J(a).pipe(ea())}));return J(o).pipe(ea())}function tH(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return J(!0);let s=o.map(a=>{let u=ta(e)??i,l=ra(a,u),h=q$(l)?l.canDeactivate(n,e,t,r):qe(u,()=>l(n,e,t,r));return Mr(h).pipe(yr())});return J(s).pipe(ea())}function nH(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return J(!0);let o=i.map(s=>{let a=ra(s,n),u=$$(a)?a.canLoad(e,t):qe(n,()=>a(e,t));return Mr(u)});return J(o).pipe(ea(),dN(r))}function dN(n){return rd(at(e=>{if(typeof e!="boolean")throw Af(n,e)}),ue(e=>e===!0))}function rH(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return J(!0);let o=i.map(s=>{let a=ra(s,n),u=G$(a)?a.canMatch(e,t):qe(n,()=>a(e,t));return Mr(u)});return J(o).pipe(ea(),dN(r))}var wu=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Tu=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Gs(n){return _s(new wu(n))}function iH(n){return _s(new $(4e3,!1))}function oH(n){return _s(cN(!1,jt.GuardRejected))}var O_=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return J(r);if(i.numberOfChildren>1||!i.children[re])return iH(`${e.redirectTo}`);i=i.children[re]}}applyRedirectCommands(e,t,r,i,o){return sH(t,i,o).pipe(ue(s=>{if(s instanceof Xn)throw new Tu(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Tu(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Xn(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Ie(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new $(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function sH(n,e,t){if(typeof n=="string")return J(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:h,title:p}=e;return Mr(qe(t,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p})))}var k_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function aH(n,e,t,r,i){let o=hN(n,e,t);return o.matched?(r=R$(e,r),rH(r,e,t,i).pipe(ue(s=>s===!0?o:k({},k_)))):J(o)}function hN(n,e,t){if(e.path==="**")return cH(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?k({},k_):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||BR)(t,n,e);if(!i)return k({},k_);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?k(k({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function cH(n){return{matched:!0,parameters:n.length>0?HR(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function VR(n,e,t,r){return t.length>0&&dH(n,t,r)?{segmentGroup:new Ie(e,lH(r,new Ie(t,n.children))),slicedSegments:[]}:t.length===0&&hH(n,t,r)?{segmentGroup:new Ie(n.segments,uH(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ie(n.segments,n.children),slicedSegments:t}}function uH(n,e,t,r){let i={};for(let o of t)if(Pf(n,e,o)&&!r[kn(o)]){let s=new Ie([],{});i[kn(o)]=s}return k(k({},r),i)}function lH(n,e){let t={};t[re]=e;for(let r of n)if(r.path===""&&kn(r)!==re){let i=new Ie([],{});t[kn(r)]=i}return t}function dH(n,e,t){return t.some(r=>Pf(n,e,r)&&kn(r)!==re)}function hH(n,e,t){return t.some(r=>Pf(n,e,r))}function Pf(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function fH(n,e,t){return e.length===0&&!n.children[t]}var F_=class{};function pH(n,e,t,r,i,o,s="emptyOnly"){return new L_(n,e,t,r,i,s,o).recognize()}var gH=31,L_=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new O_(this.urlSerializer,this.urlTree)}noMatchError(e){return new $(4002,`'${e.segmentGroup}'`)}recognize(){let e=VR(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ue(({children:t,rootSnapshot:r})=>{let i=new hn(r,t),o=new Eu("",i),s=JR(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new bo([],Object.freeze({}),Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),re,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,re,t).pipe(ue(r=>({children:r,rootSnapshot:t})),ti(r=>{if(r instanceof Tu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof wu?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(ue(s=>s instanceof hn?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Pe(o).pipe(Is(s=>{let a=r.children[s],u=N$(t,s);return this.processSegmentGroup(e,u,a,s,i)}),Dd((s,a)=>(s.push(...a),s)),ni(null),ym(),et(s=>{if(s===null)return Gs(r);let a=fN(s);return mH(a),J(a)}))}processSegment(e,t,r,i,o,s,a){return Pe(t).pipe(Is(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(ti(l=>{if(l instanceof wu)return J(null);throw l}))),yr(u=>!!u),ti(u=>{if(lN(u))return fH(r,i,o)?J(new F_):Gs(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return kn(r)!==s&&(s===re||!Pf(i,o,r))?Gs(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):Gs(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=hN(t,i,o);if(!u)return Gs(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>gH&&(this.allowRedirects=!1));let y=new bo(o,l,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,jR(i),kn(i),i.component??i._loadedComponent??null,i,UR(i)),w=Sf(y,a,this.paramsInheritanceStrategy);return y.params=Object.freeze(w.params),y.data=Object.freeze(w.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e).pipe(Ht(N=>this.applyRedirects.lineralizeSegments(i,N)),et(N=>this.processSegment(e,r,t,N.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=aH(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Ht(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ht(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=u,w=new bo(m,p,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,jR(r),kn(r),r.component??r._loadedComponent??null,r,UR(r)),R=Sf(w,s,this.paramsInheritanceStrategy);w.params=Object.freeze(R.params),w.data=Object.freeze(R.data);let{segmentGroup:N,slicedSegments:V}=VR(t,m,y,l);if(V.length===0&&N.hasChildren())return this.processChildren(h,l,N,w).pipe(ue(Z=>new hn(w,Z)));if(l.length===0&&V.length===0)return J(new hn(w,[]));let Q=kn(r)===o;return this.processSegment(h,l,N,V,Q?re:o,!0,w).pipe(ue(Z=>new hn(w,Z instanceof hn?[Z]:[])))}))):Gs(t)))}getChildConfig(e,t,r){return t.children?J({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?J({routes:t._loadedRoutes,injector:t._loadedInjector}):nH(e,t,r,this.urlSerializer).pipe(et(i=>i?this.configLoader.loadChildren(e,t).pipe(at(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):oH(t))):J({routes:[],injector:e})}};function mH(n){n.sort((e,t)=>e.value.outlet===re?-1:t.value.outlet===re?1:e.value.outlet.localeCompare(t.value.outlet))}function yH(n){let e=n.value.routeConfig;return e&&e.path===""}function fN(n){let e=[],t=new Set;for(let r of n){if(!yH(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=fN(r.children);e.push(new hn(r.value,i))}return e.filter(r=>!t.has(r))}function jR(n){return n.data||{}}function UR(n){return n.resolve||{}}function vH(n,e,t,r,i,o){return et(s=>pH(n,e,t,r,s.extractedUrl,i,o).pipe(ue(({state:a,tree:u})=>ae(k({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function _H(n,e){return et(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return J(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of pN(u))s.add(l);let a=0;return Pe(s).pipe(Is(u=>o.has(u)?EH(u,r,n,e):(u.data=Sf(u,u.parent,n).resolve,J(void 0))),at(()=>a++),ws(1),et(u=>a===s.size?J(t):Bt))})}function pN(n){let e=n.children.map(t=>pN(t)).flat();return[n,...e]}function EH(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!oN(i)&&(o[Du]=i.title),mc(()=>(n.data=Sf(n,n.parent,t).resolve,IH(o,n,e,r).pipe(ue(s=>(n._resolvedData=s,n.data=k(k({},n.data),s),null)))))}function IH(n,e,t,r){let i=b_(n);if(i.length===0)return J({});let o={};return Pe(i).pipe(et(s=>wH(n[s],e,t,r).pipe(yr(),at(a=>{if(a instanceof Xs)throw Af(new So,a);o[s]=a}))),ws(1),ue(()=>o),ti(s=>lN(s)?Bt:_s(s)))}function wH(n,e,t,r){let i=ta(e)??r,o=ra(n,i),s=o.resolve?o.resolve(e,t):qe(i,()=>o(e,t));return Mr(s)}function T_(n){return Ht(e=>{let t=n(e);return t?Pe(t).pipe(ue(()=>e)):J(e)})}var B_=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===re);return r}getResolvedTitleForRoute(t){return t.data[Du]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>A(gN),providedIn:"root"})}return n})(),gN=(()=>{class n extends B_{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(te(MR))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Au=new j("",{providedIn:"root",factory:()=>({})}),Ru=new j(""),mN=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=A(Uv);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return J(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Mr(qe(t,()=>r.loadComponent())).pipe(ue(vN),Ht(_N),at(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),yc(()=>{this.componentLoaders.delete(r)})),o=new gs(i,()=>new Xe).pipe(ps());return this.componentLoaders.set(r,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return J({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=yN(r,this.compiler,t,this.onLoadEndListener).pipe(yc(()=>{this.childrenLoaders.delete(r)})),s=new gs(o,()=>new Xe).pipe(ps());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function yN(n,e,t,r){return Mr(qe(t,()=>n.loadChildren())).pipe(ue(vN),Ht(_N),et(i=>i instanceof Lh||Array.isArray(i)?J(i):Pe(e.compileModuleAsync(i))),ue(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Ru,[],{optional:!0,self:!0}).flat()),{routes:s.map(U_),injector:o}}))}function TH(n){return n&&typeof n=="object"&&"default"in n}function vN(n){return TH(n)?n.default:n}function _N(n){return J(n)}var xf=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>A(DH),providedIn:"root"})}return n})(),DH=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),EN=new j("");var IN=new j(""),wN=(()=>{class n{currentNavigation=Wt(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Xe;transitionAbortWithErrorSubject=new Xe;configLoader=A(mN);environmentInjector=A(He);destroyRef=A(Tn);urlSerializer=A(bu);rootContexts=A(na);location=A(qs);inputBindingEnabled=A(Mf,{optional:!0})!==null;titleStrategy=A(B_);options=A(Au,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=A(xf);createViewTransition=A(EN,{optional:!0});navigationErrorHandler=A(IN,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>J(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new _f(i)),r=i=>this.events.next(new Ef(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;vt(()=>{this.transitions?.next(ae(k({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(t){return this.transitions=new gt(null),this.transitions.pipe(Xt(r=>r!==null),Ht(r=>{let i=!1;return J(r).pipe(Ht(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",jt.SupersededByNewNavigation),Bt;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?ae(k({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new Nr(o.id,this.urlSerializer.serialize(o.rawUrl),"",mu.IgnoredSameUrlNavigation)),o.resolve(!1),Bt;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return J(o).pipe(Ht(u=>(this.events.next(new Ao(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?Bt:Promise.resolve(u))),vH(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),at(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation.update(h=>(h.finalUrl=u.urlAfterRedirects,h));let l=new yu(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:l,source:h,restoredState:p,extras:m}=o,y=new Ao(u,this.urlSerializer.serialize(l),h,p);this.events.next(y);let w=rN(this.rootComponentType).snapshot;return this.currentTransition=r=ae(k({},o),{targetSnapshot:w,urlAfterRedirects:l,extras:ae(k({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(R=>(R.finalUrl=l,R)),J(r)}else return this.events.next(new Nr(o.id,this.urlSerializer.serialize(o.extractedUrl),"",mu.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Bt}),at(o=>{let s=new gf(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),ue(o=>(this.currentTransition=r=ae(k({},o),{guards:L$(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),K$(this.environmentInjector,o=>this.events.next(o)),at(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Af(this.urlSerializer,o.guardsResult);let s=new mf(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),Xt(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",jt.GuardRejected),!1)),T_(o=>{if(o.guards.canActivateChecks.length!==0)return J(o).pipe(at(s=>{let a=new yf(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Ht(s=>{let a=!1;return J(s).pipe(_H(this.paramsInheritanceStrategy,this.environmentInjector),at({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",jt.NoDataFromResolver)}}))}),at(s=>{let a=new vf(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),T_(o=>{let s=a=>{let u=[];if(a.routeConfig?.loadComponent){let l=ta(a)??this.environmentInjector;u.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(at(h=>{a.component=h}),ue(()=>{})))}for(let l of a.children)u.push(...s(l));return u};return wd(s(o.targetSnapshot.root)).pipe(ni(null),mr(1))}),T_(()=>this.afterPreactivation()),Ht(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?Pe(a).pipe(ue(()=>r)):J(r)}),ue(o=>{let s=P$(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=ae(k({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),at(()=>{this.events.next(new vu)}),F$(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),mr(1),Cd(new X(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(Xt(()=>!i&&!r.targetRouterState),at(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",jt.Aborted)}))),at({next:o=>{i=!0,this.lastSuccessfulNavigation=vt(this.currentNavigation),this.events.next(new Rr(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Cd(this.transitionAbortWithErrorSubject.pipe(at(o=>{throw o}))),yc(()=>{i||this.cancelNavigationTransition(r,"",jt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),ti(o=>{if(this.destroyed)return r.resolve(!1),Bt;if(i=!0,uN(o))this.events.next(new Jn(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),k$(o)?this.events.next(new Js(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new Zs(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=qe(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Xs){let{message:u,cancellationCode:l}=Af(this.urlSerializer,a);this.events.next(new Jn(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new Js(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return Bt}))}))}cancelNavigationTransition(t,r,i){let o=new Jn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=vt(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function bH(n){return n!==fu}var TN=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>A(CH),providedIn:"root"})}return n})(),Nf=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},CH=(()=>{class n extends Nf{static \u0275fac=(()=>{let t;return function(i){return(t||(t=On(n)))(i||n)}})();static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),DN=(()=>{class n{urlSerializer=A(bu);options=A(Au,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=A(qs);urlHandlingStrategy=A(xf);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Xn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Xn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=rN(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>A(SH),providedIn:"root"})}return n})(),SH=(()=>{class n extends DN{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Ao?this.updateStateMemento():t instanceof Nr?this.commitTransition(r):t instanceof yu?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof vu?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Jn&&t.code!==jt.SupersededByNewNavigation&&t.code!==jt.Redirect?this.restoreHistory(r):t instanceof Zs?this.restoreHistory(r,!0):t instanceof Rr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,u=k(k({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",u)}else{let a=k(k({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=On(n)))(i||n)}})();static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $_(n,e){n.events.pipe(Xt(t=>t instanceof Rr||t instanceof Jn||t instanceof Zs||t instanceof Nr),ue(t=>t instanceof Rr||t instanceof Nr?0:(t instanceof Jn?t.code===jt.Redirect||t.code===jt.SupersededByNewNavigation:!1)?2:1),Xt(t=>t!==2),mr(1)).subscribe(()=>{e()})}var AH={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},RH={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},er=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=A(Vh);stateManager=A(DN);options=A(Au,{optional:!0})||{};pendingTasks=A(Mn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=A(wN);urlSerializer=A(bu);location=A(qs);urlHandlingStrategy=A(xf);injector=A(He);_events=new Xe;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=A(TN);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=A(Ru,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!A(Mf,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new ke;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=vt(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Jn&&r.code!==jt.Redirect&&r.code!==jt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Rr)this.navigated=!0;else if(r instanceof Js){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=k({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||bH(i.source)},s);this.scheduleNavigation(a,fu,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}A$(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),fu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=k({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(u=>{this.disposed||this.injector.get(Gt)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return vt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(U_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=k(k({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=XR(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return eN(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Ys(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,fu,null,r)}navigate(t,r={skipLocationChange:!1}){return NH(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(Er(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=k({},AH):r===!1?i=k({},RH):i=r,Ys(t))return OR(this.currentUrlTree,t,i);let o=this.parseUrl(t);return OR(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return $_(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function NH(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new $(4008,!1)}var PH=new j("");function H_(n,...e){return yt([{provide:Ru,multi:!0,useValue:n},[],{provide:vi,useFactory:xH,deps:[er]},{provide:pi,multi:!0,useFactory:OH},e.map(t=>t.\u0275providers)])}function xH(n){return n.routerState.root}function OH(){let n=A(Fe);return e=>{let t=n.get(Rt);if(e!==t.components[0])return;let r=n.get(er),i=n.get(kH);n.get(FH)===1&&r.initialNavigation(),n.get(LH,null,{optional:!0})?.setUpPreloading(),n.get(PH,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var kH=new j("",{factory:()=>new Xe}),FH=new j("",{providedIn:"root",factory:()=>1});var LH=new j("");var bN=()=>{};var AN=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},jH=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Of={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,m=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(t[h],t[p],t[m],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(AN(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):jH(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new G_;let m=o<<2|a>>4;if(r.push(m),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let w=l<<6&192|p;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},G_=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},UH=function(n){let e=AN(n);return Of.encodeByteArray(e,!0)},Mu=function(n){return UH(n).replace(/\./g,"")},kf=function(n){try{return Of.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function K_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var BH=()=>K_().__FIREBASE_DEFAULTS__,$H=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},HH=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&kf(n[1]);return e&&JSON.parse(e)},Ff=()=>{try{return bN()||BH()||$H()||HH()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Q_=n=>{var e,t;return(t=(e=Ff())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},RN=n=>{let e=Q_(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Y_=()=>{var n;return(n=Ff())===null||n===void 0?void 0:n.config},Z_=n=>{var e;return(e=Ff())===null||e===void 0?void 0:e[`_${n}`]};var Ro=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function _i(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Lf(n){return(await fetch(n,{credentials:"include"})).ok}function NN(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Mu(JSON.stringify(t)),Mu(JSON.stringify(s)),""].join(".")}var Nu={};function zH(){let n={prod:[],emulator:[]};for(let e of Object.keys(Nu))Nu[e]?n.emulator.push(e):n.prod.push(e);return n}function qH(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var CN=!1;function Vf(n,e){if(typeof window>"u"||typeof document>"u"||!_i(window.location.host)||Nu[n]===e||Nu[n]||CN)return;Nu[n]=e;function t(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=zH().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{CN=!0,s()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=qH(r),y=t("text"),w=document.getElementById(y)||document.createElement("span"),R=t("learnmore"),N=document.getElementById(R)||document.createElement("a"),V=t("preprendIcon"),Q=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let Z=m.element;a(Z),h(N,R);let _e=l();u(Q,V),Z.append(Q,w,N,_e),document.body.appendChild(Z)}o?(w.innerText="Preview backend disconnected.",Q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function lt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function MN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(lt())}function GH(){var n;let e=(n=Ff())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function PN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function xN(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function ON(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kN(){let n=lt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function FN(){return!GH()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Pu(){try{return typeof indexedDB=="object"}catch{return!1}}function LN(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var WH="FirebaseError",pn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=WH,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fn.prototype.create)}},Fn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?KH(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new pn(i,a,r)}};function KH(n,e){return n.replace(QH,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var QH=/\{\$([^}]+)}/g;function VN(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function tr(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(SN(o)&&SN(s)){if(!tr(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function SN(n){return n!==null&&typeof n=="object"}function xu(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ia(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function oa(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function jN(n,e){let t=new W_(n,e);return t.subscribe.bind(t)}var W_=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");YH(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=q_),i.error===void 0&&(i.error=q_),i.complete===void 0&&(i.complete=q_);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function YH(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function q_(){}var Bae=14400*1e3;function je(n){return n&&n._delegate?n._delegate:n}var Ut=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var No="[DEFAULT]";var J_=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Ro;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(JH(e))try{this.getOrInitializeService({instanceIdentifier:No})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=No){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=No){return this.instances.has(e)}getOptions(e=No){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ZH(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=No){return this.component?this.component.multipleInstances?e:No:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function ZH(n){return n===No?void 0:n}function JH(n){return n.instantiationMode==="EAGER"}var jf=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new J_(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var XH=[],he=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(he||{}),e4={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},t4=he.INFO,n4={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},r4=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=n4[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},nr=class{constructor(e){this.name=e,this._logLevel=t4,this._logHandler=r4,this._userLogHandler=null,XH.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in he))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?e4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...e),this._logHandler(this,he.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...e),this._logHandler(this,he.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,he.INFO,...e),this._logHandler(this,he.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,he.WARN,...e),this._logHandler(this,he.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...e),this._logHandler(this,he.ERROR,...e)}};var i4=(n,e)=>e.some(t=>n instanceof t),UN,BN;function o4(){return UN||(UN=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function s4(){return BN||(BN=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var $N=new WeakMap,eE=new WeakMap,HN=new WeakMap,X_=new WeakMap,nE=new WeakMap;function a4(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(rr(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&$N.set(t,n)}).catch(()=>{}),nE.set(e,n),e}function c4(n){if(eE.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});eE.set(n,e)}var tE={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return eE.get(n);if(e==="objectStoreNames")return n.objectStoreNames||HN.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return rr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function zN(n){tE=n(tE)}function u4(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Uf(this),e,...t);return HN.set(r,e.sort?e.sort():[e]),rr(r)}:s4().includes(n)?function(...e){return n.apply(Uf(this),e),rr($N.get(this))}:function(...e){return rr(n.apply(Uf(this),e))}}function l4(n){return typeof n=="function"?u4(n):(n instanceof IDBTransaction&&c4(n),i4(n,o4())?new Proxy(n,tE):n)}function rr(n){if(n instanceof IDBRequest)return a4(n);if(X_.has(n))return X_.get(n);let e=l4(n);return e!==n&&(X_.set(n,e),nE.set(e,n)),e}var Uf=n=>nE.get(n);function GN(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=rr(s);return r&&s.addEventListener("upgradeneeded",u=>{r(rr(s.result),u.oldVersion,u.newVersion,rr(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var d4=["get","getKey","getAll","getAllKeys","count"],h4=["put","add","delete","clear"],rE=new Map;function qN(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(rE.get(e))return rE.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=h4.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||d4.includes(t)))return;let o=async function(s,...a){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[t](...a),i&&u.done]))[0]};return rE.set(e,o),o}zN(n=>ae(k({},n),{get:(e,t,r)=>qN(e,t)||n.get(e,t,r),has:(e,t)=>!!qN(e,t)||n.has(e,t)}));var oE=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(f4(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function f4(n){let e=n.getComponent();return e?.type==="VERSION"}var sE="@firebase/app",WN="0.13.2";var Pr=new nr("@firebase/app"),p4="@firebase/app-compat",g4="@firebase/analytics-compat",m4="@firebase/analytics",y4="@firebase/app-check-compat",v4="@firebase/app-check",_4="@firebase/auth",E4="@firebase/auth-compat",I4="@firebase/database",w4="@firebase/data-connect",T4="@firebase/database-compat",D4="@firebase/functions",b4="@firebase/functions-compat",C4="@firebase/installations",S4="@firebase/installations-compat",A4="@firebase/messaging",R4="@firebase/messaging-compat",N4="@firebase/performance",M4="@firebase/performance-compat",P4="@firebase/remote-config",x4="@firebase/remote-config-compat",O4="@firebase/storage",k4="@firebase/storage-compat",F4="@firebase/firestore",L4="@firebase/ai",V4="@firebase/firestore-compat",j4="firebase",U4="11.10.0";var aE="[DEFAULT]",B4={[sE]:"fire-core",[p4]:"fire-core-compat",[m4]:"fire-analytics",[g4]:"fire-analytics-compat",[v4]:"fire-app-check",[y4]:"fire-app-check-compat",[_4]:"fire-auth",[E4]:"fire-auth-compat",[I4]:"fire-rtdb",[w4]:"fire-data-connect",[T4]:"fire-rtdb-compat",[D4]:"fire-fn",[b4]:"fire-fn-compat",[C4]:"fire-iid",[S4]:"fire-iid-compat",[A4]:"fire-fcm",[R4]:"fire-fcm-compat",[N4]:"fire-perf",[M4]:"fire-perf-compat",[P4]:"fire-rc",[x4]:"fire-rc-compat",[O4]:"fire-gcs",[k4]:"fire-gcs-compat",[F4]:"fire-fst",[V4]:"fire-fst-compat",[L4]:"fire-vertex","fire-js":"fire-js",[j4]:"fire-js-all"};var Ou=new Map,$4=new Map,cE=new Map;function KN(n,e){try{n.container.addComponent(e)}catch(t){Pr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ln(n){let e=n.name;if(cE.has(e))return Pr.debug(`There were multiple attempts to register component ${e}.`),!1;cE.set(e,n);for(let t of Ou.values())KN(t,n);for(let t of $4.values())KN(t,n);return!0}function sa(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Yt(n){return n==null?!1:n.settings!==void 0}var H4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ei=new Fn("app","Firebase",H4);var uE=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ut("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ei.create("app-deleted",{appName:this._name})}};var Ii=U4;function hE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:aE,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Ei.create("bad-app-name",{appName:String(i)});if(t||(t=Y_()),!t)throw Ei.create("no-options");let o=Ou.get(i);if(o){if(tr(t,o.options)&&tr(r,o.config))return o;throw Ei.create("duplicate-app",{appName:i})}let s=new jf(i);for(let u of cE.values())s.addComponent(u);let a=new uE(t,r,s);return Ou.set(i,a),a}function Mo(n=aE){let e=Ou.get(n);if(!e&&n===aE&&Y_())return hE();if(!e)throw Ei.create("no-app",{appName:n});return e}function Bf(){return Array.from(Ou.values())}function Ue(n,e,t){var r;let i=(r=B4[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Pr.warn(a.join(" "));return}Ln(new Ut(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var z4="firebase-heartbeat-database",q4=1,ku="firebase-heartbeat-store",iE=null;function JN(){return iE||(iE=GN(z4,q4,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ku)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ei.create("idb-open",{originalErrorMessage:n.message})})),iE}async function G4(n){try{let t=(await JN()).transaction(ku),r=await t.objectStore(ku).get(XN(n));return await t.done,r}catch(e){if(e instanceof pn)Pr.warn(e.message);else{let t=Ei.create("idb-get",{originalErrorMessage:e?.message});Pr.warn(t.message)}}}async function QN(n,e){try{let r=(await JN()).transaction(ku,"readwrite");await r.objectStore(ku).put(e,XN(n)),await r.done}catch(t){if(t instanceof pn)Pr.warn(t.message);else{let r=Ei.create("idb-set",{originalErrorMessage:t?.message});Pr.warn(r.message)}}}function XN(n){return`${n.name}!${n.options.appId}`}var W4=1024,K4=30,lE=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new dE(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=YN();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>K4){let s=Y4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Pr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=YN(),{heartbeatsToSend:r,unsentEntries:i}=Q4(this._heartbeatsCache.heartbeats),o=Mu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Pr.warn(t),""}}};function YN(){return new Date().toISOString().substring(0,10)}function Q4(n,e=W4){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),ZN(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),ZN(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var dE=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Pu()?LN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await G4(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return QN(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return QN(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function ZN(n){return Mu(JSON.stringify({version:2,heartbeats:n})).length}function Y4(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function Z4(n){Ln(new Ut("platform-logger",e=>new oE(e),"PRIVATE")),Ln(new Ut("heartbeat",e=>new lE(e),"PRIVATE")),Ue(sE,WN,n),Ue(sE,WN,"esm2017"),Ue("fire-js","")}Z4("");var J4="firebase",X4="11.10.0";Ue(J4,X4,"app");function eM(n){n===void 0&&(n=A(Fe));let e=n.get(ui);return t=>new X(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var wi=new ri("ANGULARFIRE2_VERSION");function Fu(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var ca=(n,e)=>{let t=e?[e]:Bf(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},aa=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(aa||{}),tM=r_()&&typeof Zone<"u"?aa.WARN:aa.SILENT;var $f=class{zone;delegate;constructor(e,t=fm){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},Ti=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=A(ve);this.outsideAngular=t.runOutsideAngular(()=>new $f(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new $f(typeof Zone>"u"?void 0:Zone.current,hm))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),nM=!1;function e3(n,e){!nM&&(tM>aa.SILENT||r_())&&(nM=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),tM>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function t3(n){let e=A(ve,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Po(n){let e=A(ve,{optional:!0});return e?e.run(()=>n()):n()}var n3=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),qe(t,()=>Po(()=>n.apply(void 0,r)))),st=(n,e,t)=>(t||=e?aa.WARN:aa.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=A(Ti),s=A(ui),a=A(He)}catch{return e3(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=Po(()=>s.add())),i[l]=n3(i[l],r,a));let u=t3(()=>n.apply(this,i));return e?u instanceof X?u.pipe(ei(o.outsideAngular),Xr(o.insideAngular),eM(a)):u instanceof Promise?Po(()=>{let l=s.add();return new Promise((h,p)=>{u.then(m=>qe(a,()=>Po(()=>h(m))),m=>qe(a,()=>Po(()=>p(m)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:Po(()=>u):u instanceof X?u.pipe(ei(o.outsideAngular),Xr(o.insideAngular)):Po(()=>u)});var xr=class{constructor(e){return e}},xo=class{constructor(){return Bf()}};function r3(n){return n&&n.length===1?n[0]:new xr(Mo())}var fE=new j("angularfire2._apps"),i3={provide:xr,useFactory:r3,deps:[[new Kt,fE]]},o3={provide:xo,deps:[[new Kt,fE]]};function s3(n){return(e,t)=>{let r=t.get(yo);Ue("angularfire",wi.full,"core"),Ue("angularfire",wi.full,"app"),Ue("angular",Nm.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new xr(i)}}function rM(n,...e){return yt([i3,o3,{provide:fE,useFactory:s3(n),multi:!0,deps:[ve,Fe,Ti,...e]}])}var iM=st(hE,!0);var a3=new Map,c3={activated:!1,tokenObservers:[]},u3={initialized:!1,enabled:!1};function Vn(n){return a3.get(n)||Object.assign({},c3)}function cM(){return u3}var l3="https://content-firebaseappcheck.googleapis.com/v1";var d3="exchangeDebugToken",oM={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Bce=1440*60*1e3;var mE=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Ro,this.pending.promise.catch(t=>{}),await h3(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Ro,this.pending.promise.catch(t=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function h3(n){return new Promise(e=>{setTimeout(e,n)})}var f3={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Di=new Fn("appCheck","AppCheck",f3);function uM(n){if(!Vn(n).activated)throw Di.create("use-before-activation",{appName:n.name})}async function lM({url:n,body:e},t){let r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){let p=await i.getHeartbeatsHeader();p&&(r["X-Firebase-Client"]=p)}let o={method:"POST",body:JSON.stringify(e),headers:r},s;try{s=await fetch(n,o)}catch(p){throw Di.create("fetch-network-error",{originalErrorMessage:p?.message})}if(s.status!==200)throw Di.create("fetch-status-error",{httpStatus:s.status});let a;try{a=await s.json()}catch(p){throw Di.create("fetch-parse-error",{originalErrorMessage:p?.message})}let u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Di.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let l=Number(u[1])*1e3,h=Date.now();return{token:a.token,expireTimeMillis:h+l,issuedAtTimeMillis:h}}function dM(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${l3}/projects/${t}/apps/${r}:${d3}?key=${i}`,body:{debug_token:e}}}var p3="firebase-app-check-database",g3=1,yE="firebase-app-check-store";var Hf=null;function m3(){return Hf||(Hf=new Promise((n,e)=>{try{let t=indexedDB.open(p3,g3);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Di.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(yE,{keyPath:"compositeKey"})}}}catch(t){e(Di.create("storage-open",{originalErrorMessage:t?.message}))}}),Hf)}function y3(n,e){return v3(_3(n),e)}async function v3(n,e){let r=(await m3()).transaction(yE,"readwrite"),o=r.objectStore(yE).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(Di.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}function _3(n){return`${n.options.appId}-${n.name}`}var Lu=new nr("@firebase/app-check");function pE(n,e){return Pu()?y3(n,e).catch(t=>{Lu.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function hM(){return cM().enabled}async function fM(){let n=cM();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var E3={error:"UNKNOWN_ERROR"};function I3(n){return Of.encodeString(JSON.stringify(n),!1)}async function vE(n,e=!1,t=!1){let r=n.app;uM(r);let i=Vn(r),o=i.token,s;if(o&&!Vu(o)&&(i.token=void 0,o=void 0),!o){let l=await i.cachedTokenPromise;l&&(Vu(l)?o=l:await pE(r,void 0))}if(!e&&o&&Vu(o))return{token:o.token};let a=!1;if(hM())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=lM(dM(r,await fM()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=await i.exchangeTokenPromise;return await pE(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Lu.warn(l.message):t&&Lu.error(l),gE(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=await Vn(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Lu.warn(l.message):t&&Lu.error(l),s=l}let u;return o?s?Vu(o)?u={token:o.token,internalError:s}:u=gE(s):(u={token:o.token},i.token=o,await pE(r,o)):u=gE(s),a&&b3(r,u),u}async function w3(n){let e=n.app;uM(e);let{provider:t}=Vn(e);if(hM()){let r=await fM(),{token:i}=await lM(dM(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await t.getToken();return{token:r}}}function T3(n,e,t,r){let{app:i}=n,o=Vn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Vu(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),sM(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>sM(n))}function pM(n,e){let t=Vn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function sM(n){let{app:e}=n,t=Vn(e),r=t.tokenRefresher;r||(r=D3(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function D3(n){let{app:e}=n;return new mE(async()=>{let t=Vn(e),r;if(t.token?r=await vE(n,!0):r=await vE(n),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let t=Vn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},oM.RETRIAL_MIN_WAIT,oM.RETRIAL_MAX_WAIT)}function b3(n,e){let t=Vn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Vu(n){return n.expireTimeMillis-Date.now()>0}function gE(n){return{token:I3(E3),error:n}}var _E=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Vn(this.app);for(let t of e)pM(this.app,t.next);return Promise.resolve()}};function C3(n,e){return new _E(n,e)}function S3(n){return{getToken:e=>vE(n,e),getLimitedUseToken:()=>w3(n),addTokenListener:e=>T3(n,"INTERNAL",e),removeTokenListener:e=>pM(n.app,e)}}var A3="@firebase/app-check",R3="0.10.1";var N3="app-check",aM="app-check-internal";function M3(){Ln(new Ut(N3,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return C3(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(aM).initialize()})),Ln(new Ut(aM,n=>{let e=n.getProvider("app-check").getImmediate();return S3(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ue(A3,R3)}M3();var P3="app-check";var ua=class{constructor(){return ca(P3)}};var x3=["localhost","0.0.0.0","127.0.0.1"],Xce=typeof window<"u"&&x3.includes(window.location.hostname);function NM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var MM=NM,PM=new Fn("auth","Firebase",NM());var Qf=new nr("@firebase/auth");function O3(n,...e){Qf.logLevel<=he.WARN&&Qf.warn(`Auth (${Ii}): ${n}`,...e)}function qf(n,...e){Qf.logLevel<=he.ERROR&&Qf.error(`Auth (${Ii}): ${n}`,...e)}function or(n,...e){throw zE(n,...e)}function Oo(n,...e){return zE(n,...e)}function xM(n,e,t){let r=Object.assign(Object.assign({},MM()),{[e]:t});return new Fn("auth","Firebase",r).create(e,{appName:n.name})}function Fr(n){return xM(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zE(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return PM.create(n,...e)}function Y(n,e,...t){if(!n)throw zE(e,...t)}function Or(n){let e="INTERNAL ASSERTION FAILED: "+n;throw qf(e),new Error(e)}function Si(n,e){n||Or(e)}function TE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function k3(){return gM()==="http:"||gM()==="https:"}function gM(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function F3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(k3()||xN()||"connection"in navigator)?navigator.onLine:!0}function L3(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var ko=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Si(t>e,"Short delay should be less than long delay!"),this.isMobile=MN()||ON()}get(){return F3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function qE(n,e){Si(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Yf=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Or("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Or("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Or("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var V3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var j3=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],U3=new ko(3e4,6e4);function Ai(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Ri(n,e,t,r,i={}){return OM(n,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});let a=xu(Object.assign({key:n.config.apiKey},s)).slice(1),u=await n._getAdditionalHeaders();u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode);let l=Object.assign({method:e,headers:u},o);return PN()||(l.referrerPolicy="no-referrer"),n.emulatorConfig&&_i(n.emulatorConfig.host)&&(l.credentials="include"),Yf.fetch()(await kM(n,n.config.apiHost,t,a),l)})}async function OM(n,e,t){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},V3),e);try{let i=new DE(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=await o.json();if("needConfirmation"in s)throw zf(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw zf(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw zf(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw zf(n,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw xM(n,h,l);or(n,h)}}catch(i){if(i instanceof pn)throw i;or(n,"network-request-failed",{message:String(i)})}}async function Wu(n,e,t,r,i={}){let o=await Ri(n,e,t,r,i);return"mfaPendingCredential"in o&&or(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function kM(n,e,t,r){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?qE(n.config,i):`${n.config.apiScheme}://${i}`;return j3.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}function B3(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var DE=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Oo(this.auth,"network-request-failed")),U3.get())})}};function zf(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Oo(n,e,r);return i.customData._tokenResponse=t,i}function mM(n){return n!==void 0&&n.enterprise!==void 0}var bE=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return B3(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};async function $3(n,e){return Ri(n,"GET","/v2/recaptchaConfig",Ai(n,e))}async function H3(n,e){return Ri(n,"POST","/v1/accounts:delete",e)}async function Zf(n,e){return Ri(n,"POST","/v1/accounts:lookup",e)}function Uu(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function GE(n,e=!1){let t=je(n),r=await t.getIdToken(e),i=WE(r);Y(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Uu(EE(i.auth_time)),issuedAtTime:Uu(EE(i.iat)),expirationTime:Uu(EE(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function EE(n){return Number(n)*1e3}function WE(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return qf("JWT malformed, contained fewer than 3 sections"),null;try{let i=kf(t);return i?JSON.parse(i):(qf("Failed to decode base64 JWT payload"),null)}catch(i){return qf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function yM(n){let e=WE(n);return Y(e,"internal-error"),Y(typeof e.exp<"u","internal-error"),Y(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function $u(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof pn&&z3(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function z3({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var CE=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var Hu=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Uu(this.lastLoginAt),this.creationTime=Uu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Jf(n){var e;let t=n.auth,r=await n.getIdToken(),i=await $u(n,Zf(t,{idToken:r}));Y(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?FM(o.providerUserInfo):[],a=q3(n.providerData,s),u=n.isAnonymous,l=!(n.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Hu(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,p)}async function KE(n){let e=je(n);await Jf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function q3(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function FM(n){return n.map(e=>{var{providerId:t}=e,r=pm(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function G3(n,e){let t=await OM(n,{},async()=>{let r=xu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=await kM(n,i,"/v1/token",`key=${o}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return n.emulatorConfig&&_i(n.emulatorConfig.host)&&(u.credentials="include"),Yf.fetch()(s,u)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function W3(n,e){return Ri(n,"POST","/v2/accounts:revokeToken",Ai(n,e))}var Bu=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Y(e.idToken,"internal-error"),Y(typeof e.idToken<"u","internal-error"),Y(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):yM(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Y(e.length!==0,"internal-error");let t=yM(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Y(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:o}=await G3(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(Y(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Y(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Y(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Or("not implemented")}};function bi(n,e){Y(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Ci=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=pm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new CE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Hu(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){let t=await $u(this,this.stsTokenManager.getToken(this.auth,e));return Y(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return GE(this,e)}reload(){return KE(this)}_assign(e){this!==e&&(Y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Jf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Yt(this.auth.app))return Promise.reject(Fr(this.auth));let e=await this.getIdToken();return await $u(this,H3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,u,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,m=(i=t.email)!==null&&i!==void 0?i:void 0,y=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,w=(s=t.photoURL)!==null&&s!==void 0?s:void 0,R=(a=t.tenantId)!==null&&a!==void 0?a:void 0,N=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,V=(l=t.createdAt)!==null&&l!==void 0?l:void 0,Q=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:Z,emailVerified:_e,isAnonymous:ft,providerData:be,stsTokenManager:T}=t;Y(Z&&T,e,"internal-error");let v=Bu.fromJSON(this.name,T);Y(typeof Z=="string",e,"internal-error"),bi(p,e.name),bi(m,e.name),Y(typeof _e=="boolean",e,"internal-error"),Y(typeof ft=="boolean",e,"internal-error"),bi(y,e.name),bi(w,e.name),bi(R,e.name),bi(N,e.name),bi(V,e.name),bi(Q,e.name);let E=new n({uid:Z,auth:e,email:m,emailVerified:_e,displayName:p,isAnonymous:ft,photoURL:w,phoneNumber:y,tenantId:R,stsTokenManager:v,createdAt:V,lastLoginAt:Q});return be&&Array.isArray(be)&&(E.providerData=be.map(I=>Object.assign({},I))),N&&(E._redirectEventId=N),E}static async _fromIdTokenResponse(e,t,r=!1){let i=new Bu;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Jf(o),o}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];Y(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?FM(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Bu;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Hu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u}};var vM=new Map;function kr(n){Si(n instanceof Function,"Expected a class definition");let e=vM.get(n);return e?(Si(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,vM.set(n,e),e)}var K3=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),SE=K3;function Gf(n,e,t){return`firebase:${n}:${e}:${t}`}var Xf=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Gf(this.userKey,i.apiKey,o),this.fullPersistenceKey=Gf("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await Zf(this.auth,{idToken:e}).catch(()=>{});return t?Ci._fromGetAccountInfoResponse(this.auth,t,e):null}return Ci._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(kr(SE),e,r);let i=(await Promise.all(t.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),o=i[0]||kr(SE),s=Gf(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=await l._get(s);if(h){let p;if(typeof h=="string"){let m=await Zf(e,{idToken:h}).catch(()=>{});if(!m)break;p=await Ci._fromGetAccountInfoResponse(e,m,h)}else p=Ci._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],a&&await o._set(s,a.toJSON()),await Promise.all(t.map(async l=>{if(l!==o)try{await l._remove(s)}catch{}})),new n(o,e,r))}};function _M(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(UM(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(LM(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($M(e))return"Blackberry";if(HM(e))return"Webos";if(VM(e))return"Safari";if((e.includes("chrome/")||jM(e))&&!e.includes("edge/"))return"Chrome";if(BM(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function LM(n=lt()){return/firefox\//i.test(n)}function VM(n=lt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function jM(n=lt()){return/crios\//i.test(n)}function UM(n=lt()){return/iemobile/i.test(n)}function BM(n=lt()){return/android/i.test(n)}function $M(n=lt()){return/blackberry/i.test(n)}function HM(n=lt()){return/webos/i.test(n)}function QE(n=lt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Q3(n=lt()){var e;return QE(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Y3(){return kN()&&document.documentMode===10}function zM(n=lt()){return QE(n)||BM(n)||HM(n)||$M(n)||/windows phone/i.test(n)||UM(n)}function qM(n,e=[]){let t;switch(n){case"Browser":t=_M(lt());break;case"Worker":t=`${_M(lt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ii}/${r}`}var AE=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function Z3(n,e={}){return Ri(n,"GET","/v2/passwordPolicy",Ai(n,e))}var J3=6,RE=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:J3,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var NE=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ep(this),this.idTokenSubscription=new ep(this),this.beforeStateQueue=new AE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=PM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=kr(t)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await Xf.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await Zf(this,{idToken:e}),r=await Ci._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Yt(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,u=await this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Y(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Jf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=L3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Yt(this.app))return Promise.reject(Fr(this));let t=e?je(e):null;return t&&Y(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Yt(this.app)?Promise.reject(Fr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Yt(this.app)?Promise.reject(Fr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(kr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await Z3(this),t=new RE(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Fn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await W3(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&kr(e)||this._popupRedirectResolver;Y(t,this,"argument-error"),this.redirectPersistenceManager=await Xf.create(this,[kr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Y(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qM(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Yt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&O3(`Error while retrieving App Check token: ${t.error}`),t?.token}};function Lo(n){return je(n)}var ep=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=jN(t=>this.observer=t)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var ap={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function X3(n){ap=n}function GM(n){return ap.loadJS(n)}function ez(){return ap.recaptchaEnterpriseScript}function tz(){return ap.gapiScript}function WM(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var ME=class{constructor(){this.enterprise=new PE}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},PE=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var nz="recaptcha-enterprise",KM="NO_RECAPTCHA",xE=class{constructor(e){this.type=nz,this.auth=Lo(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(s,a)=>{$3(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new bE(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{a(u)})})}function i(o,s,a){let u=window.grecaptcha;mM(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(KM)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ME().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&mM(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=ez();u.length!==0&&(u+=a),GM(u).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})}};async function ju(n,e,t,r=!1,i=!1){let o=new xE(n),s;if(i)s=KM;else try{s=await o.verify(t)}catch{s=await o.verify(t,!0)}let a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let u=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function OE(n,e,t,r,i){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=await ju(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let u=await ju(n,e,t,t==="getOobCode");return r(n,u)}else return Promise.reject(a)});else if(i==="PHONE_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=await ju(n,e,t);return r(n,a).catch(async u=>{var l;if(((l=n._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let h=await ju(n,e,t,!1,!0);return r(n,h)}return Promise.reject(u)})}else{let a=await ju(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")}function YE(n,e){let t=sa(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(tr(o,e??{}))return i;or(i,"already-initialized")}return t.initialize({options:e})}function rz(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(kr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function ZE(n,e,t){let r=Lo(n);Y(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=QM(e),{host:s,port:a}=iz(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Y(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Y(tr(l,r.config.emulator)&&tr(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,_i(s)?(Lf(`${o}//${s}${u}`),Vf("Auth",!0)):i||oz()}function QM(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function iz(n){let e=QM(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:EM(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:EM(s)}}}function EM(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function oz(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var zu=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Or("not implemented")}_getIdTokenResponse(e){return Or("not implemented")}_linkToIdToken(e,t){return Or("not implemented")}_getReauthenticationResolver(e){return Or("not implemented")}};async function sz(n,e){return Ri(n,"POST","/v1/accounts:signUp",e)}async function az(n,e){return Wu(n,"POST","/v1/accounts:signInWithPassword",Ai(n,e))}async function cz(n,e){return Wu(n,"POST","/v1/accounts:signInWithEmailLink",Ai(n,e))}async function uz(n,e){return Wu(n,"POST","/v1/accounts:signInWithEmailLink",Ai(n,e))}var qu=class n extends zu{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return OE(e,t,"signInWithPassword",az,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return cz(e,{email:this._email,oobCode:this._password});default:or(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return OE(e,r,"signUpPassword",sz,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return uz(e,{idToken:t,email:this._email,oobCode:this._password});default:or(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};async function IE(n,e){return Wu(n,"POST","/v1/accounts:signInWithIdp",Ai(n,e))}function lz(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function dz(n){let e=ia(oa(n)).link,t=e?ia(oa(e)).deep_link_id:null,r=ia(oa(n)).deep_link_id;return(r?ia(oa(r)).link:null)||r||t||e||n}var tp=class n{constructor(e){var t,r,i,o,s,a;let u=ia(oa(e)),l=(t=u.apiKey)!==null&&t!==void 0?t:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=lz((i=u.mode)!==null&&i!==void 0?i:null);Y(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=u.lang)!==null&&s!==void 0?s:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=dz(e);try{return new n(t)}catch{return null}}};var YM=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return qu._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=tp.parseLink(r);return Y(i,"argument-error"),qu._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),np=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var kE=class extends np{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};async function hz(n,e){return Wu(n,"POST","/v1/accounts:signUp",Ai(n,e))}var la=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){let o=await Ci._fromIdTokenResponse(e,r,i),s=IM(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);let i=IM(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function IM(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var FE=class n extends pn{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function ZM(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?FE._fromErrorAndOperation(n,o,e,r):o})}async function fz(n,e,t=!1){let r=await $u(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return la._forOperation(n,"link",r)}async function pz(n,e,t=!1){let{auth:r}=n;if(Yt(r.app))return Promise.reject(Fr(r));let i="reauthenticate";try{let o=await $u(n,ZM(r,i,e,n),t);Y(o.idToken,r,"internal-error");let s=WE(o.idToken);Y(s,r,"internal-error");let{sub:a}=s;return Y(n.uid===a,r,"user-mismatch"),la._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&or(r,"user-mismatch"),o}}async function JM(n,e,t=!1){if(Yt(n.app))return Promise.reject(Fr(n));let r="signIn",i=await ZM(n,r,e),o=await la._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}async function JE(n,e){return JM(Lo(n),e)}async function XM(n){let e=Lo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function XE(n,e,t){if(Yt(n.app))return Promise.reject(Fr(n));let r=Lo(n),s=await OE(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",hz,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&XM(n),u}),a=await la._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(a.user),a}function eI(n,e,t){return Yt(n.app)?Promise.reject(Fr(n)):JE(je(n),YM.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&XM(n),r})}function tI(n,e,t,r){return je(n).onIdTokenChanged(e,t,r)}function nI(n,e,t){return je(n).beforeAuthStateChanged(e,t)}function rI(n,e,t,r){return je(n).onAuthStateChanged(e,t,r)}function iI(n){return je(n).signOut()}var rp="__sak";var ip=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(rp,"1"),this.storage.removeItem(rp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var gz=1e3,mz=10,yz=(()=>{class n extends ip{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=zM(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);Y3()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,mz):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},gz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){let r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}return n.type="LOCAL",n})(),eP=yz;var vz=(()=>{class n extends ip{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),oI=vz;function _z(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var Ez=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(async h=>h(r.origin,s)),l=await _z(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function tP(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var LE=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=tP("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(m.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}};function ir(){return window}function Iz(n){ir().location.href=n}function nP(){return typeof ir().WorkerGlobalScope<"u"&&typeof ir().importScripts=="function"}async function wz(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Tz(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Dz(){return nP()?self:null}var rP="firebaseLocalStorageDb",bz=1,op="firebaseLocalStorage",iP="fbase_key",Fo=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function cp(n,e){return n.transaction([op],e?"readwrite":"readonly").objectStore(op)}function Cz(){let n=indexedDB.deleteDatabase(rP);return new Fo(n).toPromise()}function VE(){let n=indexedDB.open(rP,bz);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(op,{keyPath:iP})}catch(i){t(i)}}),n.addEventListener("success",async()=>{let r=n.result;r.objectStoreNames.contains(op)?e(r):(r.close(),await Cz(),e(await VE()))})})}async function wM(n,e,t){let r=cp(n,!0).put({[iP]:e,value:t});return new Fo(r).toPromise()}async function Sz(n,e){let t=cp(n,!1).get(e),r=await new Fo(t).toPromise();return r===void 0?null:r.value}function TM(n,e){let t=cp(n,!0).delete(e);return new Fo(t).toPromise()}var Az=800,Rz=3,Nz=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await VE(),this.db)}async _withRetries(t){let r=0;for(;;)try{let i=await this._openDb();return await t(i)}catch(i){if(r++>Rz)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return nP()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ez._getInstance(Dz()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await wz(),!this.activeServiceWorker)return;this.sender=new LE(this.activeServiceWorker);let i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Tz()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await VE();return await wM(t,rp,"1"),await TM(t,rp),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>wM(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){let r=await this._withRetries(i=>Sz(i,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>TM(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(o=>{let s=cp(o,!1).getAll();return new Fo(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Az)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),oP=Nz;var aue=WM("rcb"),cue=new ko(3e4,6e4);function Mz(n,e){return e?kr(e):(Y(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Gu=class extends zu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return IE(e,this._buildIdpRequest())}_linkToIdToken(e,t){return IE(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return IE(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function Pz(n){return JM(n.auth,new Gu(n),n.bypassAuthState)}function xz(n){let{auth:e,user:t}=n;return Y(t,e,"internal-error"),pz(t,new Gu(n),n.bypassAuthState)}async function Oz(n){let{auth:e,user:t}=n;return Y(t,e,"internal-error"),fz(t,new Gu(n),n.bypassAuthState)}var jE=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Pz;case"linkViaPopup":case"linkViaRedirect":return Oz;case"reauthViaPopup":case"reauthViaRedirect":return xz;default:or(this.auth,"internal-error")}}resolve(e){Si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var uue=new ko(2e3,1e4);var kz="pendingRedirect",Wf=new Map,UE=class extends jE{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Wf.get(this.auth._key());if(!e){try{let r=await Fz(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Wf.set(this.auth._key(),e)}return this.bypassAuthState||Wf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function Fz(n,e){let t=jz(e),r=Vz(n);if(!await r._isAvailable())return!1;let i=await r._get(t)==="true";return await r._remove(t),i}function Lz(n,e){Wf.set(n._key(),e)}function Vz(n){return kr(n._redirectPersistence)}function jz(n){return Gf(kz,n.config.apiKey,n.name)}async function Uz(n,e,t=!1){if(Yt(n.app))return Promise.reject(Fr(n));let r=Lo(n),i=Mz(r,e),s=await new UE(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}var Bz=600*1e3,BE=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!$z(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!sP(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Oo(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Bz&&this.cachedEventUids.clear(),this.cachedEventUids.has(DM(e))}saveEventToCache(e){this.cachedEventUids.add(DM(e)),this.lastProcessedEventTime=Date.now()}};function DM(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function sP({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function $z(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sP(n);default:return!1}}async function Hz(n,e={}){return Ri(n,"GET","/v1/projects",e)}var zz=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qz=/^https?/;async function Gz(n){if(n.config.emulator)return;let{authorizedDomains:e}=await Hz(n);for(let t of e)try{if(Wz(t))return}catch{}or(n,"unauthorized-domain")}function Wz(n){let e=TE(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!qz.test(t))return!1;if(zz.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var Kz=new ko(3e4,6e4);function bM(){let n=ir().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Qz(n){return new Promise((e,t)=>{var r,i,o;function s(){bM(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{bM(),t(Oo(n,"network-request-failed"))},timeout:Kz.get()})}if(!((i=(r=ir().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=ir().gapi)===null||o===void 0)&&o.load)s();else{let a=WM("iframefcb");return ir()[a]=()=>{gapi.load?s():t(Oo(n,"network-request-failed"))},GM(`${tz()}?onload=${a}`).catch(u=>t(u))}}).catch(e=>{throw Kf=null,e})}var Kf=null;function Yz(n){return Kf=Kf||Qz(n),Kf}var Zz=new ko(5e3,15e3),Jz="__/auth/iframe",Xz="emulator/auth/iframe",eq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tq=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nq(n){let e=n.config;Y(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?qE(e,Xz):`https://${n.config.authDomain}/${Jz}`,r={apiKey:e.apiKey,appName:n.name,v:Ii},i=tq.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${xu(r).slice(1)}`}async function rq(n){let e=await Yz(n),t=ir().gapi;return Y(t,n,"internal-error"),e.open({where:document.body,url:nq(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eq,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});let s=Oo(n,"network-request-failed"),a=ir().setTimeout(()=>{o(s)},Zz.get());function u(){ir().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})}))}var iq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},oq=500,sq=600,aq="_blank",cq="http://localhost",sp=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function uq(n,e,t,r=oq,i=sq){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},iq),{width:r.toString(),height:i.toString(),top:o,left:s}),l=lt().toLowerCase();t&&(a=jM(l)?aq:t),LM(l)&&(e=e||cq,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[y,w])=>`${m}${y}=${w},`,"");if(Q3(l)&&a!=="_self")return lq(e||"",a),new sp(null);let p=window.open(e||"",a,h);Y(p,n,"popup-blocked");try{p.focus()}catch{}return new sp(p)}function lq(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var dq="__/auth/handler",hq="emulator/auth/handler",fq=encodeURIComponent("fac");async function CM(n,e,t,r,i,o){Y(n.config.authDomain,n,"auth-domain-config-required"),Y(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ii,eventId:i};if(e instanceof np){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",VN(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof kE){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=await n._getAppCheckToken(),l=u?`#${fq}=${encodeURIComponent(u)}`:"";return`${pq(n)}?${xu(a).slice(1)}${l}`}function pq({config:n}){return n.emulator?qE(n,hq):`https://${n.authDomain}/${dq}`}var wE="webStorageSupport",$E=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=oI,this._completeRedirectFn=Uz,this._overrideRedirectResult=Lz}async _openPopup(e,t,r,i){var o;Si((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=await CM(e,t,r,TE(),i);return uq(e,s,tP())}async _openRedirect(e,t,r,i){await this._originValidation(e);let o=await CM(e,t,r,TE(),i);return Iz(o),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Si(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await rq(e),r=new BE(e);return t.register("authEvent",i=>(Y(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(wE,{type:wE},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[wE];s!==void 0&&t(!!s),or(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Gz(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return zM()||VM()||QE()}},aP=$E;var SM="@firebase/auth",AM="1.10.8";var HE=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function gq(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function mq(n){Ln(new Ut("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Y(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qM(n)},l=new NE(r,i,o,u);return rz(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ln(new Ut("auth-internal",e=>{let t=Lo(e.getProvider("auth").getImmediate());return(r=>new HE(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ue(SM,AM,gq(n)),Ue(SM,AM,"esm2017")}var yq=300,vq=Z_("authIdTokenMaxAge")||yq,RM=null,_q=n=>async e=>{let t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>vq)return;let i=t?.token;RM!==i&&(RM=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function sI(n=Mo()){let e=sa(n,"auth");if(e.isInitialized())return e.getImmediate();let t=YE(n,{popupRedirectResolver:aP,persistence:[oP,eP,oI]}),r=Z_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=_q(o.toString());nI(t,s,()=>s(t.currentUser)),tI(t,a=>s(a))}}let i=Q_("auth");return i&&ZE(t,`http://${i}`),t}function Eq(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}X3({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Oo("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",Eq().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});mq("Browser");var cP="auth",Lr=class{constructor(e){return e}},Ku=class{constructor(){return ca(cP)}};var aI=new j("angularfire2.auth-instances");function c6(n,e){let t=Fu(cP,n,e);return t&&new Lr(t)}function u6(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Lr(r)}}var l6={provide:Ku,deps:[[new Kt,aI]]},d6={provide:Lr,useFactory:c6,deps:[[new Kt,aI],xr]};function uP(n,...e){return Ue("angularfire",wi.full,"auth"),yt([d6,l6,{provide:aI,useFactory:u6(n),multi:!0,deps:[ve,Fe,Ti,xo,[new Kt,ua],...e]}])}var lP=st(XE,!0,2);var dP=st(sI,!0);var hP=st(rI,!0);var fP=st(eI,!0,2);var pP=st(iI,!0,2);var mP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},yP={};var Vr,cI;(function(){var n;function e(T,v){function E(){}E.prototype=v.prototype,T.D=v.prototype,T.prototype=new E,T.prototype.constructor=T,T.C=function(I,D,C){for(var _=Array(arguments.length-2),hr=2;hr<arguments.length;hr++)_[hr-2]=arguments[hr];return v.prototype[D].apply(I,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,v,E){E||(E=0);var I=Array(16);if(typeof v=="string")for(var D=0;16>D;++D)I[D]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(D=0;16>D;++D)I[D]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=T.g[0],E=T.g[1],D=T.g[2];var C=T.g[3],_=v+(C^E&(D^C))+I[0]+3614090360&4294967295;v=E+(_<<7&4294967295|_>>>25),_=C+(D^v&(E^D))+I[1]+3905402710&4294967295,C=v+(_<<12&4294967295|_>>>20),_=D+(E^C&(v^E))+I[2]+606105819&4294967295,D=C+(_<<17&4294967295|_>>>15),_=E+(v^D&(C^v))+I[3]+3250441966&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(C^E&(D^C))+I[4]+4118548399&4294967295,v=E+(_<<7&4294967295|_>>>25),_=C+(D^v&(E^D))+I[5]+1200080426&4294967295,C=v+(_<<12&4294967295|_>>>20),_=D+(E^C&(v^E))+I[6]+2821735955&4294967295,D=C+(_<<17&4294967295|_>>>15),_=E+(v^D&(C^v))+I[7]+4249261313&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(C^E&(D^C))+I[8]+1770035416&4294967295,v=E+(_<<7&4294967295|_>>>25),_=C+(D^v&(E^D))+I[9]+2336552879&4294967295,C=v+(_<<12&4294967295|_>>>20),_=D+(E^C&(v^E))+I[10]+4294925233&4294967295,D=C+(_<<17&4294967295|_>>>15),_=E+(v^D&(C^v))+I[11]+2304563134&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(C^E&(D^C))+I[12]+1804603682&4294967295,v=E+(_<<7&4294967295|_>>>25),_=C+(D^v&(E^D))+I[13]+4254626195&4294967295,C=v+(_<<12&4294967295|_>>>20),_=D+(E^C&(v^E))+I[14]+2792965006&4294967295,D=C+(_<<17&4294967295|_>>>15),_=E+(v^D&(C^v))+I[15]+1236535329&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(D^C&(E^D))+I[1]+4129170786&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^D&(v^E))+I[6]+3225465664&4294967295,C=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(C^v))+I[11]+643717713&4294967295,D=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(D^C))+I[0]+3921069994&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(D^C&(E^D))+I[5]+3593408605&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^D&(v^E))+I[10]+38016083&4294967295,C=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(C^v))+I[15]+3634488961&4294967295,D=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(D^C))+I[4]+3889429448&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(D^C&(E^D))+I[9]+568446438&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^D&(v^E))+I[14]+3275163606&4294967295,C=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(C^v))+I[3]+4107603335&4294967295,D=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(D^C))+I[8]+1163531501&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(D^C&(E^D))+I[13]+2850285829&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^D&(v^E))+I[2]+4243563512&4294967295,C=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(C^v))+I[7]+1735328473&4294967295,D=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(D^C))+I[12]+2368359562&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(E^D^C)+I[5]+4294588738&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^D)+I[8]+2272392833&4294967295,C=v+(_<<11&4294967295|_>>>21),_=D+(C^v^E)+I[11]+1839030562&4294967295,D=C+(_<<16&4294967295|_>>>16),_=E+(D^C^v)+I[14]+4259657740&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(E^D^C)+I[1]+2763975236&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^D)+I[4]+1272893353&4294967295,C=v+(_<<11&4294967295|_>>>21),_=D+(C^v^E)+I[7]+4139469664&4294967295,D=C+(_<<16&4294967295|_>>>16),_=E+(D^C^v)+I[10]+3200236656&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(E^D^C)+I[13]+681279174&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^D)+I[0]+3936430074&4294967295,C=v+(_<<11&4294967295|_>>>21),_=D+(C^v^E)+I[3]+3572445317&4294967295,D=C+(_<<16&4294967295|_>>>16),_=E+(D^C^v)+I[6]+76029189&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(E^D^C)+I[9]+3654602809&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^D)+I[12]+3873151461&4294967295,C=v+(_<<11&4294967295|_>>>21),_=D+(C^v^E)+I[15]+530742520&4294967295,D=C+(_<<16&4294967295|_>>>16),_=E+(D^C^v)+I[2]+3299628645&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(D^(E|~C))+I[0]+4096336452&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~D))+I[7]+1126891415&4294967295,C=v+(_<<10&4294967295|_>>>22),_=D+(v^(C|~E))+I[14]+2878612391&4294967295,D=C+(_<<15&4294967295|_>>>17),_=E+(C^(D|~v))+I[5]+4237533241&4294967295,E=D+(_<<21&4294967295|_>>>11),_=v+(D^(E|~C))+I[12]+1700485571&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~D))+I[3]+2399980690&4294967295,C=v+(_<<10&4294967295|_>>>22),_=D+(v^(C|~E))+I[10]+4293915773&4294967295,D=C+(_<<15&4294967295|_>>>17),_=E+(C^(D|~v))+I[1]+2240044497&4294967295,E=D+(_<<21&4294967295|_>>>11),_=v+(D^(E|~C))+I[8]+1873313359&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~D))+I[15]+4264355552&4294967295,C=v+(_<<10&4294967295|_>>>22),_=D+(v^(C|~E))+I[6]+2734768916&4294967295,D=C+(_<<15&4294967295|_>>>17),_=E+(C^(D|~v))+I[13]+1309151649&4294967295,E=D+(_<<21&4294967295|_>>>11),_=v+(D^(E|~C))+I[4]+4149444226&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~D))+I[11]+3174756917&4294967295,C=v+(_<<10&4294967295|_>>>22),_=D+(v^(C|~E))+I[2]+718787259&4294967295,D=C+(_<<15&4294967295|_>>>17),_=E+(C^(D|~v))+I[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(D+(_<<21&4294967295|_>>>11))&4294967295,T.g[2]=T.g[2]+D&4294967295,T.g[3]=T.g[3]+C&4294967295}r.prototype.u=function(T,v){v===void 0&&(v=T.length);for(var E=v-this.blockSize,I=this.B,D=this.h,C=0;C<v;){if(D==0)for(;C<=E;)i(this,T,C),C+=this.blockSize;if(typeof T=="string"){for(;C<v;)if(I[D++]=T.charCodeAt(C++),D==this.blockSize){i(this,I),D=0;break}}else for(;C<v;)if(I[D++]=T[C++],D==this.blockSize){i(this,I),D=0;break}}this.h=D,this.o+=v},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;var E=8*this.o;for(v=T.length-8;v<T.length;++v)T[v]=E&255,E/=256;for(this.u(T),T=Array(16),v=E=0;4>v;++v)for(var I=0;32>I;I+=8)T[E++]=this.g[v]>>>I&255;return T};function o(T,v){var E=a;return Object.prototype.hasOwnProperty.call(E,T)?E[T]:E[T]=v(T)}function s(T,v){this.h=v;for(var E=[],I=!0,D=T.length-1;0<=D;D--){var C=T[D]|0;I&&C==v||(E[D]=C,I=!1)}this.g=E}var a={};function u(T){return-128<=T&&128>T?o(T,function(v){return new s([v|0],0>v?-1:0)}):new s([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return N(l(-T));for(var v=[],E=1,I=0;T>=E;I++)v[I]=T/E|0,E*=4294967296;return new s(v,0)}function h(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return N(h(T.substring(1),v));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=l(Math.pow(v,8)),I=p,D=0;D<T.length;D+=8){var C=Math.min(8,T.length-D),_=parseInt(T.substring(D,D+C),v);8>C?(C=l(Math.pow(v,C)),I=I.j(C).add(l(_))):(I=I.j(E),I=I.add(l(_)))}return I}var p=u(0),m=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(R(this))return-N(this).m();for(var T=0,v=1,E=0;E<this.g.length;E++){var I=this.i(E);T+=(0<=I?I:4294967296+I)*v,v*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(w(this))return"0";if(R(this))return"-"+N(this).toString(T);for(var v=l(Math.pow(T,6)),E=this,I="";;){var D=_e(E,v).g;E=V(E,D.j(v));var C=((0<E.g.length?E.g[0]:E.h)>>>0).toString(T);if(E=D,w(E))return C+I;for(;6>C.length;)C="0"+C;I=C+I}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function w(T){if(T.h!=0)return!1;for(var v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function R(T){return T.h==-1}n.l=function(T){return T=V(this,T),R(T)?-1:w(T)?0:1};function N(T){for(var v=T.g.length,E=[],I=0;I<v;I++)E[I]=~T.g[I];return new s(E,~T.h).add(m)}n.abs=function(){return R(this)?N(this):this},n.add=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],I=0,D=0;D<=v;D++){var C=I+(this.i(D)&65535)+(T.i(D)&65535),_=(C>>>16)+(this.i(D)>>>16)+(T.i(D)>>>16);I=_>>>16,C&=65535,_&=65535,E[D]=_<<16|C}return new s(E,E[E.length-1]&-2147483648?-1:0)};function V(T,v){return T.add(N(v))}n.j=function(T){if(w(this)||w(T))return p;if(R(this))return R(T)?N(this).j(N(T)):N(N(this).j(T));if(R(T))return N(this.j(N(T)));if(0>this.l(y)&&0>T.l(y))return l(this.m()*T.m());for(var v=this.g.length+T.g.length,E=[],I=0;I<2*v;I++)E[I]=0;for(I=0;I<this.g.length;I++)for(var D=0;D<T.g.length;D++){var C=this.i(I)>>>16,_=this.i(I)&65535,hr=T.i(D)>>>16,qa=T.i(D)&65535;E[2*I+2*D]+=_*qa,Q(E,2*I+2*D),E[2*I+2*D+1]+=C*qa,Q(E,2*I+2*D+1),E[2*I+2*D+1]+=_*hr,Q(E,2*I+2*D+1),E[2*I+2*D+2]+=C*hr,Q(E,2*I+2*D+2)}for(I=0;I<v;I++)E[I]=E[2*I+1]<<16|E[2*I];for(I=v;I<2*v;I++)E[I]=0;return new s(E,0)};function Q(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function Z(T,v){this.g=T,this.h=v}function _e(T,v){if(w(v))throw Error("division by zero");if(w(T))return new Z(p,p);if(R(T))return v=_e(N(T),v),new Z(N(v.g),N(v.h));if(R(v))return v=_e(T,N(v)),new Z(N(v.g),v.h);if(30<T.g.length){if(R(T)||R(v))throw Error("slowDivide_ only works with positive integers.");for(var E=m,I=v;0>=I.l(T);)E=ft(E),I=ft(I);var D=be(E,1),C=be(I,1);for(I=be(I,2),E=be(E,2);!w(I);){var _=C.add(I);0>=_.l(T)&&(D=D.add(E),C=_),I=be(I,1),E=be(E,1)}return v=V(T,D.j(v)),new Z(D,v)}for(D=p;0<=T.l(v);){for(E=Math.max(1,Math.floor(T.m()/v.m())),I=Math.ceil(Math.log(E)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),C=l(E),_=C.j(v);R(_)||0<_.l(T);)E-=I,C=l(E),_=C.j(v);w(C)&&(C=m),D=D.add(C),T=V(T,_)}return new Z(D,T)}n.A=function(T){return _e(this,T).h},n.and=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)&T.i(I);return new s(E,this.h&T.h)},n.or=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)|T.i(I);return new s(E,this.h|T.h)},n.xor=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)^T.i(I);return new s(E,this.h^T.h)};function ft(T){for(var v=T.g.length+1,E=[],I=0;I<v;I++)E[I]=T.i(I)<<1|T.i(I-1)>>>31;return new s(E,T.h)}function be(T,v){var E=v>>5;v%=32;for(var I=T.g.length-E,D=[],C=0;C<I;C++)D[C]=0<v?T.i(C+E)>>>v|T.i(C+E+1)<<32-v:T.i(C+E);return new s(D,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,cI=yP.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Vr=yP.Integer=s}).apply(typeof mP<"u"?mP:typeof self<"u"?self:typeof window<"u"?window:{});var up=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},jr={};var uI,h6,da,lI,Qu,lp,dI,hI,fI;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof up=="object"&&up];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var b=c[g];if(!(b in f))break e;f=f[b]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,b={next:function(){if(!g&&f<c.length){var S=f++;return{value:d(S,c[S]),done:!1}}return g=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,g),c.apply(d,b)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function w(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,b,S){for(var L=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)L[Ce-2]=arguments[Ce];return d.prototype[b].apply(g,L)}}function R(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function N(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let b=c.length||0,S=g.length||0;c.length=b+S;for(let L=0;L<S;L++)c[b+L]=g[L]}else c.push(g)}}class V{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function Q(c){return/^[\s\xa0]*$/.test(c)}function Z(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function _e(c){return _e[" "](c),c}_e[" "]=function(){};var ft=Z().indexOf("Gecko")!=-1&&!(Z().toLowerCase().indexOf("webkit")!=-1&&Z().indexOf("Edge")==-1)&&!(Z().indexOf("Trident")!=-1||Z().indexOf("MSIE")!=-1)&&Z().indexOf("Edge")==-1;function be(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function T(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(c,d){let f,g;for(let b=1;b<arguments.length;b++){g=arguments[b];for(f in g)c[f]=g[f];for(let S=0;S<E.length;S++)f=E[S],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function C(c){a.setTimeout(()=>{throw c},0)}function _(){var c=Dg;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class hr{constructor(){this.h=this.g=null}add(d,f){let g=qa.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var qa=new V(()=>new Pk,c=>c.reset());class Pk{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Ga,Wa=!1,Dg=new hr,zT=()=>{let c=a.Promise.resolve(void 0);Ga=()=>{c.then(xk)}};var xk=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(f){C(f)}var d=qa;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Wa=!1};function Kr(){this.s=this.s,this.C=this.C}Kr.prototype.s=!1,Kr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Kr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Et(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}Et.prototype.h=function(){this.defaultPrevented=!0};var Ok=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c})();function Ka(c,d){if(Et.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(ft){e:{try{_e(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:kk[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ka.aa.h.call(this)}}w(Ka,Et);var kk={2:"touch",3:"pen",4:"mouse"};Ka.prototype.h=function(){Ka.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Qa="closure_listenable_"+(1e6*Math.random()|0),Fk=0;function Lk(c,d,f,g,b){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=b,this.key=++Fk,this.da=this.fa=!1}function Dl(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function bl(c){this.src=c,this.g={},this.h=0}bl.prototype.add=function(c,d,f,g,b){var S=c.toString();c=this.g[S],c||(c=this.g[S]=[],this.h++);var L=Cg(c,d,g,b);return-1<L?(d=c[L],f||(d.fa=!1)):(d=new Lk(d,this.src,S,!!g,b),d.fa=f,c.push(d)),d};function bg(c,d){var f=d.type;if(f in c.g){var g=c.g[f],b=Array.prototype.indexOf.call(g,d,void 0),S;(S=0<=b)&&Array.prototype.splice.call(g,b,1),S&&(Dl(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Cg(c,d,f,g){for(var b=0;b<c.length;++b){var S=c[b];if(!S.da&&S.listener==d&&S.capture==!!f&&S.ha==g)return b}return-1}var Sg="closure_lm_"+(1e6*Math.random()|0),Ag={};function qT(c,d,f,g,b){if(g&&g.once)return WT(c,d,f,g,b);if(Array.isArray(d)){for(var S=0;S<d.length;S++)qT(c,d[S],f,g,b);return null}return f=Pg(f),c&&c[Qa]?c.K(d,f,l(g)?!!g.capture:!!g,b):GT(c,d,f,!1,g,b)}function GT(c,d,f,g,b,S){if(!d)throw Error("Invalid event type");var L=l(b)?!!b.capture:!!b,Ce=Ng(c);if(Ce||(c[Sg]=Ce=new bl(c)),f=Ce.add(d,f,g,L,S),f.proxy)return f;if(g=Vk(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)Ok||(b=L),b===void 0&&(b=!1),c.addEventListener(d.toString(),g,b);else if(c.attachEvent)c.attachEvent(QT(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Vk(){function c(f){return d.call(c.src,c.listener,f)}let d=jk;return c}function WT(c,d,f,g,b){if(Array.isArray(d)){for(var S=0;S<d.length;S++)WT(c,d[S],f,g,b);return null}return f=Pg(f),c&&c[Qa]?c.L(d,f,l(g)?!!g.capture:!!g,b):GT(c,d,f,!0,g,b)}function KT(c,d,f,g,b){if(Array.isArray(d))for(var S=0;S<d.length;S++)KT(c,d[S],f,g,b);else g=l(g)?!!g.capture:!!g,f=Pg(f),c&&c[Qa]?(c=c.i,d=String(d).toString(),d in c.g&&(S=c.g[d],f=Cg(S,f,g,b),-1<f&&(Dl(S[f]),Array.prototype.splice.call(S,f,1),S.length==0&&(delete c.g[d],c.h--)))):c&&(c=Ng(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Cg(d,f,g,b)),(f=-1<c?d[c]:null)&&Rg(f))}function Rg(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Qa])bg(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(QT(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Ng(d))?(bg(f,c),f.h==0&&(f.src=null,d[Sg]=null)):Dl(c)}}}function QT(c){return c in Ag?Ag[c]:Ag[c]="on"+c}function jk(c,d){if(c.da)c=!0;else{d=new Ka(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&Rg(c),c=f.call(g,d)}return c}function Ng(c){return c=c[Sg],c instanceof bl?c:null}var Mg="__closure_events_fn_"+(1e9*Math.random()>>>0);function Pg(c){return typeof c=="function"?c:(c[Mg]||(c[Mg]=function(d){return c.handleEvent(d)}),c[Mg])}function It(){Kr.call(this),this.i=new bl(this),this.M=this,this.F=null}w(It,Kr),It.prototype[Qa]=!0,It.prototype.removeEventListener=function(c,d,f,g){KT(this,c,d,f,g)};function Pt(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new Et(d,c);else if(d instanceof Et)d.target=d.target||c;else{var b=d;d=new Et(g,c),I(d,b)}if(b=!0,f)for(var S=f.length-1;0<=S;S--){var L=d.g=f[S];b=Cl(L,g,!0,d)&&b}if(L=d.g=c,b=Cl(L,g,!0,d)&&b,b=Cl(L,g,!1,d)&&b,f)for(S=0;S<f.length;S++)L=d.g=f[S],b=Cl(L,g,!1,d)&&b}It.prototype.N=function(){if(It.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)Dl(f[g]);delete c.g[d],c.h--}}this.F=null},It.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},It.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function Cl(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,S=0;S<d.length;++S){var L=d[S];if(L&&!L.da&&L.capture==f){var Ce=L.listener,pt=L.ha||L.src;L.fa&&bg(c.i,L),b=Ce.call(pt,g)!==!1&&b}}return b&&!g.defaultPrevented}function YT(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function ZT(c){c.g=YT(()=>{c.g=null,c.i&&(c.i=!1,ZT(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class Uk extends Kr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:ZT(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ya(c){Kr.call(this),this.h=c,this.g={}}w(Ya,Kr);var JT=[];function XT(c){be(c.g,function(d,f){this.g.hasOwnProperty(f)&&Rg(d)},c),c.g={}}Ya.prototype.N=function(){Ya.aa.N.call(this),XT(this)},Ya.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xg=a.JSON.stringify,Bk=a.JSON.parse,$k=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Og(){}Og.prototype.h=null;function eD(c){return c.h||(c.h=c.i())}function tD(){}var Za={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function kg(){Et.call(this,"d")}w(kg,Et);function Fg(){Et.call(this,"c")}w(Fg,Et);var Hi={},nD=null;function Sl(){return nD=nD||new It}Hi.La="serverreachability";function rD(c){Et.call(this,Hi.La,c)}w(rD,Et);function Ja(c){let d=Sl();Pt(d,new rD(d))}Hi.STAT_EVENT="statevent";function iD(c,d){Et.call(this,Hi.STAT_EVENT,c),this.stat=d}w(iD,Et);function xt(c){let d=Sl();Pt(d,new iD(d,c))}Hi.Ma="timingevent";function oD(c,d){Et.call(this,Hi.Ma,c),this.size=d}w(oD,Et);function Xa(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function ec(){this.g=!0}ec.prototype.xa=function(){this.g=!1};function Hk(c,d,f,g,b,S){c.info(function(){if(c.g)if(S)for(var L="",Ce=S.split("&"),pt=0;pt<Ce.length;pt++){var ye=Ce[pt].split("=");if(1<ye.length){var wt=ye[0];ye=ye[1];var Tt=wt.split("_");L=2<=Tt.length&&Tt[1]=="type"?L+(wt+"="+ye+"&"):L+(wt+"=redacted&")}}else L=null;else L=S;return"XMLHTTP REQ ("+g+") [attempt "+b+"]: "+d+`
`+f+`
`+L})}function zk(c,d,f,g,b,S,L){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+b+"]: "+d+`
`+f+`
`+S+" "+L})}function Xo(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+Gk(c,f)+(g?" "+g:"")})}function qk(c,d){c.info(function(){return"TIMEOUT: "+d})}ec.prototype.info=function(){};function Gk(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var b=g[1];if(Array.isArray(b)&&!(1>b.length)){var S=b[0];if(S!="noop"&&S!="stop"&&S!="close")for(var L=1;L<b.length;L++)b[L]=""}}}}return xg(f)}catch{return d}}var Al={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},sD={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Lg;function Rl(){}w(Rl,Og),Rl.prototype.g=function(){return new XMLHttpRequest},Rl.prototype.i=function(){return{}},Lg=new Rl;function Qr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new Ya(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new aD}function aD(){this.i=null,this.g="",this.h=!1}var cD={},Vg={};function jg(c,d,f){c.L=1,c.v=xl(fr(d)),c.m=f,c.P=!0,uD(c,null)}function uD(c,d){c.F=Date.now(),Nl(c),c.A=fr(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),TD(f.i,"t",g),c.C=0,f=c.j.J,c.h=new aD,c.g=BD(c.j,f?d:null,!c.m),0<c.O&&(c.M=new Uk(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var b="readystatechange";Array.isArray(b)||(b&&(JT[0]=b.toString()),b=JT);for(var S=0;S<b.length;S++){var L=qT(f,b[S],g||d.handleEvent,!1,d.h||d);if(!L)break;d.g[L.key]=L}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Ja(),Hk(c.i,c.u,c.A,c.l,c.R,c.m)}Qr.prototype.ca=function(c){c=c.target;let d=this.M;d&&pr(c)==3?d.j():this.Y(c)},Qr.prototype.Y=function(c){try{if(c==this.g)e:{let Tt=pr(this.g);var d=this.g.Ba();let ns=this.g.Z();if(!(3>Tt)&&(Tt!=3||this.g&&(this.h.h||this.g.oa()||ND(this.g)))){this.J||Tt!=4||d==7||(d==8||0>=ns?Ja(3):Ja(2)),Ug(this);var f=this.g.Z();this.X=f;t:if(lD(this)){var g=ND(this.g);c="";var b=g.length,S=pr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){zi(this),tc(this);var L="";break t}this.h.i=new a.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(S&&d==b-1)});g.length=0,this.h.g+=c,this.C=0,L=this.h.g}else L=this.g.oa();if(this.o=f==200,zk(this.i,this.u,this.A,this.l,this.R,Tt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ce,pt=this.g;if((Ce=pt.g?pt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Q(Ce)){var ye=Ce;break t}}ye=null}if(f=ye)Xo(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Bg(this,f);else{this.o=!1,this.s=3,xt(12),zi(this),tc(this);break e}}if(this.P){f=!0;let Sn;for(;!this.J&&this.C<L.length;)if(Sn=Wk(this,L),Sn==Vg){Tt==4&&(this.s=4,xt(14),f=!1),Xo(this.i,this.l,null,"[Incomplete Response]");break}else if(Sn==cD){this.s=4,xt(15),Xo(this.i,this.l,L,"[Invalid Chunk]"),f=!1;break}else Xo(this.i,this.l,Sn,null),Bg(this,Sn);if(lD(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Tt!=4||L.length!=0||this.h.h||(this.s=1,xt(16),f=!1),this.o=this.o&&f,!f)Xo(this.i,this.l,L,"[Invalid Chunked Response]"),zi(this),tc(this);else if(0<L.length&&!this.W){this.W=!0;var wt=this.j;wt.g==this&&wt.ba&&!wt.M&&(wt.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),Wg(wt),wt.M=!0,xt(11))}}else Xo(this.i,this.l,L,null),Bg(this,L);Tt==4&&zi(this),this.o&&!this.J&&(Tt==4?LD(this.j,this):(this.o=!1,Nl(this)))}else l1(this.g),f==400&&0<L.indexOf("Unknown SID")?(this.s=3,xt(12)):(this.s=0,xt(13)),zi(this),tc(this)}}}catch{}finally{}};function lD(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Wk(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?Vg:(f=Number(d.substring(f,g)),isNaN(f)?cD:(g+=1,g+f>d.length?Vg:(d=d.slice(g,g+f),c.C=g+f,d)))}Qr.prototype.cancel=function(){this.J=!0,zi(this)};function Nl(c){c.S=Date.now()+c.I,dD(c,c.I)}function dD(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Xa(m(c.ba,c),d)}function Ug(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Qr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(qk(this.i,this.A),this.L!=2&&(Ja(),xt(17)),zi(this),this.s=2,tc(this)):dD(this,this.S-c)};function tc(c){c.j.G==0||c.J||LD(c.j,c)}function zi(c){Ug(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,XT(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Bg(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||$g(f.h,c))){if(!c.K&&$g(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var b=g;if(b[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Vl(f),Fl(f);else break e;Gg(f),xt(18)}}else f.za=b[1],0<f.za-f.T&&37500>b[2]&&f.F&&f.v==0&&!f.C&&(f.C=Xa(m(f.Za,f),6e3));if(1>=pD(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Gi(f,11)}else if((c.K||f.g==c)&&Vl(f),!Q(d))for(b=f.Da.g.parse(d),d=0;d<b.length;d++){let ye=b[d];if(f.T=ye[0],ye=ye[1],f.G==2)if(ye[0]=="c"){f.K=ye[1],f.ia=ye[2];let wt=ye[3];wt!=null&&(f.la=wt,f.j.info("VER="+f.la));let Tt=ye[4];Tt!=null&&(f.Aa=Tt,f.j.info("SVER="+f.Aa));let ns=ye[5];ns!=null&&typeof ns=="number"&&0<ns&&(g=1.5*ns,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Sn=c.g;if(Sn){let Ul=Sn.g?Sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ul){var S=g.h;S.g||Ul.indexOf("spdy")==-1&&Ul.indexOf("quic")==-1&&Ul.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(Hg(S,S.h),S.h=null))}if(g.D){let Kg=Sn.g?Sn.g.getResponseHeader("X-HTTP-Session-Id"):null;Kg&&(g.ya=Kg,Re(g.I,g.D,Kg))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var L=c;if(g.qa=UD(g,g.J?g.ia:null,g.W),L.K){gD(g.h,L);var Ce=L,pt=g.L;pt&&(Ce.I=pt),Ce.B&&(Ug(Ce),Nl(Ce)),g.g=L}else kD(g);0<f.i.length&&Ll(f)}else ye[0]!="stop"&&ye[0]!="close"||Gi(f,7);else f.G==3&&(ye[0]=="stop"||ye[0]=="close"?ye[0]=="stop"?Gi(f,7):qg(f):ye[0]!="noop"&&f.l&&f.l.ta(ye),f.v=0)}}Ja(4)}catch{}}var Kk=class{constructor(c,d){this.g=c,this.map=d}};function hD(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function fD(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function pD(c){return c.h?1:c.g?c.g.size:0}function $g(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Hg(c,d){c.g?c.g.add(d):c.h=d}function gD(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}hD.prototype.cancel=function(){if(this.i=mD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function mD(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return R(c.i)}function Qk(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function Yk(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function yD(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=Yk(c),g=Qk(c),b=g.length,S=0;S<b;S++)d.call(void 0,g[S],f&&f[S],c)}var vD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zk(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),b=null;if(0<=g){var S=c[f].substring(0,g);b=c[f].substring(g+1)}else S=c[f];d(S,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function qi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof qi){this.h=c.h,Ml(this,c.j),this.o=c.o,this.g=c.g,Pl(this,c.s),this.l=c.l;var d=c.i,f=new ic;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),_D(this,f),this.m=c.m}else c&&(d=String(c).match(vD))?(this.h=!1,Ml(this,d[1]||"",!0),this.o=nc(d[2]||""),this.g=nc(d[3]||"",!0),Pl(this,d[4]),this.l=nc(d[5]||"",!0),_D(this,d[6]||"",!0),this.m=nc(d[7]||"")):(this.h=!1,this.i=new ic(null,this.h))}qi.prototype.toString=function(){var c=[],d=this.j;d&&c.push(rc(d,ED,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(rc(d,ED,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(rc(f,f.charAt(0)=="/"?e1:Xk,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",rc(f,n1)),c.join("")};function fr(c){return new qi(c)}function Ml(c,d,f){c.j=f?nc(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Pl(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function _D(c,d,f){d instanceof ic?(c.i=d,r1(c.i,c.h)):(f||(d=rc(d,t1)),c.i=new ic(d,c.h))}function Re(c,d,f){c.i.set(d,f)}function xl(c){return Re(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function nc(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function rc(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,Jk),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Jk(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ED=/[#\/\?@]/g,Xk=/[#\?:]/g,e1=/[#\?]/g,t1=/[#\?@]/g,n1=/#/g;function ic(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Yr(c){c.g||(c.g=new Map,c.h=0,c.i&&Zk(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=ic.prototype,n.add=function(c,d){Yr(this),this.i=null,c=es(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function ID(c,d){Yr(c),d=es(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function wD(c,d){return Yr(c),d=es(c,d),c.g.has(d)}n.forEach=function(c,d){Yr(this),this.g.forEach(function(f,g){f.forEach(function(b){c.call(d,b,g,this)},this)},this)},n.na=function(){Yr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let b=c[g];for(let S=0;S<b.length;S++)f.push(d[g])}return f},n.V=function(c){Yr(this);let d=[];if(typeof c=="string")wD(this,c)&&(d=d.concat(this.g.get(es(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return Yr(this),this.i=null,c=es(this,c),wD(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function TD(c,d,f){ID(c,d),0<f.length&&(c.i=null,c.g.set(es(c,d),R(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let S=encodeURIComponent(String(g)),L=this.V(g);for(g=0;g<L.length;g++){var b=S;L[g]!==""&&(b+="="+encodeURIComponent(String(L[g]))),c.push(b)}}return this.i=c.join("&")};function es(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function r1(c,d){d&&!c.j&&(Yr(c),c.i=null,c.g.forEach(function(f,g){var b=g.toLowerCase();g!=b&&(ID(this,g),TD(this,b,f))},c)),c.j=d}function i1(c,d){let f=new ec;if(a.Image){let g=new Image;g.onload=y(Zr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(Zr,f,"TestLoadImage: error",!1,d,g),g.onabort=y(Zr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(Zr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function o1(c,d){let f=new ec,g=new AbortController,b=setTimeout(()=>{g.abort(),Zr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(S=>{clearTimeout(b),S.ok?Zr(f,"TestPingServer: ok",!0,d):Zr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),Zr(f,"TestPingServer: error",!1,d)})}function Zr(c,d,f,g,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),g(f)}catch{}}function s1(){this.g=new $k}function a1(c,d,f){let g=f||"";try{yD(c,function(b,S){let L=b;l(b)&&(L=xg(b)),d.push(g+S+"="+encodeURIComponent(L))})}catch(b){throw d.push(g+"type="+encodeURIComponent("_badmap")),b}}function oc(c){this.l=c.Ub||null,this.j=c.eb||!1}w(oc,Og),oc.prototype.g=function(){return new Ol(this.l,this.j)},oc.prototype.i=(function(c){return function(){return c}})({});function Ol(c,d){It.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Ol,It),n=Ol.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,ac(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,sc(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ac(this)),this.g&&(this.readyState=3,ac(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;DD(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function DD(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?sc(this):ac(this),this.readyState==3&&DD(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,sc(this))},n.Qa=function(c){this.g&&(this.response=c,sc(this))},n.ga=function(){this.g&&sc(this)};function sc(c){c.readyState=4,c.l=null,c.j=null,c.v=null,ac(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function ac(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ol.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function bD(c){let d="";return be(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function zg(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=bD(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Re(c,d,f))}function Oe(c){It.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Oe,It);var c1=/^https?$/i,u1=["POST","PUT"];n=Oe.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Lg.g(),this.v=this.o?eD(this.o):eD(Lg),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(S){CD(this,S);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var b in g)f.set(b,g[b]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let S of g.keys())f.set(S,g.get(S));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(S=>S.toLowerCase()=="content-type"),b=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(u1,d,void 0))||g||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,L]of f)this.g.setRequestHeader(S,L);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{RD(this),this.u=!0,this.g.send(c),this.u=!1}catch(S){CD(this,S)}};function CD(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,SD(c),kl(c)}function SD(c){c.A||(c.A=!0,Pt(c,"complete"),Pt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Pt(this,"complete"),Pt(this,"abort"),kl(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),kl(this,!0)),Oe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?AD(this):this.bb())},n.bb=function(){AD(this)};function AD(c){if(c.h&&typeof s<"u"&&(!c.v[1]||pr(c)!=4||c.Z()!=2)){if(c.u&&pr(c)==4)YT(c.Ea,0,c);else if(Pt(c,"readystatechange"),pr(c)==4){c.h=!1;try{let L=c.Z();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=L===0){var b=String(c.D).match(vD)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),g=!c1.test(b?b.toLowerCase():"")}f=g}if(f)Pt(c,"complete"),Pt(c,"success");else{c.m=6;try{var S=2<pr(c)?c.g.statusText:""}catch{S=""}c.l=S+" ["+c.Z()+"]",SD(c)}}finally{kl(c)}}}}function kl(c,d){if(c.g){RD(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Pt(c,"ready");try{f.onreadystatechange=g}catch{}}}function RD(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function pr(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<pr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),Bk(d)}};function ND(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function l1(c){let d={};c=(c.g&&2<=pr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(Q(c[g]))continue;var f=D(c[g]);let b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let S=d[b]||[];d[b]=S,S.push(f)}T(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function cc(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function MD(c){this.Aa=0,this.i=[],this.j=new ec,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=cc("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=cc("baseRetryDelayMs",5e3,c),this.cb=cc("retryDelaySeedMs",1e4,c),this.Wa=cc("forwardChannelMaxRetries",2,c),this.wa=cc("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new hD(c&&c.concurrentRequestLimit),this.Da=new s1,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=MD.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,g){xt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=UD(this,null,this.W),Ll(this)};function qg(c){if(PD(c),c.G==3){var d=c.U++,f=fr(c.I);if(Re(f,"SID",c.K),Re(f,"RID",d),Re(f,"TYPE","terminate"),uc(c,f),d=new Qr(c,c.j,d),d.L=2,d.v=xl(fr(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=BD(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Nl(d)}jD(c)}function Fl(c){c.g&&(Wg(c),c.g.cancel(),c.g=null)}function PD(c){Fl(c),c.u&&(a.clearTimeout(c.u),c.u=null),Vl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Ll(c){if(!fD(c.h)&&!c.s){c.s=!0;var d=c.Ga;Ga||zT(),Wa||(Ga(),Wa=!0),Dg.add(d,c),c.B=0}}function d1(c,d){return pD(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Xa(m(c.Ga,c,d),VD(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let b=new Qr(this,this.j,c),S=this.o;if(this.S&&(S?(S=v(S),I(S,this.S)):S=this.S),this.m!==null||this.O||(b.H=S,S=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=OD(this,b,d),f=fr(this.I),Re(f,"RID",c),Re(f,"CVER",22),this.D&&Re(f,"X-HTTP-Session-Id",this.D),uc(this,f),S&&(this.O?d="headers="+encodeURIComponent(String(bD(S)))+"&"+d:this.m&&zg(f,this.m,S)),Hg(this.h,b),this.Ua&&Re(f,"TYPE","init"),this.P?(Re(f,"$req",d),Re(f,"SID","null"),b.T=!0,jg(b,f,null)):jg(b,f,d),this.G=2}}else this.G==3&&(c?xD(this,c):this.i.length==0||fD(this.h)||xD(this))};function xD(c,d){var f;d?f=d.l:f=c.U++;let g=fr(c.I);Re(g,"SID",c.K),Re(g,"RID",f),Re(g,"AID",c.T),uc(c,g),c.m&&c.o&&zg(g,c.m,c.o),f=new Qr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=OD(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Hg(c.h,f),jg(f,g,d)}function uc(c,d){c.H&&be(c.H,function(f,g){Re(d,g,f)}),c.l&&yD({},function(f,g){Re(d,g,f)})}function OD(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var b=c.i;let S=-1;for(;;){let L=["count="+f];S==-1?0<f?(S=b[0].g,L.push("ofs="+S)):S=0:L.push("ofs="+S);let Ce=!0;for(let pt=0;pt<f;pt++){let ye=b[pt].g,wt=b[pt].map;if(ye-=S,0>ye)S=Math.max(0,b[pt].g-100),Ce=!1;else try{a1(wt,L,"req"+ye+"_")}catch{g&&g(wt)}}if(Ce){g=L.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function kD(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Ga||zT(),Wa||(Ga(),Wa=!0),Dg.add(d,c),c.v=0}}function Gg(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Xa(m(c.Fa,c),VD(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,FD(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Xa(m(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xt(10),Fl(this),FD(this))};function Wg(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function FD(c){c.g=new Qr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=fr(c.qa);Re(d,"RID","rpc"),Re(d,"SID",c.K),Re(d,"AID",c.T),Re(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Re(d,"TO",c.ja),Re(d,"TYPE","xmlhttp"),uc(c,d),c.m&&c.o&&zg(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=xl(fr(d)),f.m=null,f.P=!0,uD(f,c)}n.Za=function(){this.C!=null&&(this.C=null,Fl(this),Gg(this),xt(19))};function Vl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function LD(c,d){var f=null;if(c.g==d){Vl(c),Wg(c),c.g=null;var g=2}else if($g(c.h,d))f=d.D,gD(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var b=c.B;g=Sl(),Pt(g,new oD(g,f)),Ll(c)}else kD(c);else if(b=d.s,b==3||b==0&&0<d.X||!(g==1&&d1(c,d)||g==2&&Gg(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),b){case 1:Gi(c,5);break;case 4:Gi(c,10);break;case 3:Gi(c,6);break;default:Gi(c,2)}}}function VD(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Gi(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let b=!g;g=new qi(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ml(g,"https"),xl(g),b?i1(g.toString(),f):o1(g.toString(),f)}else xt(2);c.G=0,c.l&&c.l.sa(d),jD(c),PD(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function jD(c){if(c.G=0,c.ka=[],c.l){let d=mD(c.h);(d.length!=0||c.i.length!=0)&&(N(c.ka,d),N(c.ka,c.i),c.h.i.length=0,R(c.i),c.i.length=0),c.l.ra()}}function UD(c,d,f){var g=f instanceof qi?fr(f):new qi(f);if(g.g!="")d&&(g.g=d+"."+g.g),Pl(g,g.s);else{var b=a.location;g=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var S=new qi(null);g&&Ml(S,g),d&&(S.g=d),b&&Pl(S,b),f&&(S.l=f),g=S}return f=c.D,d=c.ya,f&&d&&Re(g,f,d),Re(g,"VER",c.la),uc(c,g),g}function BD(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Oe(new oc({eb:f})):new Oe(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function $D(){}n=$D.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function jl(){}jl.prototype.g=function(c,d){return new Zt(c,d)};function Zt(c,d){It.call(this),this.g=new MD(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!Q(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!Q(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new ts(this)}w(Zt,It),Zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Zt.prototype.close=function(){qg(this.g)},Zt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=xg(c),c=f);d.i.push(new Kk(d.Ya++,c)),d.G==3&&Ll(d)},Zt.prototype.N=function(){this.g.l=null,delete this.j,qg(this.g),delete this.g,Zt.aa.N.call(this)};function HD(c){kg.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}w(HD,kg);function zD(){Fg.call(this),this.status=1}w(zD,Fg);function ts(c){this.g=c}w(ts,$D),ts.prototype.ua=function(){Pt(this.g,"a")},ts.prototype.ta=function(c){Pt(this.g,new HD(c))},ts.prototype.sa=function(c){Pt(this.g,new zD)},ts.prototype.ra=function(){Pt(this.g,"b")},jl.prototype.createWebChannel=jl.prototype.g,Zt.prototype.send=Zt.prototype.o,Zt.prototype.open=Zt.prototype.m,Zt.prototype.close=Zt.prototype.close,fI=jr.createWebChannelTransport=function(){return new jl},hI=jr.getStatEventTarget=function(){return Sl()},dI=jr.Event=Hi,lp=jr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Al.NO_ERROR=0,Al.TIMEOUT=8,Al.HTTP_ERROR=6,Qu=jr.ErrorCode=Al,sD.COMPLETE="complete",lI=jr.EventType=sD,tD.EventType=Za,Za.OPEN="a",Za.CLOSE="b",Za.ERROR="c",Za.MESSAGE="d",It.prototype.listen=It.prototype.K,da=jr.WebChannel=tD,h6=jr.FetchXmlHttpFactory=oc,Oe.prototype.listenOnce=Oe.prototype.L,Oe.prototype.getLastError=Oe.prototype.Ka,Oe.prototype.getLastErrorCode=Oe.prototype.Ba,Oe.prototype.getStatus=Oe.prototype.Z,Oe.prototype.getResponseJson=Oe.prototype.Oa,Oe.prototype.getResponseText=Oe.prototype.oa,Oe.prototype.send=Oe.prototype.ea,Oe.prototype.setWithCredentials=Oe.prototype.Ha,uI=jr.XhrIo=Oe}).apply(typeof up<"u"?up:typeof self<"u"?self:typeof window<"u"?window:{});var vP="@firebase/firestore",_P="4.8.0";var dt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};dt.UNAUTHENTICATED=new dt(null),dt.GOOGLE_CREDENTIALS=new dt("google-credentials-uid"),dt.FIRST_PARTY=new dt("first-party-uid"),dt.MOCK_USER=new dt("mock-user");var Oa="11.10.0";var $o=new nr("@firebase/firestore");function ha(){return $o.logLevel}function B(n,...e){if($o.logLevel<=he.DEBUG){let t=e.map(rT);$o.debug(`Firestore (${Oa}): ${n}`,...t)}}function $r(n,...e){if($o.logLevel<=he.ERROR){let t=e.map(rT);$o.error(`Firestore (${Oa}): ${n}`,...t)}}function ki(n,...e){if($o.logLevel<=he.WARN){let t=e.map(rT);$o.warn(`Firestore (${Oa}): ${n}`,...t)}}function rT(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function K(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,hx(n,r,t)}function hx(n,e,t){let r=`FIRESTORE (${Oa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw $r(r),new Error(r)}function De(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||hx(e,i,r)}function ie(n,e){return n}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},U=class extends pn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ur=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var yp=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},vI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(dt.UNAUTHENTICATED))}shutdown(){}},_I=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},EI=class{constructor(e){this.t=e,this.currentUser=dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){De(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new Ur;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ur,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{B("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(B("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ur)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(B("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(De(typeof r.accessToken=="string",31837,{l:r}),new yp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return De(e===null||typeof e=="string",2055,{h:e}),new dt(e)}},II=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=dt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},wI=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new II(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},vp=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},TI=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Yt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){De(this.o===void 0,3512);let r=o=>{o.error!=null&&B("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,B("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{B("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):B("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new vp(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(De(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new vp(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function f6(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function fx(){return new TextEncoder}var tl=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=f6(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function le(n,e){return n<e?-1:n>e?1:0}function DI(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return le(r,i);{let o=fx(),s=p6(o.encode(EP(n,t)),o.encode(EP(e,t)));return s!==0?s:le(r,i)}}t+=r>65535?2:1}return le(n.length,e.length)}function EP(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function p6(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return le(n[t],e[t]);return le(n.length,e.length)}function Ea(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var IP="__name__",_p=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&K(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&K(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return le(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):DI(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Vr.fromString(e.substring(4,e.length-2))}},Me=class n extends _p{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new U(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},g6=/^[_a-zA-Z][_a-zA-Z0-9]*$/,mn=class n extends _p{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return g6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===IP}static keyField(){return new n([IP])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new U(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new U(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new U(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new U(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var q=class n{constructor(e){this.path=e}static fromPath(e){return new n(Me.fromString(e))}static fromName(e){return new n(Me.fromString(e).popFirst(5))}static empty(){return new n(Me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Me.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Me(e.slice()))}};function px(n,e,t){if(!t)throw new U(M.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function m6(n,e,t,r){if(e===!0&&r===!0)throw new U(M.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function wP(n){if(!q.isDocumentKey(n))throw new U(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function TP(n){if(q.isDocumentKey(n))throw new U(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function gx(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Yp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":K(12329,{type:typeof n})}function Ni(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new U(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Yp(n);throw new U(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Ze(n,e){let t={typeString:n};return e&&(t.value=e),t}function fl(n,e){if(!gx(n))throw new U(M.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new U(M.INVALID_ARGUMENT,t);return!0}var DP=-62135596800,bP=1e6,Je=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*bP);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new U(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new U(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<DP)throw new U(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new U(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/bP}_compareTo(e){return this.seconds===e.seconds?le(this.nanoseconds,e.nanoseconds):le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(fl(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-DP;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Je._jsonSchemaVersion="firestore/timestamp/1.0",Je._jsonSchema={type:Ze("string",Je._jsonSchemaVersion),seconds:Ze("number"),nanoseconds:Ze("number")};var se=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Je(0,0))}static max(){return new n(new Je(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var nl=-1,bI=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};bI.UNKNOWN_ID=-1;function y6(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=se.fromTimestamp(r===1e9?new Je(t+1,0):new Je(t,r));return new Ho(i,q.empty(),e)}function v6(n){return new Ho(n.readTime,n.key,nl)}var Ho=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(se.min(),q.empty(),nl)}static max(){return new n(se.max(),q.empty(),nl)}};function _6(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=q.comparator(n.documentKey,e.documentKey),t!==0?t:le(n.largestBatchId,e.largestBatchId))}var E6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",CI=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function ka(n){if(n.code!==M.FAILED_PRECONDITION||n.message!==E6)throw n;B("LocalStore","Unexpectedly lost primary lease")}var P=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&K(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function I6(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Fa(n){return n.name==="IndexedDbTransactionError"}var iT=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),oT=-1;function Zp(n){return n==null}function rl(n){return n===0&&1/n==-1/0}function w6(n){return typeof n=="number"&&Number.isInteger(n)&&!rl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var mx="";function T6(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=CP(e)),e=D6(n.get(t),e);return CP(e)}function D6(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case mx:t+="";break;default:t+=o}}return t}function CP(n){return n+mx+""}var b6="remoteDocuments",yx="owner";var vx="mutationQueues";var _x="mutations";var Ex="documentMutations",C6="remoteDocumentsV14";var Ix="remoteDocumentGlobal";var wx="targets";var Tx="targetDocuments";var Dx="targetGlobal",bx="collectionParents";var Cx="clientMetadata";var Sx="bundles";var Ax="namedQueries";var S6="indexConfiguration";var A6="indexState";var R6="indexEntries";var Rx="documentOverlays";var N6="globals";var M6=[vx,_x,Ex,b6,wx,yx,Dx,Tx,Cx,Ix,bx,Sx,Ax],ale=[...M6,Rx],P6=[vx,_x,Ex,C6,wx,yx,Dx,Tx,Cx,Ix,bx,Sx,Ax,Rx],x6=P6,O6=[...x6,S6,A6,R6];var cle=[...O6,N6];function SP(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ui(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Nx(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Be=class n{constructor(e,t){this.comparator=e,this.root=t||sr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,sr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ma(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ma(this.root,e,this.comparator,!1)}getReverseIterator(){return new ma(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ma(this.root,e,this.comparator,!0)}},ma=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},sr=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw K(43730,{key:this.key,value:this.value});if(this.right.isRed())throw K(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw K(27949);return e+(this.isRed()?0:1)}};sr.EMPTY=null,sr.RED=!0,sr.BLACK=!1;sr.EMPTY=new class{constructor(){this.size=0}get key(){throw K(57766)}get value(){throw K(16141)}get color(){throw K(16727)}get left(){throw K(29726)}get right(){throw K(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new sr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ht=class n{constructor(e){this.comparator=e,this.data=new Be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ep(this.data.getIterator())}getIteratorFrom(e){return new Ep(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Ep=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Cn=class n{constructor(e){this.fields=e,e.sort(mn.comparator)}static empty(){return new n([])}unionWith(e){let t=new ht(mn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ea(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Ip=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Mt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Ip("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Mt.EMPTY_BYTE_STRING=new Mt("");var k6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hr(n){if(De(!!n,39018),typeof n=="string"){let e=0,t=k6.exec(n);if(De(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ne(n.seconds),nanos:Ne(n.nanos)}}function Ne(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function zr(n){return typeof n=="string"?Mt.fromBase64String(n):Mt.fromUint8Array(n)}var Mx="server_timestamp",Px="__type__",xx="__previous_value__",Ox="__local_write_time__";function sT(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Px])===null||t===void 0?void 0:t.stringValue)===Mx}function Jp(n){let e=n.mapValue.fields[xx];return sT(e)?Jp(e):e}function il(n){let e=Hr(n.mapValue.fields[Ox].timestampValue);return new Je(e.seconds,e.nanos)}var SI=class{constructor(e,t,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},wp="(default)",Tp=class n{constructor(e,t){this.projectId=e,this.database=t||wp}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===wp}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var aT="__type__",kx="__max__",dp={mapValue:{fields:{__type__:{stringValue:kx}}}},cT="__vector__",Ia="value";function Fi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?sT(n)?4:Lx(n)?9007199254740991:Fx(n)?10:11:K(28295,{value:n})}function ur(n,e){if(n===e)return!0;let t=Fi(n);if(t!==Fi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return il(n).isEqual(il(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Hr(i.timestampValue),a=Hr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return zr(i.bytesValue).isEqual(zr(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return Ne(i.geoPointValue.latitude)===Ne(o.geoPointValue.latitude)&&Ne(i.geoPointValue.longitude)===Ne(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Ne(i.integerValue)===Ne(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ne(i.doubleValue),a=Ne(o.doubleValue);return s===a?rl(s)===rl(a):isNaN(s)&&isNaN(a)}return!1})(n,e);case 9:return Ea(n.arrayValue.values||[],e.arrayValue.values||[],ur);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(SP(s)!==SP(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!ur(s[u],a[u])))return!1;return!0})(n,e);default:return K(52216,{left:n})}}function ol(n,e){return(n.values||[]).find(t=>ur(t,e))!==void 0}function wa(n,e){if(n===e)return 0;let t=Fi(n),r=Fi(e);if(t!==r)return le(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return le(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=Ne(o.integerValue||o.doubleValue),u=Ne(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1})(n,e);case 3:return AP(n.timestampValue,e.timestampValue);case 4:return AP(il(n),il(e));case 5:return DI(n.stringValue,e.stringValue);case 6:return(function(o,s){let a=zr(o),u=zr(s);return a.compareTo(u)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=le(a[l],u[l]);if(h!==0)return h}return le(a.length,u.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=le(Ne(o.latitude),Ne(s.latitude));return a!==0?a:le(Ne(o.longitude),Ne(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return RP(n.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,u,l,h;let p=o.fields||{},m=s.fields||{},y=(a=p[Ia])===null||a===void 0?void 0:a.arrayValue,w=(u=m[Ia])===null||u===void 0?void 0:u.arrayValue,R=le(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=w?.values)===null||h===void 0?void 0:h.length)||0);return R!==0?R:RP(y,w)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===dp.mapValue&&s===dp.mapValue)return 0;if(o===dp.mapValue)return 1;if(s===dp.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=DI(u[p],h[p]);if(m!==0)return m;let y=wa(a[u[p]],l[h[p]]);if(y!==0)return y}return le(u.length,h.length)})(n.mapValue,e.mapValue);default:throw K(23264,{le:t})}}function AP(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return le(n,e);let t=Hr(n),r=Hr(e),i=le(t.seconds,r.seconds);return i!==0?i:le(t.nanos,r.nanos)}function RP(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=wa(t[i],r[i]);if(o)return o}return le(t.length,r.length)}function Ta(n){return AI(n)}function AI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=Hr(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return zr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return q.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=AI(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${AI(t.fields[s])}`;return i+"}"})(n.mapValue):K(61005,{value:n})}function pp(n){switch(Fi(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Jp(n);return e?16+pp(e):16;case 5:return 2*n.stringValue.length;case 6:return zr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+pp(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Ui(r.fields,(o,s)=>{i+=o.length+pp(s)}),i})(n.mapValue);default:throw K(13486,{value:n})}}function NP(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function RI(n){return!!n&&"integerValue"in n}function uT(n){return!!n&&"arrayValue"in n}function MP(n){return!!n&&"nullValue"in n}function PP(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function gp(n){return!!n&&"mapValue"in n}function Fx(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[aT])===null||t===void 0?void 0:t.stringValue)===cT}function Zu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Ui(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Zu(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Zu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Lx(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===kx}var lle={mapValue:{fields:{[aT]:{stringValue:cT},[Ia]:{arrayValue:{}}}}};var gn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!gp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zu(t)}setAll(e){let t=mn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Zu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());gp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ur(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];gp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ui(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Zu(this.value))}};function Vx(n){let e=[];return Ui(n.fields,(t,r)=>{let i=new mn([t]);if(gp(r)){let o=Vx(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Cn(e)}var jn=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,se.min(),se.min(),se.min(),gn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,se.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,se.min(),se.min(),gn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,se.min(),se.min(),gn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Da=class{constructor(e,t){this.position=e,this.inclusive=t}};function xP(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=q.comparator(q.fromName(s.referenceValue),t.key):r=wa(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function OP(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ur(n.position[t],e.position[t]))return!1;return!0}var ba=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function F6(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Dp=class{},Ye=class n extends Dp{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new MI(e,t,r):t==="array-contains"?new OI(e,r):t==="in"?new kI(e,r):t==="not-in"?new FI(e,r):t==="array-contains-any"?new LI(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new PI(e,r):new xI(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(wa(t,this.value)):t!==null&&Fi(this.value)===Fi(t)&&this.matchesComparison(wa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Un=class n extends Dp{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return jx(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function jx(n){return n.op==="and"}function Ux(n){return L6(n)&&jx(n)}function L6(n){for(let e of n.filters)if(e instanceof Un)return!1;return!0}function NI(n){if(n instanceof Ye)return n.field.canonicalString()+n.op.toString()+Ta(n.value);if(Ux(n))return n.filters.map(e=>NI(e)).join(",");{let e=n.filters.map(t=>NI(t)).join(",");return`${n.op}(${e})`}}function Bx(n,e){return n instanceof Ye?(function(r,i){return i instanceof Ye&&r.op===i.op&&r.field.isEqual(i.field)&&ur(r.value,i.value)})(n,e):n instanceof Un?(function(r,i){return i instanceof Un&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&Bx(s,i.filters[a]),!0):!1})(n,e):void K(19439)}function $x(n){return n instanceof Ye?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ta(t.value)}`})(n):n instanceof Un?(function(t){return t.op.toString()+" {"+t.getFilters().map($x).join(" ,")+"}"})(n):"Filter"}var MI=class extends Ye{constructor(e,t,r){super(e,t,r),this.key=q.fromName(r.referenceValue)}matches(e){let t=q.comparator(e.key,this.key);return this.matchesComparison(t)}},PI=class extends Ye{constructor(e,t){super(e,"in",t),this.keys=Hx("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},xI=class extends Ye{constructor(e,t){super(e,"not-in",t),this.keys=Hx("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function Hx(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>q.fromName(r.referenceValue))}var OI=class extends Ye{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return uT(t)&&ol(t.arrayValue,this.value)}},kI=class extends Ye{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&ol(this.value.arrayValue,t)}},FI=class extends Ye{constructor(e,t){super(e,"not-in",t)}matches(e){if(ol(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ol(this.value.arrayValue,t)}},LI=class extends Ye{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!uT(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ol(this.value.arrayValue,r))}};var VI=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function kP(n,e=null,t=[],r=[],i=null,o=null,s=null){return new VI(n,e,t,r,i,o,s)}function lT(n){let e=ie(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>NI(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),Zp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ta(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ta(r)).join(",")),e.Pe=t}return e.Pe}function dT(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!F6(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Bx(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!OP(n.startAt,e.startAt)&&OP(n.endAt,e.endAt)}function jI(n){return q.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var zo=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function V6(n,e,t,r,i,o,s,a){return new zo(n,e,t,r,i,o,s,a)}function hT(n){return new zo(n)}function FP(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function zx(n){return n.collectionGroup!==null}function Ju(n){let e=ie(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new ht(mn.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new ba(o,r))}),t.has(mn.keyField().canonicalString())||e.Te.push(new ba(mn.keyField(),r))}return e.Te}function ar(n){let e=ie(n);return e.Ie||(e.Ie=j6(e,Ju(n))),e.Ie}function j6(n,e){if(n.limitType==="F")return kP(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new ba(i.field,o)});let t=n.endAt?new Da(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Da(n.startAt.position,n.startAt.inclusive):null;return kP(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function UI(n,e){let t=n.filters.concat([e]);return new zo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function BI(n,e,t){return new zo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Xp(n,e){return dT(ar(n),ar(e))&&n.limitType===e.limitType}function qx(n){return`${lT(ar(n))}|lt:${n.limitType}`}function fa(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>$x(i)).join(", ")}]`),Zp(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Ta(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Ta(i)).join(",")),`Target(${r})`})(ar(n))}; limitType=${n.limitType})`}function eg(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):q.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of Ju(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,u){let l=xP(s,a,u);return s.inclusive?l<=0:l<0})(r.startAt,Ju(r),i)||r.endAt&&!(function(s,a,u){let l=xP(s,a,u);return s.inclusive?l>=0:l>0})(r.endAt,Ju(r),i))})(n,e)}function U6(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Gx(n){return(e,t)=>{let r=!1;for(let i of Ju(n)){let o=B6(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function B6(n,e,t){let r=n.field.isKeyField()?q.comparator(e.key,t.key):(function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?wa(u,l):K(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return K(19790,{direction:n.dir})}}var qr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ui(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return Nx(this.inner)}size(){return this.innerSize}};var $6=new Be(q.comparator);function Gr(){return $6}var Wx=new Be(q.comparator);function Yu(...n){let e=Wx;for(let t of n)e=e.insert(t.key,t);return e}function Kx(n){let e=Wx;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Vo(){return Xu()}function Qx(){return Xu()}function Xu(){return new qr(n=>n.toString(),(n,e)=>n.isEqual(e))}var H6=new Be(q.comparator),z6=new ht(q.comparator);function pe(...n){let e=z6;for(let t of n)e=e.add(t);return e}var q6=new ht(le);function G6(){return q6}function fT(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rl(e)?"-0":e}}function Yx(n){return{integerValue:""+n}}function W6(n,e){return w6(e)?Yx(e):fT(n,e)}var Ca=class{constructor(){this._=void 0}};function K6(n,e,t){return n instanceof Sa?(function(i,o){let s={fields:{[Px]:{stringValue:Mx},[Ox]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&sT(o)&&(o=Jp(o)),o&&(s.fields[xx]=o),{mapValue:s}})(t,e):n instanceof qo?Jx(n,e):n instanceof Go?Xx(n,e):(function(i,o){let s=Zx(i,o),a=LP(s)+LP(i.Ee);return RI(s)&&RI(i.Ee)?Yx(a):fT(i.serializer,a)})(n,e)}function Q6(n,e,t){return n instanceof qo?Jx(n,e):n instanceof Go?Xx(n,e):t}function Zx(n,e){return n instanceof Aa?(function(r){return RI(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var Sa=class extends Ca{},qo=class extends Ca{constructor(e){super(),this.elements=e}};function Jx(n,e){let t=eO(e);for(let r of n.elements)t.some(i=>ur(i,r))||t.push(r);return{arrayValue:{values:t}}}var Go=class extends Ca{constructor(e){super(),this.elements=e}};function Xx(n,e){let t=eO(e);for(let r of n.elements)t=t.filter(i=>!ur(i,r));return{arrayValue:{values:t}}}var Aa=class extends Ca{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function LP(n){return Ne(n.integerValue||n.doubleValue)}function eO(n){return uT(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Y6(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof qo&&i instanceof qo||r instanceof Go&&i instanceof Go?Ea(r.elements,i.elements,ur):r instanceof Aa&&i instanceof Aa?ur(r.Ee,i.Ee):r instanceof Sa&&i instanceof Sa})(n.transform,e.transform)}var $I=class{constructor(e,t){this.version=e,this.transformResults=t}},Br=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function mp(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Ra=class{};function tO(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new sl(n.key,Br.none()):new Wo(n.key,n.data,Br.none());{let t=n.data,r=gn.empty(),i=new ht(mn.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new lr(n.key,r,new Cn(i.toArray()),Br.none())}}function Z6(n,e,t){n instanceof Wo?(function(i,o,s){let a=i.value.clone(),u=jP(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(n,e,t):n instanceof lr?(function(i,o,s){if(!mp(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=jP(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(nO(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function el(n,e,t,r){return n instanceof Wo?(function(o,s,a,u){if(!mp(o.precondition,s))return a;let l=o.value.clone(),h=UP(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(n,e,t,r):n instanceof lr?(function(o,s,a,u){if(!mp(o.precondition,s))return a;let l=UP(o.fieldTransforms,u,s),h=s.data;return h.setAll(nO(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(n,e,t,r):(function(o,s,a){return mp(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(n,e,t)}function J6(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=Zx(r.transform,i||null);o!=null&&(t===null&&(t=gn.empty()),t.set(r.field,o))}return t||null}function VP(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ea(r,i,(o,s)=>Y6(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Wo=class extends Ra{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},lr=class extends Ra{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function nO(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function jP(n,e,t){let r=new Map;De(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Q6(s,a,t[i]))}return r}function UP(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,K6(o,s,e))}return r}var sl=class extends Ra{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},HI=class extends Ra{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var zI=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&Z6(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=el(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=el(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=Qx();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=tO(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(se.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),pe())}isEqual(e){return this.batchId===e.batchId&&Ea(this.mutations,e.mutations,(t,r)=>VP(t,r))&&Ea(this.baseMutations,e.baseMutations,(t,r)=>VP(t,r))}},qI=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){De(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return H6})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var GI=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var WI=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Ke,me;function X6(n){switch(n){case M.OK:return K(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return K(15467,{code:n})}}function rO(n){if(n===void 0)return $r("GRPC error has no .code"),M.UNKNOWN;switch(n){case Ke.OK:return M.OK;case Ke.CANCELLED:return M.CANCELLED;case Ke.UNKNOWN:return M.UNKNOWN;case Ke.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Ke.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Ke.INTERNAL:return M.INTERNAL;case Ke.UNAVAILABLE:return M.UNAVAILABLE;case Ke.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Ke.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Ke.NOT_FOUND:return M.NOT_FOUND;case Ke.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Ke.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Ke.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Ke.ABORTED:return M.ABORTED;case Ke.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Ke.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Ke.DATA_LOSS:return M.DATA_LOSS;default:return K(39323,{code:n})}}(me=Ke||(Ke={}))[me.OK=0]="OK",me[me.CANCELLED=1]="CANCELLED",me[me.UNKNOWN=2]="UNKNOWN",me[me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",me[me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",me[me.NOT_FOUND=5]="NOT_FOUND",me[me.ALREADY_EXISTS=6]="ALREADY_EXISTS",me[me.PERMISSION_DENIED=7]="PERMISSION_DENIED",me[me.UNAUTHENTICATED=16]="UNAUTHENTICATED",me[me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",me[me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",me[me.ABORTED=10]="ABORTED",me[me.OUT_OF_RANGE=11]="OUT_OF_RANGE",me[me.UNIMPLEMENTED=12]="UNIMPLEMENTED",me[me.INTERNAL=13]="INTERNAL",me[me.UNAVAILABLE=14]="UNAVAILABLE",me[me.DATA_LOSS=15]="DATA_LOSS";var BP=null;var eG=new Vr([4294967295,4294967295],0);function $P(n){let e=fx().encode(n),t=new cI;return t.update(e),new Uint8Array(t.digest())}function HP(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Vr([t,r],0),new Vr([i,o],0)]}var KI=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new jo(`Invalid padding: ${t}`);if(r<0)throw new jo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new jo(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new jo(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Vr.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(Vr.fromNumber(r)));return i.compare(eG)===1&&(i=new Vr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=$P(e),[r,i]=HP(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let t=$P(e),[r,i]=HP(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},jo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var bp=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,al.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(se.min(),i,new Be(le),Gr(),pe())}},al=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,pe(),pe(),pe())}};var ya=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},Cp=class{constructor(e,t){this.targetId=e,this.De=t}},Sp=class{constructor(e,t,r=Mt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Ap=class{constructor(){this.ve=0,this.Ce=zP(),this.Fe=Mt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=pe(),t=pe(),r=pe();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:K(38017,{changeType:o})}}),new al(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=zP()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,De(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},QI=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Gr(),this.je=hp(),this.Je=hp(),this.He=new Be(le)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:K(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(jI(o))if(r===0){let s=new q(o.path);this.Xe(t,s,jn.newNoDocument(s,se.min()))}else De(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let a=this._t(e),u=a?this.ut(a,e,s):1;if(u!==0){this.rt(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,l)}BP?.ct((function(h,p,m,y,w){var R,N,V,Q,Z,_e;let ft={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},be=p.unchangedNames;return be&&(ft.bloomFilter={applied:w===0,hashCount:(R=be?.hashCount)!==null&&R!==void 0?R:0,bitmapLength:(Q=(V=(N=be?.bits)===null||N===void 0?void 0:N.bitmap)===null||V===void 0?void 0:V.length)!==null&&Q!==void 0?Q:0,padding:(_e=(Z=be?.bits)===null||Z===void 0?void 0:Z.padding)!==null&&_e!==void 0?_e:0,mightContain:T=>{var v;return(v=y?.mightContain(T))!==null&&v!==void 0&&v}}),ft})(s,e.De,this.We.lt(),a,u))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=zr(r).toUint8Array()}catch(u){if(u instanceof Ip)return ki("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new KI(s,i,o)}catch(u){return ki(u instanceof jo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&jI(a.target)){let u=new q(a.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,jn.newNoDocument(u,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=pe();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new bp(e,t,this.He,this.ze,r);return this.ze=Gr(),this.je=hp(),this.Je=hp(),this.He=new Be(le),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Ap,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new ht(le),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new ht(le),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||B("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Ap),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function hp(){return new Be(q.comparator)}function zP(){return new Be(q.comparator)}var tG={asc:"ASCENDING",desc:"DESCENDING"},nG={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rG={and:"AND",or:"OR"},YI=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function ZI(n,e){return n.useProto3Json||Zp(e)?e:{value:e}}function Rp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function iO(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function iG(n,e){return Rp(n,e.toTimestamp())}function cr(n){return De(!!n,49232),se.fromTimestamp((function(t){let r=Hr(t);return new Je(r.seconds,r.nanos)})(n))}function pT(n,e){return JI(n,e).canonicalString()}function JI(n,e){let t=(function(i){return new Me(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function oO(n){let e=Me.fromString(n);return De(lO(e),10190,{key:e.toString()}),e}function XI(n,e){return pT(n.databaseId,e.path)}function pI(n,e){let t=oO(e);if(t.get(1)!==n.databaseId.projectId)throw new U(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new U(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new q(aO(t))}function sO(n,e){return pT(n.databaseId,e)}function oG(n){let e=oO(n);return e.length===4?Me.emptyPath():aO(e)}function ew(n){return new Me(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function aO(n){return De(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function qP(n,e,t){return{name:XI(n,e),fields:t.value.mapValue.fields}}function sG(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:K(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,h){return l.useProto3Json?(De(h===void 0||typeof h=="string",58123),Mt.fromBase64String(h||"")):(De(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Mt.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let h=l.code===void 0?M.UNKNOWN:rO(l.code);return new U(h,l.message||"")})(s);t=new Sp(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=pI(n,r.document.name),o=cr(r.document.updateTime),s=r.document.createTime?cr(r.document.createTime):se.min(),a=new gn({mapValue:{fields:r.document.fields}}),u=jn.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new ya(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=pI(n,r.document),o=r.readTime?cr(r.readTime):se.min(),s=jn.newNoDocument(i,o),a=r.removedTargetIds||[];t=new ya([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=pI(n,r.document),o=r.removedTargetIds||[];t=new ya([],o,i,null)}else{if(!("filter"in e))return K(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new WI(i,o),a=r.targetId;t=new Cp(a,s)}}return t}function aG(n,e){let t;if(e instanceof Wo)t={update:qP(n,e.key,e.value)};else if(e instanceof sl)t={delete:XI(n,e.key)};else if(e instanceof lr)t={update:qP(n,e.key,e.data),updateMask:mG(e.fieldMask)};else{if(!(e instanceof HI))return K(16599,{Rt:e.type});t={verify:XI(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof Sa)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof qo)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Go)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Aa)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw K(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:iG(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:K(27497)})(n,e.precondition)),t}function cG(n,e){return n&&n.length>0?(De(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?cr(i.updateTime):cr(o);return s.isEqual(se.min())&&(s=cr(o)),new $I(s,i.transformResults||[])})(t,e))):[]}function uG(n,e){return{documents:[sO(n,e.path)]}}function lG(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=sO(n,i);let o=(function(l){if(l.length!==0)return uO(Un.create(l,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(h=>(function(m){return{field:pa(m.field),direction:fG(m.dir)}})(h))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=ZI(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:t,parent:i}}function dG(n){let e=oG(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){De(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=(function(p){let m=cO(p);return m instanceof Un&&Ux(m)?m.getFilters():[m]})(t.where));let s=[];t.orderBy&&(s=(function(p){return p.map(m=>(function(w){return new ba(ga(w.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(w.direction))})(m))})(t.orderBy));let a=null;t.limit&&(a=(function(p){let m;return m=typeof p=="object"?p.value:p,Zp(m)?null:m})(t.limit));let u=null;t.startAt&&(u=(function(p){let m=!!p.before,y=p.values||[];return new Da(y,m)})(t.startAt));let l=null;return t.endAt&&(l=(function(p){let m=!p.before,y=p.values||[];return new Da(y,m)})(t.endAt)),V6(e,i,s,o,a,"F",u,l)}function hG(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function cO(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=ga(t.unaryFilter.field);return Ye.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ga(t.unaryFilter.field);return Ye.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ga(t.unaryFilter.field);return Ye.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=ga(t.unaryFilter.field);return Ye.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return K(61313);default:return K(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ye.create(ga(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return K(58110);default:return K(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Un.create(t.compositeFilter.filters.map(r=>cO(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return K(1026)}})(t.compositeFilter.op))})(n):K(30097,{filter:n})}function fG(n){return tG[n]}function pG(n){return nG[n]}function gG(n){return rG[n]}function pa(n){return{fieldPath:n.canonicalString()}}function ga(n){return mn.fromServerFormat(n.fieldPath)}function uO(n){return n instanceof Ye?(function(t){if(t.op==="=="){if(PP(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NAN"}};if(MP(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(PP(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NOT_NAN"}};if(MP(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pa(t.field),op:pG(t.op),value:t.value}}})(n):n instanceof Un?(function(t){let r=t.getFilters().map(i=>uO(i));return r.length===1?r[0]:{compositeFilter:{op:gG(t.op),filters:r}}})(n):K(54877,{filter:n})}function mG(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function lO(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var cl=class n{constructor(e,t,r,i,o=se.min(),s=se.min(),a=Mt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var tw=class{constructor(e){this.gt=e}};function yG(n){let e=dG({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?BI(e,e.limit,"L"):e}var Np=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Ne(e.integerValue));else if("doubleValue"in e){let r=Ne(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),rl(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=Hr(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(zr(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?Lx(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):Fx(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):K(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=Ia,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(Ne(a)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),q.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};Np.Ut=new Np;var nw=class{constructor(){this.Dn=new rw}addToCollectionParentIndex(e,t){return this.Dn.add(t),P.resolve()}getCollectionParents(e,t){return P.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return P.resolve()}deleteFieldIndex(e,t){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,t){return P.resolve()}getDocumentsMatchingTarget(e,t){return P.resolve(null)}getIndexType(e,t){return P.resolve(0)}getFieldIndexes(e,t){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,t){return P.resolve(Ho.min())}getMinOffsetFromCollectionGroup(e,t){return P.resolve(Ho.min())}updateCollectionGroup(e,t,r){return P.resolve()}updateIndexEntries(e,t){return P.resolve()}},rw=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ht(Me.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ht(Me.comparator)).toArray()}};var dle=new Uint8Array(0);var GP={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},dO=41943040,bn=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};bn.DEFAULT_COLLECTION_PERCENTILE=10,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bn.DEFAULT=new bn(dO,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bn.DISABLED=new bn(-1,0,0);var ul=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var WP="LruGarbageCollector",vG=1048576;function KP([n,e],[t,r]){let i=le(n,t);return i===0?le(e,r):i}var iw=class{constructor(e){this.Tr=e,this.buffer=new ht(KP),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();KP(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},ow=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){B(WP,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Fa(t)?B(WP,"Ignoring IndexedDB error during garbage collection: ",t):await ka(t)}await this.Rr(3e5)})}},sw=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return P.resolve(iT.ue);let r=new iw(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(B("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(GP)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(B("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),GP):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(B("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),ha()<=he.DEBUG&&B("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function _G(n,e){return new sw(n,e)}var aw=class{constructor(){this.changes=new qr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,jn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?P.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var cw=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var uw=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&el(r.mutation,i,Cn.empty(),Je.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,pe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=pe()){let i=Vo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Yu();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Vo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,pe()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Gr(),s=Xu(),a=(function(){return Xu()})();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof lr)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),el(h.mutation,l,h.mutation.getFieldMask(),Je.now())):s.set(l.key,Cn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new cw(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Xu(),i=new Be((s,a)=>s-a),o=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||Cn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||pe()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=Qx();h.forEach(m=>{if(!o.has(m)){let y=tO(t.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return P.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return q.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):zx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):P.resolve(Vo()),a=nl,u=o;return s.next(l=>P.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?P.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,pe())).next(h=>({batchId:a,changes:Kx(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new q(t)).next(r=>{let i=Yu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Yu();return this.indexManager.getCollectionParents(e,o).next(a=>P.forEach(a,u=>{let l=(function(p,m){return new zo(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,jn.newInvalidDocument(h)))});let a=Yu();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&el(h.mutation,l,Cn.empty(),Je.now()),eg(t,l)&&(a=a.insert(u,l))}),a})}};var lw=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return P.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:cr(i.createTime)}})(t)),P.resolve()}getNamedQuery(e,t){return P.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:yG(i.bundledQuery),readTime:cr(i.readTime)}})(t)),P.resolve()}};var dw=class{constructor(){this.overlays=new Be(q.comparator),this.kr=new Map}getOverlay(e,t){return P.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Vo();return P.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),P.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),P.resolve()}getOverlaysForCollection(e,t,r){let i=Vo(),o=t.length+1,s=new q(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return P.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Be((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Vo(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Vo(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return P.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new GI(t,r));let o=this.kr.get(t);o===void 0&&(o=pe(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var hw=class{constructor(){this.sessionToken=Mt.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,P.resolve()}};var ll=class{constructor(){this.qr=new ht(Qe.Qr),this.$r=new ht(Qe.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new Qe(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Qe(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new q(new Me([])),r=new Qe(t,e),i=new Qe(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new q(new Me([])),r=new Qe(t,e),i=new Qe(t,e+1),o=pe();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Qe(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Qe=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return q.comparator(e.key,t.key)||le(e.Hr,t.Hr)}static Ur(e,t){return le(e.Hr,t.Hr)||q.comparator(e.key,t.key)}};var fw=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new ht(Qe.Qr)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new zI(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new Qe(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return P.resolve(s)}lookupMutationBatch(e,t){return P.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return P.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?oT:this.er-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Qe(t,0),i=new Qe(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),P.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ht(le);return t.forEach(i=>{let o=new Qe(i,0),s=new Qe(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),P.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;q.isDocumentKey(o)||(o=o.child(""));let s=new Qe(new q(o),0),a=new ht(le);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Hr)),!0)},s),P.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){De(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return P.forEach(t.mutations,i=>{let o=new Qe(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new Qe(t,0),i=this.Yr.firstAfterOrEqual(r);return P.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var pw=class{constructor(e){this.ni=e,this.docs=(function(){return new Be(q.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return P.resolve(r?r.document.mutableCopy():jn.newInvalidDocument(t))}getEntries(e,t){let r=Gr();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():jn.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Gr(),s=t.path,a=new q(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||_6(v6(h),r)<=0||(i.has(h.key)||eg(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return P.resolve(o)}getAllFromCollectionGroup(e,t,r,i){K(9500)}ri(e,t){return P.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new gw(this)}getSize(e){return P.resolve(this.size)}},gw=class extends aw{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),P.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var mw=class{constructor(e){this.persistence=e,this.ii=new qr(t=>lT(t),dT),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this.si=0,this.oi=new ll,this.targetCount=0,this._i=ul.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),P.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new ul(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,P.resolve()}updateTargetData(e,t){return this.hr(t),P.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),P.waitFor(o).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return P.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),P.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),P.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),P.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return P.resolve(r)}containsKey(e,t){return P.resolve(this.oi.containsKey(t))}};var Mp=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new iT(0),this.ci=!1,this.ci=!0,this.li=new hw,this.referenceDelegate=e(this),this.hi=new mw(this),this.indexManager=new nw,this.remoteDocumentCache=(function(i){return new pw(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new tw(t),this.Ti=new lw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new dw,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new fw(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){B("MemoryPersistence","Starting transaction:",e);let i=new yw(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return P.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},yw=class extends CI{constructor(e){super(),this.currentSequenceNumber=e}},vw=class n{constructor(e){this.persistence=e,this.Ai=new ll,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw K(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),P.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),P.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.mi,r=>{let i=q.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,se.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return P.or([()=>P.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},Pp=class n{constructor(e,t){this.persistence=e,this.gi=new qr(r=>T6(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=_G(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return P.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return P.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?P.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,se.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),P.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),P.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),P.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),P.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=pp(e.data.value)),t}Sr(e,t,r){return P.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return P.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var _w=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=pe(),i=pe();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var Ew=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Iw=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return FN()?8:I6(lt())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Ew;return this.ws(e,t,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,t,s,a.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(ha()<=he.DEBUG&&B("QueryEngine","SDK will not create cache indexes for query:",fa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),P.resolve()):(ha()<=he.DEBUG&&B("QueryEngine","Query:",fa(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(ha()<=he.DEBUG&&B("QueryEngine","The SDK decides to create cache indexes for query:",fa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ar(t))):P.resolve())}ps(e,t){if(FP(t))return P.resolve(null);let r=ar(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=BI(t,null,"F"),r=ar(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=pe(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(t,a);return this.Ds(t,l,s,u.readTime)?this.ps(e,BI(t,null,"F")):this.vs(e,l,t,u)}))})))}ys(e,t,r,i){return FP(t)||i.isEqual(se.min())?P.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?P.resolve(null):(ha()<=he.DEBUG&&B("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),fa(t)),this.vs(e,s,t,y6(i,nl)).next(a=>a))})}bs(e,t){let r=new ht(Gx(e));return t.forEach((i,o)=>{eg(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return ha()<=he.DEBUG&&B("QueryEngine","Using full collection scan to execute query:",fa(t)),this.gs.getDocumentsMatchingQuery(e,t,Ho.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var gT="LocalStore",EG=3e8,ww=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Be(le),this.Ms=new qr(o=>lT(o),dT),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uw(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function IG(n,e,t,r){return new ww(n,e,t,r)}async function hO(n,e){let t=ie(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=pe();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})}function wG(n,e){let t=ie(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,u,l,h){let p=l.batch,m=p.keys(),y=P.resolve();return m.forEach(w=>{y=y.next(()=>h.getEntry(u,w)).next(R=>{let N=l.docVersions.get(w);De(N!==null,48541),R.version.compareTo(N)<0&&(p.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),h.addEntry(R)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let u=pe();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function fO(n){let e=ie(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function TG(n,e){let t=ie(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Mt.EMPTY_BYTE_STRING,se.min()).withLastLimboFreeSnapshotVersion(se.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),(function(R,N,V){return R.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=EG?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(m,y,h)&&a.push(t.hi.updateTargetData(o,y))});let u=Gr(),l=pe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(DG(o,s,e.documentUpdates).next(h=>{u=h.Ls,l=h.ks})),!r.isEqual(se.min())){let h=t.hi.getLastRemoteSnapshotVersion(o).next(p=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return P.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.Fs=i,o))}function DG(n,e,t){let r=pe(),i=pe();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Gr();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(se.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):B(gT,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function bG(n,e){let t=ie(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=oT),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function CG(n,e){let t=ie(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,P.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new cl(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function Tw(n,e,t){let r=ie(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!Fa(s))throw s;B(gT,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function QP(n,e,t){let r=ie(n),i=se.min(),o=pe();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,h){let p=ie(u),m=p.Ms.get(h);return m!==void 0?P.resolve(p.Fs.get(m)):p.hi.getTargetData(l,h)})(r,s,ar(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:se.min(),t?o:pe())).next(a=>(SG(r,U6(e),a),{documents:a,qs:o})))}function SG(n,e,t){let r=n.xs.get(e)||se.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}var xp=class{constructor(){this.activeTargetIds=G6()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Dw=class{constructor(){this.Fo=new xp,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new xp,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var bw=class{xo(e){}shutdown(){}};var YP="ConnectivityMonitor",Op=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){B(YP,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){B(YP,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var fp=null;function Cw(){return fp===null?fp=(function(){return 268435456+Math.round(2147483648*Math.random())})():fp++,"0x"+fp.toString(16)}var gI="RestConnection",AG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Sw=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===wp?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=Cw(),a=this.Go(e,t.toUriEncodedString());B(gI,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(a),h=_i(l);return this.jo(e,a,u,r,h).then(p=>(B(gI,`Received RPC '${e}' ${s}: `,p),p),p=>{throw ki(gI,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Oa})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=AG[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var Aw=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Nt="WebChannelConnection",Rw=class extends Sw{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=Cw();return new Promise((a,u)=>{let l=new uI;l.setWithCredentials(!0),l.listenOnce(lI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Qu.NO_ERROR:let p=l.getResponseJson();B(Nt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Qu.TIMEOUT:B(Nt,`RPC '${e}' ${s} timed out`),u(new U(M.DEADLINE_EXCEEDED,"Request time out"));break;case Qu.HTTP_ERROR:let m=l.getStatus();if(B(Nt,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let w=y?.error;if(w&&w.status&&w.message){let R=(function(V){let Q=V.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(Q)>=0?Q:M.UNKNOWN})(w.status);u(new U(R,w.message))}else u(new U(M.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new U(M.UNAVAILABLE,"Connection failed."));break;default:K(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{B(Nt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);B(Nt,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",h,r,15)})}P_(e,t,r){let i=Cw(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=fI(),a=hI(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");B(Nt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.T_(p);let m=!1,y=!1,w=new Aw({Ho:N=>{y?B(Nt,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(B(Nt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),B(Nt,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},Yo:()=>p.close()}),R=(N,V,Q)=>{N.listen(V,Z=>{try{Q(Z)}catch(_e){setTimeout(()=>{throw _e},0)}})};return R(p,da.EventType.OPEN,()=>{y||(B(Nt,`RPC '${e}' stream ${i} transport opened.`),w.s_())}),R(p,da.EventType.CLOSE,()=>{y||(y=!0,B(Nt,`RPC '${e}' stream ${i} transport closed`),w.__(),this.I_(p))}),R(p,da.EventType.ERROR,N=>{y||(y=!0,ki(Nt,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),w.__(new U(M.UNAVAILABLE,"The operation could not be completed")))}),R(p,da.EventType.MESSAGE,N=>{var V;if(!y){let Q=N.data[0];De(!!Q,16349);let Z=Q,_e=Z?.error||((V=Z[0])===null||V===void 0?void 0:V.error);if(_e){B(Nt,`RPC '${e}' stream ${i} received error:`,_e);let ft=_e.status,be=(function(E){let I=Ke[E];if(I!==void 0)return rO(I)})(ft),T=_e.message;be===void 0&&(be=M.INTERNAL,T="Unknown error status: "+ft+" with message "+_e.message),y=!0,w.__(new U(be,T)),p.close()}else B(Nt,`RPC '${e}' stream ${i} received:`,Q),w.a_(Q)}}),R(a,dI.STAT_EVENT,N=>{N.stat===lp.PROXY?B(Nt,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===lp.NOPROXY&&B(Nt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.o_()},0),w}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function mI(){return typeof document<"u"?document:null}function tg(n){return new YI(n,!0)}var kp=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&B("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var ZP="PersistentStream",Fp=class{constructor(e,t,r,i,o,s,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new kp(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===M.RESOURCE_EXHAUSTED?($r(t.toString()),$r("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new U(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return B(ZP,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(B(ZP,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Nw=class extends Fp{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=sG(this.serializer,e),r=(function(o){if(!("targetChange"in o))return se.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?se.min():s.readTime?cr(s.readTime):se.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=ew(this.serializer),t.addTarget=(function(o,s){let a,u=s.target;if(a=jI(u)?{documents:uG(o,u)}:{query:lG(o,u).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=iO(o,s.resumeToken);let l=ZI(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(se.min())>0){a.readTime=Rp(o,s.snapshotVersion.toTimestamp());let l=ZI(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=hG(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=ew(this.serializer),t.removeTarget=e,this.k_(t)}},Mw=class extends Fp{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return De(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,De(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){De(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=cG(e.writeResults,e.commitTime),r=cr(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=ew(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>aG(this.serializer,r))};this.k_(t)}};var Pw=class{},xw=class extends Pw{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new U(M.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,JI(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new U(M.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,JI(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new U(M.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},Ow=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?($r(t),this._a=!1):B("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Ko="RemoteStore",kw=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(async()=>{Qo(this)&&(B(Ko,"Restarting streams for network reachability change."),await(async function(u){let l=ie(u);l.Ia.add(4),await pl(l),l.Aa.set("Unknown"),l.Ia.delete(4),await ng(l)})(this))})}),this.Aa=new Ow(r,i)}};async function ng(n){if(Qo(n))for(let e of n.da)await e(!0)}async function pl(n){for(let e of n.da)await e(!1)}function pO(n,e){let t=ie(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),_T(t)?vT(t):La(t).x_()&&yT(t,e))}function mT(n,e){let t=ie(n),r=La(t);t.Ta.delete(e),r.x_()&&gO(t,e),t.Ta.size===0&&(r.x_()?r.B_():Qo(t)&&t.Aa.set("Unknown"))}function yT(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(se.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}La(n).H_(e)}function gO(n,e){n.Ra.$e(e),La(n).Y_(e)}function vT(n){n.Ra=new QI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),La(n).start(),n.Aa.aa()}function _T(n){return Qo(n)&&!La(n).M_()&&n.Ta.size>0}function Qo(n){return ie(n).Ia.size===0}function mO(n){n.Ra=void 0}async function RG(n){n.Aa.set("Online")}async function NG(n){n.Ta.forEach((e,t)=>{yT(n,e)})}async function MG(n,e){mO(n),_T(n)?(n.Aa.la(e),vT(n)):n.Aa.set("Unknown")}async function PG(n,e,t){if(n.Aa.set("Online"),e instanceof Sp&&e.state===2&&e.cause)try{await(async function(i,o){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})(n,e)}catch(r){B(Ko,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Lp(n,r)}else if(e instanceof ya?n.Ra.Ye(e):e instanceof Cp?n.Ra.it(e):n.Ra.et(e),!t.isEqual(se.min()))try{let r=await fO(n.localStore);t.compareTo(r)>=0&&await(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ta.get(l);h&&o.Ta.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ta.get(u);if(!h)return;o.Ta.set(u,h.withResumeToken(Mt.EMPTY_BYTE_STRING,h.snapshotVersion)),gO(o,u);let p=new cl(h.target,u,l,h.sequenceNumber);yT(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){B(Ko,"Failed to raise snapshot:",r),await Lp(n,r)}}async function Lp(n,e,t){if(!Fa(e))throw e;n.Ia.add(1),await pl(n),n.Aa.set("Offline"),t||(t=()=>fO(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{B(Ko,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await ng(n)})}function yO(n,e){return e().catch(t=>Lp(n,t,e))}async function rg(n){let e=ie(n),t=Li(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:oT;for(;xG(e);)try{let i=await bG(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,OG(e,i)}catch(i){await Lp(e,i)}vO(e)&&_O(e)}function xG(n){return Qo(n)&&n.Pa.length<10}function OG(n,e){n.Pa.push(e);let t=Li(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function vO(n){return Qo(n)&&!Li(n).M_()&&n.Pa.length>0}function _O(n){Li(n).start()}async function kG(n){Li(n).na()}async function FG(n){let e=Li(n);for(let t of n.Pa)e.X_(t.mutations)}async function LG(n,e,t){let r=n.Pa.shift(),i=qI.from(r,e,t);await yO(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await rg(n)}async function VG(n,e){e&&Li(n).Z_&&await(async function(r,i){if((function(s){return X6(s)&&s!==M.ABORTED})(i.code)){let o=r.Pa.shift();Li(r).N_(),await yO(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await rg(r)}})(n,e),vO(n)&&_O(n)}async function JP(n,e){let t=ie(n);t.asyncQueue.verifyOperationInProgress(),B(Ko,"RemoteStore received new credentials");let r=Qo(t);t.Ia.add(3),await pl(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await ng(t)}async function jG(n,e){let t=ie(n);e?(t.Ia.delete(2),await ng(t)):e||(t.Ia.add(2),await pl(t),t.Aa.set("Unknown"))}function La(n){return n.Va||(n.Va=(function(t,r,i){let o=ie(t);return o.ia(),new Nw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:RG.bind(null,n),e_:NG.bind(null,n),n_:MG.bind(null,n),J_:PG.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),_T(n)?vT(n):n.Aa.set("Unknown")):(await n.Va.stop(),mO(n))})),n.Va}function Li(n){return n.ma||(n.ma=(function(t,r,i){let o=ie(t);return o.ia(),new Mw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:kG.bind(null,n),n_:VG.bind(null,n),ea:FG.bind(null,n),ta:LG.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await rg(n)):(await n.ma.stop(),n.Pa.length>0&&(B(Ko,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}var Fw=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Ur,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new U(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function ET(n,e){if($r("AsyncQueue",`${e}: ${n}`),Fa(n))return new U(M.UNAVAILABLE,`${e}: ${n}`);throw n}var Vp=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||q.comparator(t.key,r.key):(t,r)=>q.comparator(t.key,r.key),this.keyedMap=Yu(),this.sortedSet=new Be(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var jp=class{constructor(){this.fa=new Be(q.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):K(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},Na=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Vp.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Lw=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},Vw=class{constructor(){this.queries=XP(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=ie(t),o=i.queries;i.queries=XP(),o.forEach((s,a)=>{for(let u of a.wa)u.onError(r)})})(this,new U(M.ABORTED,"Firestore shutting down"))}};function XP(){return new qr(n=>qx(n),Xp)}async function UG(n,e){let t=ie(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new Lw,r=e.ba()?0:1);try{switch(r){case 0:o.ya=await t.onListen(i,!0);break;case 1:o.ya=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(s){let a=ET(s,`Initialization of query '${fa(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&IT(t)}async function BG(n,e){let t=ie(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function $G(n,e){let t=ie(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&IT(t)}function HG(n,e,t){let r=ie(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function IT(n){n.Da.forEach(e=>{e.next()})}var jw,ex;(ex=jw||(jw={})).Fa="default",ex.Cache="cache";var Uw=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Na(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Na.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==jw.Cache}};var Up=class{constructor(e){this.key=e}},Bp=class{constructor(e){this.key=e}},Bw=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=pe(),this.mutatedKeys=pe(),this.Xa=Gx(e),this.eu=new Vp(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new jp,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=eg(this.query,p)?p:null,w=!!m&&this.mutatedKeys.has(m.key),R=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),N=!1;m&&y?m.data.isEqual(y.data)?w!==R&&(r.track({type:3,doc:y}),N=!0):this.iu(m,y)||(r.track({type:2,doc:y}),N=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),N=!0):m&&!y&&(r.track({type:1,doc:m}),N=!0,(u||l)&&(a=!0)),N&&(y?(s=s.add(y),o=R?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>(function(y,w){let R=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K(20277,{At:N})}};return R(y)-R(w)})(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new Na(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new jp,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=pe(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new Bp(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new Up(r))}),t}uu(e){this.Ha=e.qs,this.Za=pe();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Na.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},wT="SyncEngine",$w=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Hw=class{constructor(e){this.key=e,this.lu=!1}},zw=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new qr(a=>qx(a),Xp),this.Tu=new Map,this.Iu=new Set,this.du=new Be(q.comparator),this.Eu=new Map,this.Au=new ll,this.Ru={},this.Vu=new Map,this.mu=ul.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};async function zG(n,e,t=!0){let r=bO(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=await EO(r,e,t,!0),i}async function qG(n,e){let t=bO(n);await EO(t,e,!0,!1)}async function EO(n,e,t,r){let i=await CG(n.localStore,ar(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=await GG(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&pO(n.remoteStore,i),a}async function GG(n,e,t,r,i){n.gu=(p,m,y)=>(async function(R,N,V,Q){let Z=N.view.nu(V);Z.Ds&&(Z=await QP(R.localStore,N.query,!1).then(({documents:T})=>N.view.nu(T,Z)));let _e=Q&&Q.targetChanges.get(N.targetId),ft=Q&&Q.targetMismatches.get(N.targetId)!=null,be=N.view.applyChanges(Z,R.isPrimaryClient,_e,ft);return nx(R,N.targetId,be._u),be.snapshot})(n,p,m,y);let o=await QP(n.localStore,e,!0),s=new Bw(e,o.qs),a=s.nu(o.documents),u=al.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);nx(n,t,l._u);let h=new $w(e,t,s);return n.Pu.set(e,h),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),l.snapshot}async function WG(n,e,t){let r=ie(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!Xp(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Tw(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&mT(r.remoteStore,i.targetId),qw(r,i.targetId)}).catch(ka)):(qw(r,i.targetId),await Tw(r.localStore,i.targetId,!0))}async function KG(n,e){let t=ie(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),mT(t.remoteStore,r.targetId))}async function QG(n,e,t){let r=n5(n);try{let i=await(function(s,a){let u=ie(s),l=Je.now(),h=a.reduce((y,w)=>y.add(w.key),pe()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let w=Gr(),R=pe();return u.Os.getEntries(y,h).next(N=>{w=N,w.forEach((V,Q)=>{Q.isValidDocument()||(R=R.add(V))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,w)).next(N=>{p=N;let V=[];for(let Q of a){let Z=J6(Q,p.get(Q.key).overlayedDocument);Z!=null&&V.push(new lr(Q.key,Z,Vx(Z.value.mapValue),Br.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,V,a)}).next(N=>{m=N;let V=N.applyToLocalDocumentSet(p,R);return u.documentOverlayCache.saveOverlays(y,N.batchId,V)})}).then(()=>({batchId:m.batchId,changes:Kx(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new Be(le)),l=l.insert(a,u),s.Ru[s.currentUser.toKey()]=l})(r,i.batchId,t),await gl(r,i.changes),await rg(r.remoteStore)}catch(i){let o=ET(i,"Failed to persist write");t.reject(o)}}async function IO(n,e){let t=ie(n);try{let r=await TG(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(De(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?De(s.lu,14607):i.removedDocuments.size>0&&(De(s.lu,42227),s.lu=!1))}),await gl(t,r,e)}catch(r){await ka(r)}}function tx(n,e,t){let r=ie(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let u=ie(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.wa)m.va(a)&&(l=!0)}),l&&IT(u)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function YG(n,e,t){let r=ie(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Be(q.comparator);s=s.insert(o,jn.newNoDocument(o,se.min()));let a=pe().add(o),u=new bp(se.min(),new Map,new Be(le),s,a);await IO(r,u),r.du=r.du.remove(o),r.Eu.delete(e),TT(r)}else await Tw(r.localStore,e,!1).then(()=>qw(r,e,t)).catch(ka)}async function ZG(n,e){let t=ie(n),r=e.batch.batchId;try{let i=await wG(t.localStore,e);TO(t,r,null),wO(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await gl(t,i)}catch(i){await ka(i)}}async function JG(n,e,t){let r=ie(n);try{let i=await(function(s,a){let u=ie(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(De(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})})(r.localStore,e);TO(r,e,t),wO(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await gl(r,i)}catch(i){await ka(i)}}function wO(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function TO(n,e,t){let r=ie(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function qw(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||DO(n,r)})}function DO(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(mT(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),TT(n))}function nx(n,e,t){for(let r of t)r instanceof Up?(n.Au.addReference(r.key,e),XG(n,r)):r instanceof Bp?(B(wT,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||DO(n,r.key)):K(19791,{yu:r})}function XG(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(B(wT,"New document in limbo: "+t),n.Iu.add(r),TT(n))}function TT(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new q(Me.fromString(e)),r=n.mu.next();n.Eu.set(r,new Hw(t)),n.du=n.du.insert(t,r),pO(n.remoteStore,new cl(ar(hT(t.path)),r,"TargetPurposeLimboResolution",iT.ue))}}async function gl(n,e,t){let r=ie(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{s.push(r.gu(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=_w.Es(u.targetId,l);o.push(p)}}))}),await Promise.all(s),r.hu.J_(i),await(async function(u,l){let h=ie(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(l,m=>P.forEach(m.Is,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>P.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!Fa(p))throw p;B(gT,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.Fs.get(m),w=y.snapshotVersion,R=y.withLastLimboFreeSnapshotVersion(w);h.Fs=h.Fs.insert(m,R)}}})(r.localStore,o))}async function e5(n,e){let t=ie(n);if(!t.currentUser.isEqual(e)){B(wT,"User change. New user:",e.toKey());let r=await hO(t.localStore,e);t.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(u=>{u.reject(new U(M.CANCELLED,s))})}),o.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await gl(t,r.Bs)}}function t5(n,e){let t=ie(n),r=t.Eu.get(e);if(r&&r.lu)return pe().add(r.key);{let i=pe(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let a=t.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function bO(n){let e=ie(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=IO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=t5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=YG.bind(null,e),e.hu.J_=$G.bind(null,e.eventManager),e.hu.pu=HG.bind(null,e.eventManager),e}function n5(n){let e=ie(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ZG.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=JG.bind(null,e),e}var CO=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=tg(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,r){return null}Fu(t,r){return null}vu(t){return IG(this.persistence,new Iw,t.initialUser,this.serializer)}Du(t){return new Mp(vw.Vi,this.serializer)}bu(t){return new Dw}async terminate(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),Gw=class extends CO{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){De(this.persistence.referenceDelegate instanceof Pp,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new ow(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?bn.withCacheSize(this.cacheSizeBytes):bn.DEFAULT;return new Mp(r=>Pp.Vi(r,t),this.serializer)}};var r5=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>tx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=e5.bind(null,this.syncEngine),await jG(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new Vw})()}createDatastore(t){let r=tg(t.databaseInfo.databaseId),i=(function(s){return new Rw(s)})(t.databaseInfo);return(function(s,a,u,l){return new xw(s,a,u,l)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,a,u){return new kw(i,o,s,a,u)})(this.localStore,this.datastore,t.asyncQueue,r=>tx(this.syncEngine,r,0),(function(){return Op.C()?new Op:new bw})())}createSyncEngine(t,r){return(function(o,s,a,u,l,h,p){let m=new zw(o,s,a,u,l,h);return p&&(m.fu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await(async function(o){let s=ie(o);B(Ko,"RemoteStore shutting down."),s.Ia.add(5),await pl(s),s.Ea.shutdown(),s.Aa.set("Unknown")})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}return n.provider={build:()=>new n},n})();var Ww=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):$r("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Vi="FirestoreClient",Kw=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=dt.UNAUTHENTICATED,this.clientId=tl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{B(Vi,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(B(Vi,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Ur;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=ET(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function yI(n,e){n.asyncQueue.verifyOperationInProgress(),B(Vi,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await hO(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{ki("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{B("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{ki("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e}async function rx(n,e){n.asyncQueue.verifyOperationInProgress();let t=await i5(n);B(Vi,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>JP(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>JP(e.remoteStore,i)),n._onlineComponents=e}async function i5(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){B(Vi,"Using user provided OfflineComponentProvider");try{await yI(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;ki("Error using user provided cache. Falling back to memory cache: "+t),await yI(n,new CO)}}else B(Vi,"Using default OfflineComponentProvider"),await yI(n,new Gw(void 0));return n._offlineComponents}async function SO(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(B(Vi,"Using user provided OnlineComponentProvider"),await rx(n,n._uninitializedComponentsProvider._online)):(B(Vi,"Using default OnlineComponentProvider"),await rx(n,new r5))),n._onlineComponents}function o5(n){return SO(n).then(e=>e.syncEngine)}async function ix(n){let e=await SO(n),t=e.eventManager;return t.onListen=zG.bind(null,e.syncEngine),t.onUnlisten=WG.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=qG.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=KG.bind(null,e.syncEngine),t}function AO(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var ox=new Map;var RO="firestore.googleapis.com",sx=!0,$p=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new U(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=RO,this.ssl=sx}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:sx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=dO;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<vG)throw new U(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}m6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=AO((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new U(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new U(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new U(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ma=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $p({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new U(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new U(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $p(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new vI;switch(r.type){case"firstParty":return new wI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new U(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=ox.get(t);r&&(B("ComponentProvider","Removing Datastore"),ox.delete(t),r.terminate())})(this),Promise.resolve()}};function NO(n,e,t,r={}){var i;n=Ni(n,Ma);let o=_i(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;o&&(Lf(`https://${u}`),Vf("Firestore",!0)),s.host!==RO&&s.host!==u&&ki("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!tr(l,a)&&(n._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=dt.MOCK_USER;else{h=NN(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new U(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new dt(m)}n._authCredentials=new _I(new yp(h,p))}}var Pa=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},_t=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(fl(t,n._jsonSchema))return new n(e,r||null,new q(Me.fromString(t.referencePath)))}};_t._jsonSchemaVersion="firestore/documentReference/1.0",_t._jsonSchema={type:Ze("string",_t._jsonSchemaVersion),referencePath:Ze("string")};var Mi=class n extends Pa{constructor(e,t,r){super(e,t,hT(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new _t(this.firestore,null,new q(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function MO(n,e,...t){if(n=je(n),px("collection","path",e),n instanceof Ma){let r=Me.fromString(e,...t);return TP(r),new Mi(n,null,r)}{if(!(n instanceof _t||n instanceof Mi))throw new U(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Me.fromString(e,...t));return TP(r),new Mi(n.firestore,null,r)}}function DT(n,e,...t){if(n=je(n),arguments.length===1&&(e=tl.newId()),px("doc","path",e),n instanceof Ma){let r=Me.fromString(e,...t);return wP(r),new _t(n,null,new q(r))}{if(!(n instanceof _t||n instanceof Mi))throw new U(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Me.fromString(e,...t));return wP(r),new _t(n.firestore,n instanceof Mi?n.converter:null,new q(r))}}var ax="AsyncQueue",Hp=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new kp(this,"async_queue_retry"),this.oc=()=>{let r=mI();r&&B(ax,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=mI();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=mI();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new Ur;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Fa(e))throw e;B(ax,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,$r("INTERNAL UNHANDLED ERROR: ",cx(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=Fw.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&K(47125,{hc:cx(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function cx(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function ux(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}var ji=class extends Ma{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Hp,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Hp(e),this._firestoreClient=void 0,await e}}};function PO(n,e){let t=typeof n=="object"?n:Mo(),r=typeof n=="string"?n:e||wp,i=sa(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=RN("firestore");o&&NO(i,...o)}return i}function xO(n){if(n._terminated)throw new U(M.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||s5(n),n._firestoreClient}function s5(n){var e,t,r;let i=n._freezeSettings(),o=(function(a,u,l,h){return new SI(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,AO(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Kw(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&(function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}})(n._componentsProvider))}var Pi=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Mt.fromBase64String(e))}catch(t){throw new U(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(fl(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Pi._jsonSchemaVersion="firestore/bytes/1.0",Pi._jsonSchema={type:Ze("string",Pi._jsonSchemaVersion),bytes:Ze("string")};var xa=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new U(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var dl=class{constructor(e){this._methodName=e}};var xi=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new U(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new U(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return le(this._lat,e._lat)||le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(fl(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};xi._jsonSchemaVersion="firestore/geoPoint/1.0",xi._jsonSchema={type:Ze("string",xi._jsonSchemaVersion),latitude:Ze("number"),longitude:Ze("number")};var Oi=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(fl(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new U(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Oi._jsonSchemaVersion="firestore/vectorValue/1.0",Oi._jsonSchema={type:Ze("string",Oi._jsonSchemaVersion),vectorValues:Ze("object")};var a5=/^__.*__$/,Qw=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new lr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Wo(e,this.data,t,this.fieldTransforms)}},zp=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new lr(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function OO(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K(40011,{Ec:n})}}var Yw=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Gp(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(OO(this.Ec)&&a5.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},Zw=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||tg(e)}Dc(e,t,r,i=!1){return new Yw({Ec:e,methodName:t,bc:r,path:mn.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function bT(n){let e=n._freezeSettings(),t=tg(n._databaseId);return new Zw(n._databaseId,!!e.ignoreUndefinedProperties,t)}function c5(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);CT("Data must be an object, but it was:",s,r);let a=kO(r,s),u,l;if(o.merge)u=new Cn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=Jw(e,p,t);if(!s.contains(m))throw new U(M.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);LO(h,m)||h.push(m)}u=new Cn(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new Qw(new gn(a),u,l)}var qp=class n extends dl{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function u5(n,e,t,r){let i=n.Dc(1,e,t);CT("Data must be an object, but it was:",i,r);let o=[],s=gn.empty();Ui(r,(u,l)=>{let h=ST(e,u,t);l=je(l);let p=i.gc(h);if(l instanceof qp)o.push(h);else{let m=ml(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new Cn(o);return new zp(s,a,i.fieldTransforms)}function l5(n,e,t,r,i,o){let s=n.Dc(1,e,t),a=[Jw(e,r,t)],u=[i];if(o.length%2!=0)throw new U(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(Jw(e,o[m])),u.push(o[m+1]);let l=[],h=gn.empty();for(let m=a.length-1;m>=0;--m)if(!LO(l,a[m])){let y=a[m],w=u[m];w=je(w);let R=s.gc(y);if(w instanceof qp)l.push(y);else{let N=ml(w,R);N!=null&&(l.push(y),h.set(y,N))}}let p=new Cn(l);return new zp(h,p,s.fieldTransforms)}function d5(n,e,t,r=!1){return ml(t,n.Dc(r?4:3,e))}function ml(n,e){if(FO(n=je(n)))return CT("Unsupported field value:",e,n),kO(n,e);if(n instanceof dl)return(function(r,i){if(!OO(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let u=ml(a,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=je(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return W6(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Je.fromDate(r);return{timestampValue:Rp(i.serializer,o)}}if(r instanceof Je){let o=new Je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Rp(i.serializer,o)}}if(r instanceof xi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Pi)return{bytesValue:iO(i.serializer,r._byteString)};if(r instanceof _t){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:pT(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Oi)return(function(s,a){return{mapValue:{fields:{[aT]:{stringValue:cT},[Ia]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return fT(a.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${Yp(r)}`)})(n,e)}function kO(n,e){let t={};return Nx(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ui(n,(r,i)=>{let o=ml(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function FO(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Je||n instanceof xi||n instanceof Pi||n instanceof _t||n instanceof dl||n instanceof Oi)}function CT(n,e,t){if(!FO(t)||!gx(t)){let r=Yp(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function Jw(n,e,t){if((e=je(e))instanceof xa)return e._internalPath;if(typeof e=="string")return ST(n,e);throw Gp("Field path arguments must be of type string or ",n,!1,void 0,t)}var h5=new RegExp("[~\\*/\\[\\]]");function ST(n,e,t){if(e.search(h5)>=0)throw Gp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new xa(...e.split("."))._internalPath}catch{throw Gp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Gp(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new U(M.INVALID_ARGUMENT,a+n+u)}function LO(n,e){return n.some(t=>t.isEqual(e))}var Wp=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new _t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Xw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(AT("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Xw=class extends Wp{data(){return super.data()}};function AT(n,e){return typeof e=="string"?ST(n,e):e instanceof xa?e._internalPath:e._delegate._internalPath}function f5(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new U(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var hl=class{},eT=class extends hl{};function VO(n,e,...t){let r=[];e instanceof hl&&r.push(e),r=r.concat(t),(function(o){let s=o.filter(u=>u instanceof tT).length,a=o.filter(u=>u instanceof Kp).length;if(s>1||s>0&&a>0)throw new U(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var Kp=class n extends eT{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return UO(e._query,t),new Pa(e.firestore,e.converter,UI(e._query,t))}_parse(e){let t=bT(e.firestore);return(function(o,s,a,u,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new U(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){dx(p,h);let w=[];for(let R of p)w.push(lx(u,o,R));m={arrayValue:{values:w}}}else m=lx(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||dx(p,h),m=d5(a,s,p,h==="in"||h==="not-in");return Ye.create(l,h,m)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function jO(n,e,t){let r=e,i=AT("where",n);return Kp._create(i,r,t)}var tT=class n extends hl{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Un.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)UO(s,u),s=UI(s,u)})(e._query,t),new Pa(e.firestore,e.converter,UI(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function lx(n,e,t){if(typeof(t=je(t))=="string"){if(t==="")throw new U(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zx(e)&&t.indexOf("/")!==-1)throw new U(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Me.fromString(t));if(!q.isDocumentKey(r))throw new U(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return NP(n,new q(r))}if(t instanceof _t)return NP(n,t._key);throw new U(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Yp(t)}.`)}function dx(n,e){if(!Array.isArray(n)||n.length===0)throw new U(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function UO(n,e){let t=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new U(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new U(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var nT=class{convertValue(e,t="none"){switch(Fi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ne(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(zr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw K(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Ui(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Ia].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ne(s.doubleValue));return new Oi(o)}convertGeoPoint(e){return new xi(Ne(e.latitude),Ne(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Jp(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(il(e));default:return null}}convertTimestamp(e){let t=Hr(e);return new Je(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Me.fromString(e);De(lO(r),9688,{name:e});let i=new Tp(r.get(1),r.get(3)),o=new q(r.popFirst(5));return i.isEqual(t)||$r(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function p5(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Uo=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Bo=class n extends Wp{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new va(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(AT("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new U(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Bo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Bo._jsonSchema={type:Ze("string",Bo._jsonSchemaVersion),bundleSource:Ze("string","DocumentSnapshot"),bundleName:Ze("string"),bundle:Ze("string")};var va=class extends Bo{data(e={}){return super.data(e)}},_a=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Uo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new va(this._firestore,this._userDataWriter,r.key,r,new Uo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new U(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new va(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Uo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new va(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Uo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:g5(a.type),doc:u,oldIndex:l,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new U(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=tl.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function g5(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K(61501,{type:n})}}_a._jsonSchemaVersion="firestore/querySnapshot/1.0",_a._jsonSchema={type:Ze("string",_a._jsonSchemaVersion),bundleSource:Ze("string","QuerySnapshot"),bundleName:Ze("string"),bundle:Ze("string")};var Qp=class extends nT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pi(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new _t(this.firestore,null,t)}};function BO(n,e,t,...r){n=Ni(n,_t);let i=Ni(n.firestore,ji),o=bT(i),s;return s=typeof(e=je(e))=="string"||e instanceof xa?l5(o,"updateDoc",n._key,e,t,r):u5(o,"updateDoc",n._key,e),NT(i,[s.toMutation(n._key,Br.exists(!0))])}function $O(n){return NT(Ni(n.firestore,ji),[new sl(n._key,Br.none())])}function HO(n,e){let t=Ni(n.firestore,ji),r=DT(n),i=p5(n.converter,e);return NT(t,[c5(bT(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Br.exists(!1))]).then(()=>r)}function RT(n,...e){var t,r,i;n=je(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||ux(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(ux(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(n instanceof _t)l=Ni(n.firestore,ji),h=hT(n._key.path),u={next:p=>{e[s]&&e[s](m5(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=Ni(n,Pa);l=Ni(p.firestore,ji),h=p._query;let m=new Qp(l);u={next:y=>{e[s]&&e[s](new _a(l,m,p,y))},error:e[s+1],complete:e[s+2]},f5(n._query)}return(function(m,y,w,R){let N=new Ww(R),V=new Uw(y,N,w);return m.asyncQueue.enqueueAndForget(async()=>UG(await ix(m),V)),()=>{N.Ou(),m.asyncQueue.enqueueAndForget(async()=>BG(await ix(m),V))}})(xO(l),h,a,u)}function NT(n,e){return(function(r,i){let o=new Ur;return r.asyncQueue.enqueueAndForget(async()=>QG(await o5(r),i,o)),o.promise})(xO(n),e)}function m5(n,e,t){let r=t.docs.get(e._key),i=new Qp(n);return new Bo(n,i,e._key,r,new Uo(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Oa=i})(Ii),Ln(new Ut("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new ji(new EI(r.getProvider("auth-internal")),new TI(s,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new U(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tp(l.options.projectId,h)})(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ue(vP,_P,e),Ue(vP,_P,"esm2017")})();var ig=function(){return ig=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ig.apply(this,arguments)};var _5={includeMetadataChanges:!1};function zO(n,e){return e===void 0&&(e=_5),new X(function(t){var r=RT(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function qO(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:ig(ig({},r),(t={},t[e.idField]=n.id,t))}function GO(n){return zO(n,{includeMetadataChanges:!0}).pipe(ue(function(e){return e.docs}))}function WO(n,e){return e===void 0&&(e={}),GO(n).pipe(ue(function(t){return t.map(function(r){return qO(r,e)})}))}var Wr=class{constructor(e){return e}},KO="firestore",MT=class{constructor(){return ca(KO)}};var PT=new j("angularfire2.firestore-instances");function E5(n,e){let t=Fu(KO,n,e);return t&&new Wr(t)}function I5(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Wr(r)}}var w5={provide:MT,deps:[[new Kt,PT]]},T5={provide:Wr,useFactory:E5,deps:[[new Kt,PT],xr]};function QO(n,...e){return Ue("angularfire",wi.full,"fst"),yt([T5,w5,{provide:PT,useFactory:I5(n),multi:!0,deps:[ve,Fe,Ti,xo,[new Kt,Ku],[new Kt,ua],...e]}])}var YO=st(WO,!0);var ZO=st(HO,!0,2);var xT=st(MO,!0,2);var JO=st($O,!0,2);var OT=st(DT,!0,2);var XO=st(PO,!0);var ek=st(VO,!0,2);var tk=st(BO,!0,2);var nk=st(jO,!0,2);var rk={apiKey:"AIzaSyDpcE131eTZZibF7-X_lsBUI4i2i_nRFOc",authDomain:"inventario-escolar-5fd7c.firebaseapp.com",projectId:"inventario-escolar-5fd7c",storageBucket:"inventario-escolar-5fd7c.firebasestorage.app",messagingSenderId:"58554527768",appId:"1:58554527768:web:81675f178f129aeded136d"};var fk=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(ee(Eo),ee(di))};static \u0275dir=xe({type:n})}return n})(),fg=(()=>{class n extends fk{static \u0275fac=(()=>{let t;return function(i){return(t||(t=On(n)))(i||n)}})();static \u0275dir=xe({type:n,features:[Qt]})}return n})(),Tl=new j("");var b5={provide:Tl,useExisting:tn(()=>$i),multi:!0};function C5(){let n=Dn()?Dn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var S5=new j(""),$i=(()=>{class n extends fk{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!C5())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(ee(Eo),ee(di),ee(S5,8))};static \u0275dir=xe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Ae("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Qn([b5]),Qt]})}return n})();function A5(n){return n==null||R5(n)===0}function R5(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var pg=new j(""),pk=new j("");function N5(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function M5(n){return A5(n.value)?{required:!0}:null}function ik(n){return null}function gk(n){return n!=null}function mk(n){return fi(n)?Pe(n):n}function yk(n){let e={};return n.forEach(t=>{e=t!=null?k(k({},e),t):e}),Object.keys(e).length===0?null:e}function vk(n,e){return e.map(t=>t(n))}function P5(n){return!n.validate}function _k(n){return n.map(e=>P5(e)?e:t=>e.validate(t))}function x5(n){if(!n)return null;let e=n.filter(gk);return e.length==0?null:function(t){return yk(vk(t,e))}}function LT(n){return n!=null?x5(_k(n)):null}function O5(n){if(!n)return null;let e=n.filter(gk);return e.length==0?null:function(t){let r=vk(t,e).map(mk);return mm(r).pipe(ue(yk))}}function VT(n){return n!=null?O5(_k(n)):null}function ok(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function k5(n){return n._rawValidators}function F5(n){return n._rawAsyncValidators}function kT(n){return n?Array.isArray(n)?n:[n]:[]}function sg(n,e){return Array.isArray(n)?n.includes(e):n===e}function sk(n,e){let t=kT(e);return kT(n).forEach(i=>{sg(t,i)||t.push(i)}),t}function ak(n,e){return kT(e).filter(t=>!sg(n,t))}var ag=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=LT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=VT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Ua=class extends ag{name;get formDirective(){return null}get path(){return null}},wl=class extends ag{_parent=null;name=null;valueAccessor=null},cg=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},L5={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Gde=ae(k({},L5),{"[class.ng-submitted]":"isSubmitted"}),Ba=(()=>{class n extends cg{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(ee(wl,2))};static \u0275dir=xe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&eu("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Qt]})}return n})(),$a=(()=>{class n extends cg{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(ee(Ua,10))};static \u0275dir=xe({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&eu("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Qt]})}return n})();var yl="VALID",og="INVALID",Va="PENDING",vl="DISABLED",Bi=class{},ug=class extends Bi{value;source;constructor(e,t){super(),this.value=e,this.source=t}},El=class extends Bi{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Il=class extends Bi{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},ja=class extends Bi{status;source;constructor(e,t){super(),this.status=e,this.source=t}},FT=class extends Bi{source;constructor(e){super(),this.source=e}},lg=class extends Bi{source;constructor(e){super(),this.source=e}};function Ek(n){return(gg(n)?n.validators:n)||null}function V5(n){return Array.isArray(n)?LT(n):n||null}function Ik(n,e){return(gg(e)?e.asyncValidators:n)||null}function j5(n){return Array.isArray(n)?VT(n):n||null}function gg(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function U5(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new $(1e3,"");if(!r[t])throw new $(1001,"")}function B5(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new $(1002,"")})}var dg=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return vt(this.statusReactive)}set status(e){vt(()=>this.statusReactive.set(e))}_status=wo(()=>this.statusReactive());statusReactive=Wt(void 0);get valid(){return this.status===yl}get invalid(){return this.status===og}get pending(){return this.status==Va}get disabled(){return this.status===vl}get enabled(){return this.status!==vl}errors;get pristine(){return vt(this.pristineReactive)}set pristine(e){vt(()=>this.pristineReactive.set(e))}_pristine=wo(()=>this.pristineReactive());pristineReactive=Wt(!0);get dirty(){return!this.pristine}get touched(){return vt(this.touchedReactive)}set touched(e){vt(()=>this.touchedReactive.set(e))}_touched=wo(()=>this.touchedReactive());touchedReactive=Wt(!1);get untouched(){return!this.touched}_events=new Xe;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(sk(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(sk(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(ak(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(ak(e,this._rawAsyncValidators))}hasValidator(e){return sg(this._rawValidators,e)}hasAsyncValidator(e){return sg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ae(k({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Il(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Il(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ae(k({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new El(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new El(!0,r))}markAsPending(e={}){this.status=Va;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ja(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ae(k({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=vl,this.errors=null,this._forEachChild(i=>{i.disable(ae(k({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ug(this.value,r)),this._events.next(new ja(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ae(k({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=yl,this._forEachChild(r=>{r.enable(ae(k({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ae(k({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===yl||this.status===Va)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ug(this.value,t)),this._events.next(new ja(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ae(k({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?vl:yl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Va,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=mk(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new ja(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Ge,this.statusChanges=new Ge}_calculateStatus(){return this._allControlsDisabled()?vl:this.errors?og:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Va)?Va:this._anyControlsHaveStatus(og)?og:yl}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new El(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Il(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){gg(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=V5(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=j5(this._rawAsyncValidators)}},hg=class extends dg{constructor(e,t,r){super(Ek(t),Ik(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){B5(this,!0,e),Object.keys(e).forEach(r=>{U5(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new lg(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var jT=new j("",{providedIn:"root",factory:()=>UT}),UT="always";function $5(n,e){return[...e.path,n]}function wk(n,e,t=UT){Tk(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),z5(n,e),G5(n,e),q5(n,e),H5(n,e)}function ck(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function H5(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function Tk(n,e){let t=k5(n);e.validator!==null?n.setValidators(ok(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=F5(n);e.asyncValidator!==null?n.setAsyncValidators(ok(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();ck(e._rawValidators,i),ck(e._rawAsyncValidators,i)}function z5(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Dk(n,e)})}function q5(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Dk(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function Dk(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function G5(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function W5(n,e){n==null,Tk(n,e)}function K5(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function Q5(n){return Object.getPrototypeOf(n.constructor)===fg}function Y5(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Z5(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===$i?t=o:Q5(o)?r=o:i=o}),i||r||t||null}var J5={provide:Ua,useExisting:tn(()=>Yo)},_l=Promise.resolve(),Yo=(()=>{class n extends Ua{callSetDisabledState;get submitted(){return vt(this.submittedReactive)}_submitted=wo(()=>this.submittedReactive());submittedReactive=Wt(!1);_directives=new Set;form;ngSubmit=new Ge;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new hg({},LT(t),VT(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){_l.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),wk(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){_l.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){_l.then(()=>{let r=this._findContainer(t.path),i=new hg({});W5(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){_l.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){_l.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),Y5(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new FT(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(ee(pg,10),ee(pk,10),ee(jT,8))};static \u0275dir=xe({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Ae("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Qn([J5]),Qt]})}return n})();function uk(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function lk(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var X5=class extends dg{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(Ek(t),Ik(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),gg(t)&&(t.nonNullable||t.initialValueIsDefault)&&(lk(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new lg(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){uk(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){uk(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){lk(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var e8={provide:wl,useExisting:tn(()=>Zo)},dk=Promise.resolve(),Zo=(()=>{class n extends wl{_changeDetectorRef;callSetDisabledState;control=new X5;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Ge;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Z5(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),K5(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){wk(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){dk.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Qh(r);dk.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?$5(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(ee(Ua,9),ee(pg,10),ee(pk,10),ee(Tl,10),ee(zs,8),ee(jT,8))};static \u0275dir=xe({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Qn([e8]),Qt,mo]})}return n})();var Ha=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=xe({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),t8={provide:Tl,useExisting:tn(()=>BT),multi:!0},BT=(()=>{class n extends fg{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=On(n)))(i||n)}})();static \u0275dir=xe({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&Ae("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Qn([t8]),Qt]})}return n})();var n8={provide:Tl,useExisting:tn(()=>mg),multi:!0};function bk(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function r8(n){return n.split(":")[0]}var mg=(()=>{class n extends fg{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=A(Rt).injector;destroyRef=A(Tn);cdr=A(zs);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Gc({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=bk(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=r8(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=On(n)))(i||n)}})();static \u0275dir=xe({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Ae("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Qn([n8]),Qt]})}return n})(),Ck=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(bk(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(ee(di),ee(Eo),ee(mg,9))};static \u0275dir=xe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),i8={provide:Tl,useExisting:tn(()=>Sk),multi:!0};function hk(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function o8(n){return n.split(":")[0]}var Sk=(()=>{class n extends fg{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let u=s[a],l=this._getOptionValue(u.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let u=s[a];if(u.selected){let l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=o8(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=On(n)))(i||n)}})();static \u0275dir=xe({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Ae("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Qn([i8]),Qt]})}return n})(),Ak=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(hk(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(hk(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(ee(di),ee(Eo),ee(Sk,9))};static \u0275dir=xe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function s8(n){return typeof n=="number"?n:parseFloat(n)}var Rk=(()=>{class n{_validator=ik;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):ik,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=xe({type:n,features:[mo]})}return n})();var a8={provide:pg,useExisting:tn(()=>$T),multi:!0},$T=(()=>{class n extends Rk{min;inputName="min";normalizeInput=t=>s8(t);createValidator=t=>N5(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=On(n)))(i||n)}})();static \u0275dir=xe({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Zc("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[Qn([a8]),Qt]})}return n})(),c8={provide:pg,useExisting:tn(()=>Jo),multi:!0};var Jo=(()=>{class n extends Rk{required;inputName="required";normalizeInput=Qh;createValidator=t=>M5;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=On(n)))(i||n)}})();static \u0275dir=xe({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Zc("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Qn([c8]),Qt]})}return n})();var u8=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=hi({type:n});static \u0275inj=Ir({})}return n})();var za=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:jT,useValue:t.callSetDisabledState??UT}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=hi({type:n});static \u0275inj=Ir({imports:[u8]})}return n})();var dr=class n{constructor(e){this.auth=e;this.user$=new X(t=>{hP(this.auth,r=>{this.currentUser=r,t.next(r),console.log("\u{1F464} Usuario actual:",r?.email||"No autenticado")})}),this.currentUser=this.auth.currentUser,console.log("\u{1F50D} Usuario en constructor:",this.currentUser?.email)}user$;currentUser=null;async register(e,t){try{let r=await lP(this.auth,e,t);return console.log("\u2705 Usuario registrado:",r.user.email),{success:!0,user:r.user}}catch(r){return console.error("\u274C Error al registrar:",r.message),{success:!1,error:r.message}}}async login(e,t){try{let r=await fP(this.auth,e,t);return console.log("\u2705 Sesi\xF3n iniciada:",r.user.email),{success:!0,user:r.user}}catch(r){return console.error("\u274C Error al iniciar sesi\xF3n:",r.message),{success:!1,error:r.message}}}async logout(){try{return await pP(this.auth),console.log("\u2705 Sesi\xF3n cerrada"),{success:!0}}catch(e){return console.error("\u274C Error al cerrar sesi\xF3n:",e.message),{success:!1,error:e.message}}}getCurrentUser(){return this.currentUser}isAuthenticated(){return this.currentUser!==null}static \u0275fac=function(t){return new(t||n)(te(Lr))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})};function l8(n,e){if(n&1&&(O(0,"div",11),F(1),x()),n&2){let t=Ve();z(),rt(" \u274C ",t.errorMessage," ")}}var vg=class n{constructor(e,t){this.authService=e;this.router=t}email="";password="";errorMessage="";loading=!1;async onLogin(){if(!this.email||!this.password){this.errorMessage="Por favor completa todos los campos";return}this.loading=!0,this.errorMessage="";let e=await this.authService.login(this.email,this.password);this.loading=!1,e.success?this.router.navigate(["/inventario"]):this.errorMessage="Email o contrase\xF1a incorrectos"}goToRegister(){this.router.navigate(["/register"])}static \u0275fac=function(t){return new(t||n)(ee(dr),ee(er))};static \u0275cmp=un({type:n,selectors:[["app-login"]],decls:23,vars:5,consts:[[1,"container"],[1,"card"],[1,"subtitle"],[3,"ngSubmit"],[1,"form-group"],["type","email","name","email","placeholder","tu@email.com","required","",3,"ngModelChange","ngModel"],["type","password","name","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",3,"ngModelChange","ngModel"],["class","error",4,"ngIf"],["type","submit",1,"btn-primary",3,"disabled"],[1,"footer"],[3,"click"],[1,"error"]],template:function(t,r){t&1&&(O(0,"div",0)(1,"div",1)(2,"h1"),F(3,"\u{1F510} Iniciar Sesi\xF3n"),x(),O(4,"p",2),F(5,"Control de Inventario Escolar"),x(),O(6,"form",3),Ae("ngSubmit",function(){return r.onLogin()}),O(7,"div",4)(8,"label"),F(9,"\u{1F4E7} Email"),x(),O(10,"input",5),ot("ngModelChange",function(o){return ct(r.email,o)||(r.email=o),o}),x()(),O(11,"div",4)(12,"label"),F(13,"\u{1F511} Contrase\xF1a"),x(),O(14,"input",6),ot("ngModelChange",function(o){return ct(r.password,o)||(r.password=o),o}),x()(),ln(15,l8,2,1,"div",7),O(16,"button",8),F(17),x()(),O(18,"div",9)(19,"p"),F(20,"\xBFNo tienes cuenta? "),O(21,"a",10),Ae("click",function(){return r.goToRegister()}),F(22,"Reg\xEDstrate aqu\xED"),x()()()()()),t&2&&(z(10),it("ngModel",r.email),z(4),it("ngModel",r.password),z(),nt("ngIf",r.errorMessage),z(),nt("disabled",r.loading),z(),rt(" ",r.loading?"Iniciando...":"Iniciar Sesi\xF3n"," "))},dependencies:[Yn,Ar,za,Ha,$i,Ba,$a,Jo,Zo,Yo],styles:[".container[_ngcontent-%COMP%]{min-height:100vh;display:flex;justify-content:center;align-items:center;background:linear-gradient(135deg,#667eea,#764ba2);padding:20px}.card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:40px;box-shadow:0 20px 60px #0000004d;width:100%;max-width:400px}h1[_ngcontent-%COMP%]{text-align:center;color:#333;margin-bottom:8px;font-size:28px}.subtitle[_ngcontent-%COMP%]{text-align:center;color:#666;margin-bottom:30px;font-size:14px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;color:#555;font-weight:500;font-size:14px}input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #e1e8ed;border-radius:8px;font-size:14px;transition:border-color .3s;box-sizing:border-box}input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}.error[_ngcontent-%COMP%]{background:#fee;color:#c33;padding:12px;border-radius:8px;margin-bottom:16px;font-size:14px;text-align:center}.btn-primary[_ngcontent-%COMP%]{width:100%;padding:14px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;transition:transform .2s}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px)}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.footer[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:14px}.footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#667eea;text-decoration:none;font-weight:600;cursor:pointer}.footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};function d8(n,e){if(n&1&&(O(0,"div",12),F(1),x()),n&2){let t=Ve();z(),rt(" \u274C ",t.errorMessage," ")}}var _g=class n{constructor(e,t){this.authService=e;this.router=t}email="";password="";confirmPassword="";errorMessage="";loading=!1;async onRegister(){if(!this.email||!this.password||!this.confirmPassword){this.errorMessage="Por favor completa todos los campos";return}if(this.password.length<6){this.errorMessage="La contrase\xF1a debe tener al menos 6 caracteres";return}if(this.password!==this.confirmPassword){this.errorMessage="Las contrase\xF1as no coinciden";return}this.loading=!0,this.errorMessage="";let e=await this.authService.register(this.email,this.password);this.loading=!1,e.success?this.router.navigate(["/inventario"]):e.error.includes("email-already-in-use")?this.errorMessage="Este email ya est\xE1 registrado":e.error.includes("invalid-email")?this.errorMessage="Email inv\xE1lido":this.errorMessage="Error al registrar. Intenta de nuevo"}goToLogin(){this.router.navigate(["/login"])}static \u0275fac=function(t){return new(t||n)(ee(dr),ee(er))};static \u0275cmp=un({type:n,selectors:[["app-register"]],decls:27,vars:6,consts:[[1,"container"],[1,"card"],[1,"subtitle"],[3,"ngSubmit"],[1,"form-group"],["type","email","name","email","placeholder","tu@email.com","required","",3,"ngModelChange","ngModel"],["type","password","name","password","placeholder","M\xEDnimo 6 caracteres","required","",3,"ngModelChange","ngModel"],["type","password","name","confirmPassword","placeholder","Repite tu contrase\xF1a","required","",3,"ngModelChange","ngModel"],["class","error",4,"ngIf"],["type","submit",1,"btn-primary",3,"disabled"],[1,"footer"],[3,"click"],[1,"error"]],template:function(t,r){t&1&&(O(0,"div",0)(1,"div",1)(2,"h1"),F(3,"\u{1F4DD} Crear Cuenta"),x(),O(4,"p",2),F(5,"Control de Inventario Escolar"),x(),O(6,"form",3),Ae("ngSubmit",function(){return r.onRegister()}),O(7,"div",4)(8,"label"),F(9,"\u{1F4E7} Email"),x(),O(10,"input",5),ot("ngModelChange",function(o){return ct(r.email,o)||(r.email=o),o}),x()(),O(11,"div",4)(12,"label"),F(13,"\u{1F511} Contrase\xF1a"),x(),O(14,"input",6),ot("ngModelChange",function(o){return ct(r.password,o)||(r.password=o),o}),x()(),O(15,"div",4)(16,"label"),F(17,"\u{1F511} Confirmar Contrase\xF1a"),x(),O(18,"input",7),ot("ngModelChange",function(o){return ct(r.confirmPassword,o)||(r.confirmPassword=o),o}),x()(),ln(19,d8,2,1,"div",8),O(20,"button",9),F(21),x()(),O(22,"div",10)(23,"p"),F(24,"\xBFYa tienes cuenta? "),O(25,"a",11),Ae("click",function(){return r.goToLogin()}),F(26,"Inicia sesi\xF3n aqu\xED"),x()()()()()),t&2&&(z(10),it("ngModel",r.email),z(4),it("ngModel",r.password),z(4),it("ngModel",r.confirmPassword),z(),nt("ngIf",r.errorMessage),z(),nt("disabled",r.loading),z(),rt(" ",r.loading?"Registrando...":"Crear Cuenta"," "))},dependencies:[Yn,Ar,za,Ha,$i,Ba,$a,Jo,Zo,Yo],styles:[".container[_ngcontent-%COMP%]{min-height:100vh;display:flex;justify-content:center;align-items:center;background:linear-gradient(135deg,#f093fb,#f5576c);padding:20px}.card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:40px;box-shadow:0 20px 60px #0000004d;width:100%;max-width:400px}h1[_ngcontent-%COMP%]{text-align:center;color:#333;margin-bottom:8px;font-size:28px}.subtitle[_ngcontent-%COMP%]{text-align:center;color:#666;margin-bottom:30px;font-size:14px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;color:#555;font-weight:500;font-size:14px}input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #e1e8ed;border-radius:8px;font-size:14px;transition:border-color .3s;box-sizing:border-box}input[_ngcontent-%COMP%]:focus{outline:none;border-color:#f5576c}.error[_ngcontent-%COMP%]{background:#fee;color:#c33;padding:12px;border-radius:8px;margin-bottom:16px;font-size:14px;text-align:center}.btn-primary[_ngcontent-%COMP%]{width:100%;padding:14px;background:linear-gradient(135deg,#f093fb,#f5576c);color:#fff;border:none;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;transition:transform .2s}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px)}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.footer[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:14px}.footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#f5576c;text-decoration:none;font-weight:600;cursor:pointer}.footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};function h8(n,e){if(n&1&&(O(0,"div",3)(1,"h2",4),F(2,"\u2705 Firebase Conectado Correctamente"),x(),O(3,"p",5)(4,"strong"),F(5,"ID del Proyecto:"),x(),F(6),x(),O(7,"p",5)(8,"strong"),F(9,"Autenticaci\xF3n:"),x(),F(10),x(),O(11,"p",5)(12,"strong"),F(13,"Firestore:"),x(),F(14," \u2705 Habilitado"),x()()),n&2){let t=Ve();z(6),rt(" ",t.projectId),z(4),rt(" ",t.authEnabled?"\u2705 Habilitada":"\u274C Deshabilitada")}}function f8(n,e){n&1&&(O(0,"div",6)(1,"h2",7),F(2,"\u274C Error de Conexi\xF3n"),x(),O(3,"p"),F(4,"No se pudo conectar con Firebase. Revisa la consola."),x()())}var Eg=class n{constructor(e,t){this.firestore=e;this.auth=t}firebaseConnected=!1;projectId="";authEnabled=!1;ngOnInit(){this.testFirebase()}testFirebase(){try{this.projectId=this.firestore.app.options.projectId||"No encontrado",this.firebaseConnected=!0,this.authEnabled=this.auth!==null,console.log("\u{1F525} Firebase conectado!"),console.log("Proyecto:",this.projectId)}catch(e){console.error("\u274C Error:",e),this.firebaseConnected=!1}}static \u0275fac=function(t){return new(t||n)(ee(Wr),ee(Lr))};static \u0275cmp=un({type:n,selectors:[["app-test-firebase"]],decls:5,vars:2,consts:[[2,"padding","20px","font-family","Arial"],["style","background: #d4edda; padding: 15px; border-radius: 8px; margin: 10px 0;",4,"ngIf"],["style","background: #f8d7da; padding: 15px; border-radius: 8px; margin: 10px 0;",4,"ngIf"],[2,"background","#d4edda","padding","15px","border-radius","8px","margin","10px 0"],[2,"color","#155724","margin","0"],[2,"margin","10px 0"],[2,"background","#f8d7da","padding","15px","border-radius","8px","margin","10px 0"],[2,"color","#721c24","margin","0"]],template:function(t,r){t&1&&(O(0,"div",0)(1,"h1"),F(2,"\u{1F525} Prueba de Conexi\xF3n Firebase"),x(),ln(3,h8,15,2,"div",1)(4,f8,5,0,"div",2),x()),t&2&&(z(3),nt("ngIf",r.firebaseConnected),z(),nt("ngIf",!r.firebaseConnected))},dependencies:[Yn,Ar],encapsulation:2})};var Ig=class n{constructor(e){this.authService=e;this.firestore=A(Wr)}collectionName="inventario";firestore;getItems(){let e=this.authService.getCurrentUser()?.uid;if(console.log("\u{1F50D} Obteniendo items para usuario:",e),!e)return console.error("\u274C No hay userId"),new X(o=>o.next([]));let t=xT(this.firestore,this.collectionName),r=ek(t,nk("usuarioId","==",e)),i=YO(r,{idField:"id"});return i.subscribe(o=>{console.log("\u{1F4E6} Items recibidos:",o.length,o)}),i}async addItem(e){let t=this.authService.getCurrentUser();if(!t||!t.uid)return console.error("\u274C No hay usuario autenticado"),alert("Debes iniciar sesi\xF3n para agregar art\xEDculos"),{success:!1,error:"No autenticado"};let r=xT(this.firestore,this.collectionName),i=ae(k({},e),{usuarioId:t.uid,fechaRegistro:new Date});try{let o=await ZO(r,i);return console.log("\u2705 Item agregado:",o.id),{success:!0,id:o.id}}catch(o){return console.error("\u274C Error al agregar item:",o),{success:!1,error:o.message}}}async updateItem(e,t){try{let r=OT(this.firestore,this.collectionName,e);return await tk(r,k({},t)),console.log("\u2705 Item actualizado:",e),{success:!0}}catch(r){return console.error("\u274C Error al actualizar item:",r),{success:!1,error:r.message}}}async deleteItem(e){try{let t=OT(this.firestore,this.collectionName,e);return await JO(t),console.log("\u2705 Item eliminado:",e),{success:!0}}catch(t){return console.error("\u274C Error al eliminar item:",t),{success:!1,error:t.message}}}static \u0275fac=function(t){return new(t||n)(te(dr))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})};function g8(n,e){if(n&1&&(O(0,"option",26),F(1),x()),n&2){let t=e.$implicit;nt("value",t),z(),dn(t)}}function m8(n,e){if(n&1){let t=Jc();O(0,"div",27)(1,"div",28)(2,"h3"),F(3),x(),O(4,"span",29),F(5),x()(),O(6,"div",30)(7,"p")(8,"strong"),F(9,"Categor\xEDa:"),x(),F(10),x(),O(11,"p")(12,"strong"),F(13,"Cantidad:"),x(),F(14),x(),O(15,"p")(16,"strong"),F(17,"Ubicaci\xF3n:"),x(),F(18),x(),O(19,"p")(20,"strong"),F(21,"Descripci\xF3n:"),x(),F(22),x(),O(23,"p",31)(24,"strong"),F(25,"Registrado:"),x(),F(26),x()(),O(27,"div",32)(28,"button",33),Ae("click",function(){let i=St(t).$implicit,o=Ve();return At(o.openForm(i))}),F(29,"\u270F\uFE0F Editar"),x(),O(30,"button",34),Ae("click",function(){let i=St(t).$implicit,o=Ve();return At(o.deleteItem(i.id))}),F(31,"\u{1F5D1}\uFE0F Eliminar"),x()()()}if(n&2){let t=e.$implicit,r=Ve();z(3),dn(t.nombre),z(),jv(t.estado),z(),dn(t.estado),z(5),rt(" ",t.categoria),z(4),rt(" ",t.cantidad),z(4),rt(" ",t.ubicacion),z(4),rt(" ",t.descripcion),z(4),rt(" ",r.getFormattedDate(t.fechaRegistro)," ")}}function y8(n,e){if(n&1){let t=Jc();O(0,"div",35)(1,"p"),F(2,"\u{1F4ED} No hay art\xEDculos que coincidan con los filtros"),x(),O(3,"button",21),Ae("click",function(){St(t);let i=Ve();return At(i.openForm())}),F(4,"Agregar el primero"),x()()}}function v8(n,e){if(n&1&&(O(0,"option",26),F(1),x()),n&2){let t=e.$implicit;nt("value",t),z(),dn(t)}}function _8(n,e){if(n&1){let t=Jc();O(0,"div",36),Ae("click",function(){St(t);let i=Ve();return At(i.closeForm())}),O(1,"div",37),Ae("click",function(i){return St(t),At(i.stopPropagation())}),O(2,"h2"),F(3),x(),O(4,"form",38),Ae("ngSubmit",function(){St(t);let i=Ve();return At(i.onSubmit())}),O(5,"div",39)(6,"label"),F(7,"Nombre *"),x(),O(8,"input",40),ot("ngModelChange",function(i){St(t);let o=Ve();return ct(o.formData.nombre,i)||(o.formData.nombre=i),At(i)}),x()(),O(9,"div",39)(10,"label"),F(11,"Categor\xEDa *"),x(),O(12,"select",41),ot("ngModelChange",function(i){St(t);let o=Ve();return ct(o.formData.categoria,i)||(o.formData.categoria=i),At(i)}),O(13,"option",15),F(14,"Selecciona una categor\xEDa"),x(),ln(15,v8,2,2,"option",16),x()(),O(16,"div",42)(17,"div",39)(18,"label"),F(19,"Cantidad *"),x(),O(20,"input",43),ot("ngModelChange",function(i){St(t);let o=Ve();return ct(o.formData.cantidad,i)||(o.formData.cantidad=i),At(i)}),x()(),O(21,"div",39)(22,"label"),F(23,"Estado"),x(),O(24,"select",44),ot("ngModelChange",function(i){St(t);let o=Ve();return ct(o.formData.estado,i)||(o.formData.estado=i),At(i)}),O(25,"option",17),F(26,"Disponible"),x(),O(27,"option",18),F(28,"En Uso"),x(),O(29,"option",19),F(30,"Da\xF1ado"),x(),O(31,"option",20),F(32,"Perdido"),x()()()(),O(33,"div",39)(34,"label"),F(35,"Ubicaci\xF3n"),x(),O(36,"input",45),ot("ngModelChange",function(i){St(t);let o=Ve();return ct(o.formData.ubicacion,i)||(o.formData.ubicacion=i),At(i)}),x()(),O(37,"div",39)(38,"label"),F(39,"Descripci\xF3n"),x(),O(40,"textarea",46),ot("ngModelChange",function(i){St(t);let o=Ve();return ct(o.formData.descripcion,i)||(o.formData.descripcion=i),At(i)}),x()(),O(41,"div",47)(42,"button",48),Ae("click",function(){St(t);let i=Ve();return At(i.closeForm())}),F(43,"Cancelar"),x(),O(44,"button",49),F(45),x()()()()()}if(n&2){let t=Ve();z(3),dn(t.editingItem?"\u270F\uFE0F Editar Art\xEDculo":"\u2795 Nuevo Art\xEDculo"),z(5),it("ngModel",t.formData.nombre),z(4),it("ngModel",t.formData.categoria),z(3),nt("ngForOf",t.categorias),z(5),it("ngModel",t.formData.cantidad),z(4),it("ngModel",t.formData.estado),z(12),it("ngModel",t.formData.ubicacion),z(4),it("ngModel",t.formData.descripcion),z(5),rt(" ",t.editingItem?"Actualizar":"Agregar"," ")}}var wg=class n{constructor(e,t,r){this.inventarioService=e;this.authService=t;this.router=r}items=[];filteredItems=[];searchTerm="";selectedCategoria="";selectedEstado="";showForm=!1;editingItem=null;formData={nombre:"",categoria:"",cantidad:0,descripcion:"",estado:"disponible",ubicacion:""};categorias=["Electr\xF3nica","Mobiliario","Material Did\xE1ctico","Deportes","Oficina","Otros"];estados=["disponible","en-uso","da\xF1ado","perdido"];ngOnInit(){this.authService.user$.subscribe(e=>{e?(console.log("\u2705 Usuario cargado en inventario:",e.email),this.loadItems()):console.log("\u23F3 Esperando usuario...")})}loadItems(){this.inventarioService.getItems().subscribe(e=>{this.items=e,this.applyFilters()})}applyFilters(){this.filteredItems=this.items.filter(e=>{let t=e.nombre.toLowerCase().includes(this.searchTerm.toLowerCase())||e.descripcion.toLowerCase().includes(this.searchTerm.toLowerCase()),r=!this.selectedCategoria||e.categoria===this.selectedCategoria,i=!this.selectedEstado||e.estado===this.selectedEstado;return t&&r&&i})}onSearch(){this.applyFilters()}openForm(e){e?(this.editingItem=e,this.formData={nombre:e.nombre,categoria:e.categoria,cantidad:e.cantidad,descripcion:e.descripcion,estado:e.estado,ubicacion:e.ubicacion}):(this.editingItem=null,this.resetForm()),this.showForm=!0}closeForm(){this.showForm=!1,this.editingItem=null,this.resetForm()}resetForm(){this.formData={nombre:"",categoria:"",cantidad:0,descripcion:"",estado:"disponible",ubicacion:""}}async onSubmit(){if(console.log("\u{1F4E4} Enviando formulario:",this.authService.getCurrentUser()?.email),!this.formData.nombre||!this.formData.categoria){alert("Por favor completa los campos obligatorios");return}this.editingItem?.id?await this.inventarioService.updateItem(this.editingItem.id,this.formData):await this.inventarioService.addItem(this.formData),this.closeForm()}async deleteItem(e){confirm("\xBFEst\xE1s seguro de eliminar este art\xEDculo?")&&(console.log("\u{1F5D1}\uFE0F Eliminando item:",e),await this.inventarioService.deleteItem(e))}getStats(){return{total:this.items.length,disponibles:this.items.filter(e=>e.estado==="disponible").length,enUso:this.items.filter(e=>e.estado==="en-uso").length,danados:this.items.filter(e=>e.estado==="da\xF1ado").length,perdidos:this.items.filter(e=>e.estado==="perdido").length}}getFormattedDate(e){if(!e)return"Sin fecha";try{return e.toDate?e.toDate().toLocaleDateString("es-ES"):e instanceof Date?e.toLocaleDateString("es-ES"):new Date(e).toLocaleDateString("es-ES")}catch{return"Fecha inv\xE1lida"}}async logout(){await this.authService.logout(),this.router.navigate(["/login"])}static \u0275fac=function(t){return new(t||n)(ee(Ig),ee(dr),ee(er))};static \u0275cmp=un({type:n,selectors:[["app-inventario"]],decls:56,vars:12,consts:[[1,"container"],[1,"header"],[1,"header-content"],[1,"btn-logout",3,"click"],[1,"stats"],[1,"stat-card"],[1,"stat-number"],[1,"stat-label"],[1,"stat-card","green"],[1,"stat-card","blue"],[1,"stat-card","orange"],[1,"stat-card","red"],[1,"filters"],["type","text","placeholder","\u{1F50D} Buscar por nombre o descripci\xF3n...",1,"search-input",3,"ngModelChange","input","ngModel"],[1,"filter-select",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["value","disponible"],["value","en-uso"],["value","da\xF1ado"],["value","perdido"],[1,"btn-add",3,"click"],[1,"items-grid"],["class","item-card",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],["class","modal",3,"click",4,"ngIf"],[3,"value"],[1,"item-card"],[1,"item-header"],[1,"badge"],[1,"item-body"],[1,"item-date"],[1,"item-actions"],[1,"btn-edit",3,"click"],[1,"btn-delete",3,"click"],[1,"empty-state"],[1,"modal",3,"click"],[1,"modal-content",3,"click"],[3,"ngSubmit"],[1,"form-group"],["type","text","name","nombre","required","",3,"ngModelChange","ngModel"],["name","categoria","required","",3,"ngModelChange","ngModel"],[1,"form-row"],["type","number","name","cantidad","min","0","required","",3,"ngModelChange","ngModel"],["name","estado",3,"ngModelChange","ngModel"],["type","text","name","ubicacion",3,"ngModelChange","ngModel"],["name","descripcion","rows","3",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","button",1,"btn-cancel",3,"click"],["type","submit",1,"btn-submit"]],template:function(t,r){t&1&&(O(0,"div",0)(1,"header",1)(2,"div",2)(3,"h1"),F(4,"\u{1F4E6} Control de Inventario Escolar"),x(),O(5,"button",3),Ae("click",function(){return r.logout()}),F(6,"Cerrar Sesi\xF3n"),x()()(),O(7,"div",4)(8,"div",5)(9,"div",6),F(10),x(),O(11,"div",7),F(12,"Total Art\xEDculos"),x()(),O(13,"div",8)(14,"div",6),F(15),x(),O(16,"div",7),F(17,"Disponibles"),x()(),O(18,"div",9)(19,"div",6),F(20),x(),O(21,"div",7),F(22,"En Uso"),x()(),O(23,"div",10)(24,"div",6),F(25),x(),O(26,"div",7),F(27,"Da\xF1ados"),x()(),O(28,"div",11)(29,"div",6),F(30),x(),O(31,"div",7),F(32,"Perdidos"),x()()(),O(33,"div",12)(34,"input",13),ot("ngModelChange",function(o){return ct(r.searchTerm,o)||(r.searchTerm=o),o}),Ae("input",function(){return r.onSearch()}),x(),O(35,"select",14),ot("ngModelChange",function(o){return ct(r.selectedCategoria,o)||(r.selectedCategoria=o),o}),Ae("change",function(){return r.applyFilters()}),O(36,"option",15),F(37,"Todas las categor\xEDas"),x(),ln(38,g8,2,2,"option",16),x(),O(39,"select",14),ot("ngModelChange",function(o){return ct(r.selectedEstado,o)||(r.selectedEstado=o),o}),Ae("change",function(){return r.applyFilters()}),O(40,"option",15),F(41,"Todos los estados"),x(),O(42,"option",17),F(43,"Disponible"),x(),O(44,"option",18),F(45,"En Uso"),x(),O(46,"option",19),F(47,"Da\xF1ado"),x(),O(48,"option",20),F(49,"Perdido"),x()(),O(50,"button",21),Ae("click",function(){return r.openForm()}),F(51,"+ Agregar Art\xEDculo"),x()(),O(52,"div",22),ln(53,m8,32,9,"div",23)(54,y8,5,0,"div",24),x(),ln(55,_8,46,9,"div",25),x()),t&2&&(z(10),dn(r.getStats().total),z(5),dn(r.getStats().disponibles),z(5),dn(r.getStats().enUso),z(5),dn(r.getStats().danados),z(5),dn(r.getStats().perdidos),z(4),it("ngModel",r.searchTerm),z(),it("ngModel",r.selectedCategoria),z(3),nt("ngForOf",r.categorias),z(),it("ngModel",r.selectedEstado),z(14),nt("ngForOf",r.filteredItems),z(),nt("ngIf",r.filteredItems.length===0),z(),nt("ngIf",r.showForm))},dependencies:[Yn,Xh,Ar,za,Ha,Ck,Ak,$i,BT,mg,Ba,$a,Jo,$T,Zo,Yo],styles:[".container[_ngcontent-%COMP%]{min-height:100vh;background:#f5f7fa;padding-bottom:40px}.header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:24px;box-shadow:0 4px 12px #0000001a}.header-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;display:flex;justify-content:space-between;align-items:center}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:28px}.btn-logout[_ngcontent-%COMP%]{background:#fff3;color:#fff;border:2px solid white;padding:10px 20px;border-radius:8px;cursor:pointer;font-weight:600;transition:all .3s}.btn-logout[_ngcontent-%COMP%]:hover{background:#fff;color:#667eea}.stats[_ngcontent-%COMP%]{max-width:1200px;margin:30px auto;padding:0 20px;display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:16px}.stat-card[_ngcontent-%COMP%]{background:#fff;padding:24px;border-radius:12px;box-shadow:0 2px 8px #00000014;text-align:center;border-left:4px solid #667eea}.stat-card.green[_ngcontent-%COMP%]{border-left-color:#10b981}.stat-card.blue[_ngcontent-%COMP%]{border-left-color:#3b82f6}.stat-card.orange[_ngcontent-%COMP%]{border-left-color:#f59e0b}.stat-card.red[_ngcontent-%COMP%]{border-left-color:#ef4444}.stat-number[_ngcontent-%COMP%]{font-size:36px;font-weight:700;color:#1f2937;margin-bottom:8px}.stat-label[_ngcontent-%COMP%]{color:#6b7280;font-size:14px;font-weight:500}.filters[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto 30px;padding:0 20px;display:flex;gap:12px;flex-wrap:wrap}.search-input[_ngcontent-%COMP%]{flex:1;min-width:200px;padding:12px 16px;border:2px solid #e5e7eb;border-radius:8px;font-size:14px}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}.filter-select[_ngcontent-%COMP%]{padding:12px 16px;border:2px solid #e5e7eb;border-radius:8px;font-size:14px;cursor:pointer}.filter-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}.btn-add[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;padding:12px 24px;border-radius:8px;font-weight:600;cursor:pointer;transition:transform .2s}.btn-add[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.items-grid[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 20px;display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:20px}.item-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;box-shadow:0 2px 8px #00000014;transition:transform .2s,box-shadow .2s}.item-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 16px #0000001f}.item-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:start;margin-bottom:16px;padding-bottom:12px;border-bottom:2px solid #f3f4f6}.item-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#1f2937;font-size:18px}.badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:12px;font-size:12px;font-weight:600;text-transform:capitalize}.badge.disponible[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.badge.en-uso[_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af}.badge.da\\f1 ado[_ngcontent-%COMP%]{background:#fed7aa;color:#92400e}.badge.perdido[_ngcontent-%COMP%]{background:#fecaca;color:#991b1b}.item-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0;color:#4b5563;font-size:14px}.item-date[_ngcontent-%COMP%]{color:#9ca3af;font-size:12px;margin-top:12px}.item-actions[_ngcontent-%COMP%]{display:flex;gap:8px;margin-top:16px;padding-top:16px;border-top:2px solid #f3f4f6}.btn-edit[_ngcontent-%COMP%], .btn-delete[_ngcontent-%COMP%]{flex:1;padding:8px 16px;border:none;border-radius:6px;font-size:13px;font-weight:600;cursor:pointer;transition:opacity .2s}.btn-edit[_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af}.btn-delete[_ngcontent-%COMP%]{background:#fecaca;color:#991b1b}.btn-edit[_ngcontent-%COMP%]:hover, .btn-delete[_ngcontent-%COMP%]:hover{opacity:.8}.empty-state[_ngcontent-%COMP%]{grid-column:1 / -1;text-align:center;padding:60px 20px;color:#9ca3af}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;margin-bottom:20px}.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000;padding:20px}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:32px;width:100%;max-width:500px;max-height:90vh;overflow-y:auto}.modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 24px;color:#1f2937}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;color:#374151;font-weight:500;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:2px solid #e5e7eb;border-radius:8px;font-size:14px;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}.form-actions[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:24px}.btn-cancel[_ngcontent-%COMP%], .btn-submit[_ngcontent-%COMP%]{flex:1;padding:12px;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:opacity .2s}.btn-cancel[_ngcontent-%COMP%]{background:#e5e7eb;color:#374151}.btn-submit[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.btn-cancel[_ngcontent-%COMP%]:hover, .btn-submit[_ngcontent-%COMP%]:hover{opacity:.9}"]})};var Nk=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",component:vg},{path:"register",component:_g},{path:"inventario",component:wg},{path:"test",component:Eg},{path:"**",redirectTo:"/login"}];var Mk={providers:[fy(),$v(),H_(Nk),xR(PR()),rM(()=>iM(rk)),uP(()=>dP()),QO(()=>XO())]};var Tg=class n{title=Wt("control-inventario-escolar");static \u0275fac=function(t){return new(t||n)};static \u0275cmp=un({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){t&1&&Hs(0,"router-outlet")},dependencies:[Cu],encapsulation:2})};m_(Tg,Mk).catch(n=>console.error(n));
